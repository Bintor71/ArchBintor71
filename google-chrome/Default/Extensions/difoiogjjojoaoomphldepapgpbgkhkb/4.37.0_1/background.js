"use strict";(()=>{var yk=Object.create;var vu=Object.defineProperty;var Qk=Object.getOwnPropertyDescriptor;var wk=Object.getOwnPropertyNames;var Sk=Object.getPrototypeOf,xk=Object.prototype.hasOwnProperty;var F=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var bk=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of wk(t))!xk.call(e,o)&&o!==r&&vu(e,o,{get:()=>t[o],enumerable:!(n=Qk(t,o))||n.enumerable});return e};var J=(e,t,r)=>(r=e!=null?yk(Sk(e)):{},bk(t||!e||!e.__esModule?vu(r,"default",{value:e,enumerable:!0}):r,e));var ht=F((Kc,Ru)=>{"use strict";var ai=function(e){return e&&e.Math===Math&&e};Ru.exports=ai(typeof globalThis=="object"&&globalThis)||ai(typeof window=="object"&&window)||ai(typeof self=="object"&&self)||ai(typeof global=="object"&&global)||ai(typeof Kc=="object"&&Kc)||function(){return this}()||Function("return this")()});var Mt=F((K8,Nu)=>{"use strict";Nu.exports=function(e){try{return!!e()}catch{return!0}}});var $t=F((J8,Tu)=>{"use strict";var Dk=Mt();Tu.exports=!Dk(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})});var Jc=F((V8,Mu)=>{"use strict";var kk=Mt();Mu.exports=!kk(function(){var e=function(){}.bind();return typeof e!="function"||e.hasOwnProperty("prototype")})});var ps=F((z8,Uu)=>{"use strict";var Fk=Jc(),Is=Function.prototype.call;Uu.exports=Fk?Is.bind(Is):function(){return Is.apply(Is,arguments)}});var Hu=F(Gu=>{"use strict";var Ou={}.propertyIsEnumerable,Pu=Object.getOwnPropertyDescriptor,_k=Pu&&!Ou.call({1:2},1);Gu.f=_k?function(t){var r=Pu(this,t);return!!r&&r.enumerable}:Ou});var Vc=F((W8,qu)=>{"use strict";qu.exports=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}});var Ut=F((j8,Ju)=>{"use strict";var Lu=Jc(),Ku=Function.prototype,zc=Ku.call,vk=Lu&&Ku.bind.bind(zc,zc);Ju.exports=Lu?vk:function(e){return function(){return zc.apply(e,arguments)}}});var Yc=F((X8,zu)=>{"use strict";var Vu=Ut(),Rk=Vu({}.toString),Nk=Vu("".slice);zu.exports=function(e){return Nk(Rk(e),8,-1)}});var Wu=F((Z8,Yu)=>{"use strict";var Tk=Ut(),Mk=Mt(),Uk=Yc(),Wc=Object,Ok=Tk("".split);Yu.exports=Mk(function(){return!Wc("z").propertyIsEnumerable(0)})?function(e){return Uk(e)==="String"?Ok(e,""):Wc(e)}:Wc});var jc=F(($8,ju)=>{"use strict";ju.exports=function(e){return e==null}});var Xc=F((eJ,Xu)=>{"use strict";var Pk=jc(),Gk=TypeError;Xu.exports=function(e){if(Pk(e))throw new Gk("Can't call method on "+e);return e}});var Cr=F((tJ,Zu)=>{"use strict";var Hk=Wu(),qk=Xc();Zu.exports=function(e){return Hk(qk(e))}});var Dt=F((rJ,$u)=>{"use strict";var Zc=typeof document=="object"&&document.all;$u.exports=typeof Zc>"u"&&Zc!==void 0?function(e){return typeof e=="function"||e===Zc}:function(e){return typeof e=="function"}});var Jn=F((nJ,eI)=>{"use strict";var Lk=Dt();eI.exports=function(e){return typeof e=="object"?e!==null:Lk(e)}});var Vn=F((oJ,tI)=>{"use strict";var $c=ht(),Kk=Dt(),Jk=function(e){return Kk(e)?e:void 0};tI.exports=function(e,t){return arguments.length<2?Jk($c[e]):$c[e]&&$c[e][t]}});var nI=F((iJ,rI)=>{"use strict";var Vk=Ut();rI.exports=Vk({}.isPrototypeOf)});var aI=F((sJ,sI)=>{"use strict";var zk=ht(),oI=zk.navigator,iI=oI&&oI.userAgent;sI.exports=iI?String(iI):""});var uI=F((aJ,fI)=>{"use strict";var dI=ht(),eg=aI(),AI=dI.process,cI=dI.Deno,gI=AI&&AI.versions||cI&&cI.version,lI=gI&&gI.v8,Ot,ms;lI&&(Ot=lI.split("."),ms=Ot[0]>0&&Ot[0]<4?1:+(Ot[0]+Ot[1]));!ms&&eg&&(Ot=eg.match(/Edge\/(\d+)/),(!Ot||Ot[1]>=74)&&(Ot=eg.match(/Chrome\/(\d+)/),Ot&&(ms=+Ot[1])));fI.exports=ms});var tg=F((AJ,pI)=>{"use strict";var II=uI(),Yk=Mt(),Wk=ht(),jk=Wk.String;pI.exports=!!Object.getOwnPropertySymbols&&!Yk(function(){var e=Symbol("symbol detection");return!jk(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&II&&II<41})});var rg=F((cJ,mI)=>{"use strict";var Xk=tg();mI.exports=Xk&&!Symbol.sham&&typeof Symbol.iterator=="symbol"});var ng=F((gJ,hI)=>{"use strict";var Zk=Vn(),$k=Dt(),eF=nI(),tF=rg(),rF=Object;hI.exports=tF?function(e){return typeof e=="symbol"}:function(e){var t=Zk("Symbol");return $k(t)&&eF(t.prototype,rF(e))}});var BI=F((lJ,CI)=>{"use strict";var nF=String;CI.exports=function(e){try{return nF(e)}catch{return"Object"}}});var hs=F((dJ,EI)=>{"use strict";var oF=Dt(),iF=BI(),sF=TypeError;EI.exports=function(e){if(oF(e))return e;throw new sF(iF(e)+" is not a function")}});var QI=F((fJ,yI)=>{"use strict";var aF=hs(),AF=jc();yI.exports=function(e,t){var r=e[t];return AF(r)?void 0:aF(r)}});var SI=F((uJ,wI)=>{"use strict";var og=ps(),ig=Dt(),sg=Jn(),cF=TypeError;wI.exports=function(e,t){var r,n;if(t==="string"&&ig(r=e.toString)&&!sg(n=og(r,e))||ig(r=e.valueOf)&&!sg(n=og(r,e))||t!=="string"&&ig(r=e.toString)&&!sg(n=og(r,e)))return n;throw new cF("Can't convert object to primitive value")}});var ag=F((IJ,xI)=>{"use strict";xI.exports=!1});var Cs=F((pJ,DI)=>{"use strict";var bI=ht(),gF=Object.defineProperty;DI.exports=function(e,t){try{gF(bI,e,{value:t,configurable:!0,writable:!0})}catch{bI[e]=t}return t}});var Bs=F((mJ,_I)=>{"use strict";var lF=ag(),dF=ht(),fF=Cs(),kI="__core-js_shared__",FI=_I.exports=dF[kI]||fF(kI,{});(FI.versions||(FI.versions=[])).push({version:"3.40.0",mode:lF?"pure":"global",copyright:"\xA9 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.40.0/LICENSE",source:"https://github.com/zloirock/core-js"})});var Ag=F((hJ,RI)=>{"use strict";var vI=Bs();RI.exports=function(e,t){return vI[e]||(vI[e]=t||{})}});var cg=F((CJ,NI)=>{"use strict";var uF=Xc(),IF=Object;NI.exports=function(e){return IF(uF(e))}});var Hr=F((BJ,TI)=>{"use strict";var pF=Ut(),mF=cg(),hF=pF({}.hasOwnProperty);TI.exports=Object.hasOwn||function(t,r){return hF(mF(t),r)}});var gg=F((EJ,MI)=>{"use strict";var CF=Ut(),BF=0,EF=Math.random(),yF=CF(1 .toString);MI.exports=function(e){return"Symbol("+(e===void 0?"":e)+")_"+yF(++BF+EF,36)}});var Yn=F((yJ,OI)=>{"use strict";var QF=ht(),wF=Ag(),UI=Hr(),SF=gg(),xF=tg(),bF=rg(),zn=QF.Symbol,lg=wF("wks"),DF=bF?zn.for||zn:zn&&zn.withoutSetter||SF;OI.exports=function(e){return UI(lg,e)||(lg[e]=xF&&UI(zn,e)?zn[e]:DF("Symbol."+e)),lg[e]}});var qI=F((QJ,HI)=>{"use strict";var kF=ps(),PI=Jn(),GI=ng(),FF=QI(),_F=SI(),vF=Yn(),RF=TypeError,NF=vF("toPrimitive");HI.exports=function(e,t){if(!PI(e)||GI(e))return e;var r=FF(e,NF),n;if(r){if(t===void 0&&(t="default"),n=kF(r,e,t),!PI(n)||GI(n))return n;throw new RF("Can't convert object to primitive value")}return t===void 0&&(t="number"),_F(e,t)}});var dg=F((wJ,LI)=>{"use strict";var TF=qI(),MF=ng();LI.exports=function(e){var t=TF(e,"string");return MF(t)?t:t+""}});var ug=F((SJ,JI)=>{"use strict";var UF=ht(),KI=Jn(),fg=UF.document,OF=KI(fg)&&KI(fg.createElement);JI.exports=function(e){return OF?fg.createElement(e):{}}});var Ig=F((xJ,VI)=>{"use strict";var PF=$t(),GF=Mt(),HF=ug();VI.exports=!PF&&!GF(function(){return Object.defineProperty(HF("div"),"a",{get:function(){return 7}}).a!==7})});var pg=F(YI=>{"use strict";var qF=$t(),LF=ps(),KF=Hu(),JF=Vc(),VF=Cr(),zF=dg(),YF=Hr(),WF=Ig(),zI=Object.getOwnPropertyDescriptor;YI.f=qF?zI:function(t,r){if(t=VF(t),r=zF(r),WF)try{return zI(t,r)}catch{}if(YF(t,r))return JF(!LF(KF.f,t,r),t[r])}});var mg=F((DJ,WI)=>{"use strict";var jF=$t(),XF=Mt();WI.exports=jF&&XF(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})});var Ai=F((kJ,jI)=>{"use strict";var ZF=Jn(),$F=String,e_=TypeError;jI.exports=function(e){if(ZF(e))return e;throw new e_($F(e)+" is not an object")}});var Wn=F(ZI=>{"use strict";var t_=$t(),r_=Ig(),n_=mg(),Es=Ai(),XI=dg(),o_=TypeError,hg=Object.defineProperty,i_=Object.getOwnPropertyDescriptor,Cg="enumerable",Bg="configurable",Eg="writable";ZI.f=t_?n_?function(t,r,n){if(Es(t),r=XI(r),Es(n),typeof t=="function"&&r==="prototype"&&"value"in n&&Eg in n&&!n[Eg]){var o=i_(t,r);o&&o[Eg]&&(t[r]=n.value,n={configurable:Bg in n?n[Bg]:o[Bg],enumerable:Cg in n?n[Cg]:o[Cg],writable:!1})}return hg(t,r,n)}:hg:function(t,r,n){if(Es(t),r=XI(r),Es(n),r_)try{return hg(t,r,n)}catch{}if("get"in n||"set"in n)throw new o_("Accessors not supported");return"value"in n&&(t[r]=n.value),t}});var yg=F((_J,$I)=>{"use strict";var s_=$t(),a_=Wn(),A_=Vc();$I.exports=s_?function(e,t,r){return a_.f(e,t,A_(1,r))}:function(e,t,r){return e[t]=r,e}});var rp=F((vJ,tp)=>{"use strict";var Qg=$t(),c_=Hr(),ep=Function.prototype,g_=Qg&&Object.getOwnPropertyDescriptor,wg=c_(ep,"name"),l_=wg&&function(){}.name==="something",d_=wg&&(!Qg||Qg&&g_(ep,"name").configurable);tp.exports={EXISTS:wg,PROPER:l_,CONFIGURABLE:d_}});var op=F((RJ,np)=>{"use strict";var f_=Ut(),u_=Dt(),Sg=Bs(),I_=f_(Function.toString);u_(Sg.inspectSource)||(Sg.inspectSource=function(e){return I_(e)});np.exports=Sg.inspectSource});var ap=F((NJ,sp)=>{"use strict";var p_=ht(),m_=Dt(),ip=p_.WeakMap;sp.exports=m_(ip)&&/native code/.test(String(ip))});var xg=F((TJ,cp)=>{"use strict";var h_=Ag(),C_=gg(),Ap=h_("keys");cp.exports=function(e){return Ap[e]||(Ap[e]=C_(e))}});var ys=F((MJ,gp)=>{"use strict";gp.exports={}});var up=F((UJ,fp)=>{"use strict";var B_=ap(),dp=ht(),E_=Jn(),y_=yg(),bg=Hr(),Dg=Bs(),Q_=xg(),w_=ys(),lp="Object already initialized",kg=dp.TypeError,S_=dp.WeakMap,Qs,ci,ws,x_=function(e){return ws(e)?ci(e):Qs(e,{})},b_=function(e){return function(t){var r;if(!E_(t)||(r=ci(t)).type!==e)throw new kg("Incompatible receiver, "+e+" required");return r}};B_||Dg.state?(Pt=Dg.state||(Dg.state=new S_),Pt.get=Pt.get,Pt.has=Pt.has,Pt.set=Pt.set,Qs=function(e,t){if(Pt.has(e))throw new kg(lp);return t.facade=e,Pt.set(e,t),t},ci=function(e){return Pt.get(e)||{}},ws=function(e){return Pt.has(e)}):(hn=Q_("state"),w_[hn]=!0,Qs=function(e,t){if(bg(e,hn))throw new kg(lp);return t.facade=e,y_(e,hn,t),t},ci=function(e){return bg(e,hn)?e[hn]:{}},ws=function(e){return bg(e,hn)});var Pt,hn;fp.exports={set:Qs,get:ci,has:ws,enforce:x_,getterFor:b_}});var hp=F((OJ,mp)=>{"use strict";var _g=Ut(),D_=Mt(),k_=Dt(),Ss=Hr(),Fg=$t(),F_=rp().CONFIGURABLE,__=op(),pp=up(),v_=pp.enforce,R_=pp.get,Ip=String,xs=Object.defineProperty,N_=_g("".slice),T_=_g("".replace),M_=_g([].join),U_=Fg&&!D_(function(){return xs(function(){},"length",{value:8}).length!==8}),O_=String(String).split("String"),P_=mp.exports=function(e,t,r){N_(Ip(t),0,7)==="Symbol("&&(t="["+T_(Ip(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!Ss(e,"name")||F_&&e.name!==t)&&(Fg?xs(e,"name",{value:t,configurable:!0}):e.name=t),U_&&r&&Ss(r,"arity")&&e.length!==r.arity&&xs(e,"length",{value:r.arity});try{r&&Ss(r,"constructor")&&r.constructor?Fg&&xs(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch{}var n=v_(e);return Ss(n,"source")||(n.source=M_(O_,typeof t=="string"?t:"")),e};Function.prototype.toString=P_(function(){return k_(this)&&R_(this).source||__(this)},"toString")});var Bp=F((PJ,Cp)=>{"use strict";var G_=Dt(),H_=Wn(),q_=hp(),L_=Cs();Cp.exports=function(e,t,r,n){n||(n={});var o=n.enumerable,i=n.name!==void 0?n.name:t;if(G_(r)&&q_(r,i,n),n.global)o?e[t]=r:L_(t,r);else{try{n.unsafe?e[t]&&(o=!0):delete e[t]}catch{}o?e[t]=r:H_.f(e,t,{value:r,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return e}});var yp=F((GJ,Ep)=>{"use strict";var K_=Math.ceil,J_=Math.floor;Ep.exports=Math.trunc||function(t){var r=+t;return(r>0?J_:K_)(r)}});var jn=F((HJ,Qp)=>{"use strict";var V_=yp();Qp.exports=function(e){var t=+e;return t!==t||t===0?0:V_(t)}});var vg=F((qJ,wp)=>{"use strict";var z_=jn(),Y_=Math.max,W_=Math.min;wp.exports=function(e,t){var r=z_(e);return r<0?Y_(r+t,0):W_(r,t)}});var xp=F((LJ,Sp)=>{"use strict";var j_=jn(),X_=Math.min;Sp.exports=function(e){var t=j_(e);return t>0?X_(t,9007199254740991):0}});var Cn=F((KJ,bp)=>{"use strict";var Z_=xp();bp.exports=function(e){return Z_(e.length)}});var Fp=F((JJ,kp)=>{"use strict";var $_=Cr(),ev=vg(),tv=Cn(),Dp=function(e){return function(t,r,n){var o=$_(t),i=tv(o);if(i===0)return!e&&-1;var s=ev(n,i),a;if(e&&r!==r){for(;i>s;)if(a=o[s++],a!==a)return!0}else for(;i>s;s++)if((e||s in o)&&o[s]===r)return e||s||0;return!e&&-1}};kp.exports={includes:Dp(!0),indexOf:Dp(!1)}});var Ng=F((VJ,vp)=>{"use strict";var rv=Ut(),Rg=Hr(),nv=Cr(),ov=Fp().indexOf,iv=ys(),_p=rv([].push);vp.exports=function(e,t){var r=nv(e),n=0,o=[],i;for(i in r)!Rg(iv,i)&&Rg(r,i)&&_p(o,i);for(;t.length>n;)Rg(r,i=t[n++])&&(~ov(o,i)||_p(o,i));return o}});var bs=F((zJ,Rp)=>{"use strict";Rp.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]});var Tp=F(Np=>{"use strict";var sv=Ng(),av=bs(),Av=av.concat("length","prototype");Np.f=Object.getOwnPropertyNames||function(t){return sv(t,Av)}});var Up=F(Mp=>{"use strict";Mp.f=Object.getOwnPropertySymbols});var Pp=F((jJ,Op)=>{"use strict";var cv=Vn(),gv=Ut(),lv=Tp(),dv=Up(),fv=Ai(),uv=gv([].concat);Op.exports=cv("Reflect","ownKeys")||function(t){var r=lv.f(fv(t)),n=dv.f;return n?uv(r,n(t)):r}});var qp=F((XJ,Hp)=>{"use strict";var Gp=Hr(),Iv=Pp(),pv=pg(),mv=Wn();Hp.exports=function(e,t,r){for(var n=Iv(t),o=mv.f,i=pv.f,s=0;s<n.length;s++){var a=n[s];!Gp(e,a)&&!(r&&Gp(r,a))&&o(e,a,i(t,a))}}});var Kp=F((ZJ,Lp)=>{"use strict";var hv=Mt(),Cv=Dt(),Bv=/#|\.prototype\./,gi=function(e,t){var r=yv[Ev(e)];return r===wv?!0:r===Qv?!1:Cv(t)?hv(t):!!t},Ev=gi.normalize=function(e){return String(e).replace(Bv,".").toLowerCase()},yv=gi.data={},Qv=gi.NATIVE="N",wv=gi.POLYFILL="P";Lp.exports=gi});var Br=F(($J,Jp)=>{"use strict";var Ds=ht(),Sv=pg().f,xv=yg(),bv=Bp(),Dv=Cs(),kv=qp(),Fv=Kp();Jp.exports=function(e,t){var r=e.target,n=e.global,o=e.stat,i,s,a,A,c,g;if(n?s=Ds:o?s=Ds[r]||Dv(r,{}):s=Ds[r]&&Ds[r].prototype,s)for(a in t){if(c=t[a],e.dontCallGetSet?(g=Sv(s,a),A=g&&g.value):A=s[a],i=Fv(n?a:r+(o?".":"#")+a,e.forced),!i&&A!==void 0){if(typeof c==typeof A)continue;kv(c,A)}(e.sham||A&&A.sham)&&xv(c,"sham",!0),bv(s,a,c,e)}}});var zp=F((e4,Vp)=>{"use strict";var _v=Ng(),vv=bs();Vp.exports=Object.keys||function(t){return _v(t,vv)}});var Wp=F(Yp=>{"use strict";var Rv=$t(),Nv=mg(),Tv=Wn(),Mv=Ai(),Uv=Cr(),Ov=zp();Yp.f=Rv&&!Nv?Object.defineProperties:function(t,r){Mv(t);for(var n=Uv(r),o=Ov(r),i=o.length,s=0,a;i>s;)Tv.f(t,a=o[s++],n[a]);return t}});var Xp=F((r4,jp)=>{"use strict";var Pv=Vn();jp.exports=Pv("document","documentElement")});var im=F((n4,om)=>{"use strict";var Gv=Ai(),Hv=Wp(),Zp=bs(),qv=ys(),Lv=Xp(),Kv=ug(),Jv=xg(),$p=">",em="<",Mg="prototype",Ug="script",rm=Jv("IE_PROTO"),Tg=function(){},nm=function(e){return em+Ug+$p+e+em+"/"+Ug+$p},tm=function(e){e.write(nm("")),e.close();var t=e.parentWindow.Object;return e=null,t},Vv=function(){var e=Kv("iframe"),t="java"+Ug+":",r;return e.style.display="none",Lv.appendChild(e),e.src=String(t),r=e.contentWindow.document,r.open(),r.write(nm("document.F=Object")),r.close(),r.F},ks,Fs=function(){try{ks=new ActiveXObject("htmlfile")}catch{}Fs=typeof document<"u"?document.domain&&ks?tm(ks):Vv():tm(ks);for(var e=Zp.length;e--;)delete Fs[Mg][Zp[e]];return Fs()};qv[rm]=!0;om.exports=Object.create||function(t,r){var n;return t!==null?(Tg[Mg]=Gv(t),n=new Tg,Tg[Mg]=null,n[rm]=t):n=Fs(),r===void 0?n:Hv.f(n,r)}});var li=F((o4,sm)=>{"use strict";var zv=Yn(),Yv=im(),Wv=Wn().f,Og=zv("unscopables"),Pg=Array.prototype;Pg[Og]===void 0&&Wv(Pg,Og,{configurable:!0,value:Yv(null)});sm.exports=function(e){Pg[Og][e]=!0}});var am=F(()=>{"use strict";var jv=Br(),Xv=cg(),Zv=Cn(),$v=jn(),eR=li();jv({target:"Array",proto:!0},{at:function(t){var r=Xv(this),n=Zv(r),o=$v(t),i=o>=0?o:n+o;return i<0||i>=n?void 0:r[i]}});eR("at")});var cm=F((a4,Am)=>{"use strict";var tR=Cn();Am.exports=function(e,t){for(var r=tR(e),n=new t(r),o=0;o<r;o++)n[o]=e[r-o-1];return n}});var gm=F(()=>{"use strict";var rR=Br(),nR=cm(),oR=Cr(),iR=li(),sR=Array;rR({target:"Array",proto:!0},{toReversed:function(){return nR(oR(this),sR)}});iR("toReversed")});var dm=F((g4,lm)=>{"use strict";var aR=Cn();lm.exports=function(e,t,r){for(var n=0,o=arguments.length>2?r:aR(t),i=new e(o);o>n;)i[n]=t[n++];return i}});var um=F((l4,fm)=>{"use strict";var AR=ht();fm.exports=function(e,t){var r=AR[e],n=r&&r.prototype;return n&&n[t]}});var Im=F(()=>{"use strict";var cR=Br(),gR=Ut(),lR=hs(),dR=Cr(),fR=dm(),uR=um(),IR=li(),pR=Array,mR=gR(uR("Array","sort"));cR({target:"Array",proto:!0},{toSorted:function(t){t!==void 0&&lR(t);var r=dR(this),n=fR(pR,r);return mR(n,t)}});IR("toSorted")});var mm=F((u4,pm)=>{"use strict";var hR=TypeError,CR=9007199254740991;pm.exports=function(e){if(e>CR)throw hR("Maximum allowed index exceeded");return e}});var hm=F(()=>{"use strict";var BR=Br(),ER=li(),yR=mm(),QR=Cn(),wR=vg(),SR=Cr(),xR=jn(),bR=Array,DR=Math.max,kR=Math.min;BR({target:"Array",proto:!0},{toSpliced:function(t,r){var n=SR(this),o=QR(n),i=wR(t,o),s=arguments.length,a=0,A,c,g,d;for(s===0?A=c=0:s===1?(A=0,c=o-i):(A=s-2,c=kR(DR(xR(r),0),o-i)),g=yR(o+A-c),d=bR(g);a<i;a++)d[a]=n[a];for(;a<i+A;a++)d[a]=arguments[a-i+2];for(;a<g;a++)d[a]=n[a+c-A];return d}});ER("toSpliced")});var Bm=F((m4,Cm)=>{"use strict";var FR=Cn(),_R=jn(),vR=RangeError;Cm.exports=function(e,t,r,n){var o=FR(e),i=_R(r),s=i<0?o+i:i;if(s>=o||s<0)throw new vR("Incorrect index");for(var a=new t(o),A=0;A<o;A++)a[A]=A===s?n:e[A];return a}});var Em=F(()=>{"use strict";var RR=Br(),NR=Bm(),TR=Cr(),MR=Array;RR({target:"Array",proto:!0},{with:function(e,t){return NR(TR(this),MR,e,t)}})});var wm=F((B4,Qm)=>{"use strict";var ym=hs(),UR=TypeError,OR=function(e){var t,r;this.promise=new e(function(n,o){if(t!==void 0||r!==void 0)throw new UR("Bad Promise constructor");t=n,r=o}),this.resolve=ym(t),this.reject=ym(r)};Qm.exports.f=function(e){return new OR(e)}});var Sm=F(()=>{"use strict";var PR=Br(),GR=wm();PR({target:"Promise",stat:!0},{withResolvers:function(){var t=GR.f(this);return{promise:t.promise,resolve:t.resolve,reject:t.reject}}})});var Gg=F((Q4,xm)=>{"use strict";var HR=TypeError;xm.exports=function(e,t){if(e<t)throw new HR("Not enough arguments");return e}});var km=F((w4,Dm)=>{"use strict";var qR=Yn(),LR=qR("toStringTag"),bm={};bm[LR]="z";Dm.exports=String(bm)==="[object z]"});var _m=F((S4,Fm)=>{"use strict";var KR=km(),JR=Dt(),_s=Yc(),VR=Yn(),zR=VR("toStringTag"),YR=Object,WR=_s(function(){return arguments}())==="Arguments",jR=function(e,t){try{return e[t]}catch{}};Fm.exports=KR?_s:function(e){var t,r,n;return e===void 0?"Undefined":e===null?"Null":typeof(r=jR(t=YR(e),zR))=="string"?r:WR?_s(t):(n=_s(t))==="Object"&&JR(t.callee)?"Arguments":n}});var Hg=F((x4,vm)=>{"use strict";var XR=_m(),ZR=String;vm.exports=function(e){if(XR(e)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return ZR(e)}});var qg=F((b4,Nm)=>{"use strict";var $R=Mt(),eN=Yn(),tN=$t(),Rm=ag(),rN=eN("iterator");Nm.exports=!$R(function(){var e=new URL("b?a=1&b=2&c=3","https://a"),t=e.searchParams,r=new URLSearchParams("a=1&a=2&b=3"),n="";return e.pathname="c%20d",t.forEach(function(o,i){t.delete("b"),n+=i+o}),r.delete("a",2),r.delete("b",void 0),Rm&&(!e.toJSON||!r.has("a",1)||r.has("a",2)||!r.has("a",void 0)||r.has("b"))||!t.size&&(Rm||!tN)||!t.sort||e.href!=="https://a/c%20d?a=1&c=3"||t.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!t[rN]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("https://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("https://a#\u0431").hash!=="#%D0%B1"||n!=="a1c3"||new URL("https://x",void 0).host!=="x"})});var Um=F(()=>{"use strict";var nN=Br(),oN=Vn(),Mm=Mt(),iN=Gg(),Tm=Hg(),sN=qg(),Lg=oN("URL"),aN=sN&&Mm(function(){Lg.canParse()}),AN=Mm(function(){return Lg.canParse.length!==1});nN({target:"URL",stat:!0,forced:!aN||AN},{canParse:function(t){var r=iN(arguments.length,1),n=Tm(t),o=r<2||arguments[1]===void 0?void 0:Tm(arguments[1]);try{return!!new Lg(n,o)}catch{return!1}}})});var Pm=F(()=>{"use strict";var cN=Br(),gN=Vn(),lN=Gg(),Om=Hg(),dN=qg(),fN=gN("URL");cN({target:"URL",stat:!0,forced:!dN},{parse:function(t){var r=lN(arguments.length,1),n=Om(t),o=r<2||arguments[1]===void 0?void 0:Om(arguments[1]);try{return new fN(n,o)}catch{return null}}})});var ie=F((Kg,qm)=>{(function(e,t){if(typeof define=="function"&&define.amd)define("webextension-polyfill",["module"],t);else if(typeof Kg<"u")t(qm);else{var r={exports:{}};t(r),e.browser=r.exports}})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:Kg,function(e){"use strict";if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)e.exports=globalThis.browser;else{let t="The message port closed before a response was received.",r=n=>{let o={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(o).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class i extends WeakMap{constructor(D,E=void 0){super(E),this.createItem=D}get(D){return this.has(D)||this.set(D,this.createItem(D)),super.get(D)}}let s=B=>B&&typeof B=="object"&&typeof B.then=="function",a=(B,D)=>(...E)=>{n.runtime.lastError?B.reject(new Error(n.runtime.lastError.message)):D.singleCallbackArg||E.length<=1&&D.singleCallbackArg!==!1?B.resolve(E[0]):B.resolve(E)},A=B=>B==1?"argument":"arguments",c=(B,D)=>function(w,...y){if(y.length<D.minArgs)throw new Error(`Expected at least ${D.minArgs} ${A(D.minArgs)} for ${B}(), got ${y.length}`);if(y.length>D.maxArgs)throw new Error(`Expected at most ${D.maxArgs} ${A(D.maxArgs)} for ${B}(), got ${y.length}`);return new Promise((M,T)=>{if(D.fallbackToNoCallback)try{w[B](...y,a({resolve:M,reject:T},D))}catch{w[B](...y),D.fallbackToNoCallback=!1,D.noCallback=!0,M()}else D.noCallback?(w[B](...y),M()):w[B](...y,a({resolve:M,reject:T},D))})},g=(B,D,E)=>new Proxy(D,{apply(w,y,M){return E.call(y,B,...M)}}),d=Function.call.bind(Object.prototype.hasOwnProperty),l=(B,D={},E={})=>{let w=Object.create(null),y={has(T,U){return U in B||U in w},get(T,U,L){if(U in w)return w[U];if(!(U in B))return;let k=B[U];if(typeof k=="function")if(typeof D[U]=="function")k=g(B,B[U],D[U]);else if(d(E,U)){let q=c(U,E[U]);k=g(B,B[U],q)}else k=k.bind(B);else if(typeof k=="object"&&k!==null&&(d(D,U)||d(E,U)))k=l(k,D[U],E[U]);else if(d(E,"*"))k=l(k,D[U],E["*"]);else return Object.defineProperty(w,U,{configurable:!0,enumerable:!0,get(){return B[U]},set(q){B[U]=q}}),k;return w[U]=k,k},set(T,U,L,k){return U in w?w[U]=L:B[U]=L,!0},defineProperty(T,U,L){return Reflect.defineProperty(w,U,L)},deleteProperty(T,U){return Reflect.deleteProperty(w,U)}},M=Object.create(B);return new Proxy(M,y)},f=B=>({addListener(D,E,...w){D.addListener(B.get(E),...w)},hasListener(D,E){return D.hasListener(B.get(E))},removeListener(D,E){D.removeListener(B.get(E))}}),u=new i(B=>typeof B!="function"?B:function(E){let w=l(E,{},{getContent:{minArgs:0,maxArgs:0}});B(w)}),m=new i(B=>typeof B!="function"?B:function(E,w,y){let M=!1,T,U=new Promise(Y=>{T=function(ne){M=!0,Y(ne)}}),L;try{L=B(E,w,T)}catch(Y){L=Promise.reject(Y)}let k=L!==!0&&s(L);if(L!==!0&&!k&&!M)return!1;let q=Y=>{Y.then(ne=>{y(ne)},ne=>{let Ae;ne&&(ne instanceof Error||typeof ne.message=="string")?Ae=ne.message:Ae="An unexpected error occurred",y({__mozWebExtensionPolyfillReject__:!0,message:Ae})}).catch(ne=>{})};return q(k?L:U),!0}),p=({reject:B,resolve:D},E)=>{n.runtime.lastError?n.runtime.lastError.message===t?D():B(new Error(n.runtime.lastError.message)):E&&E.__mozWebExtensionPolyfillReject__?B(new Error(E.message)):D(E)},C=(B,D,E,...w)=>{if(w.length<D.minArgs)throw new Error(`Expected at least ${D.minArgs} ${A(D.minArgs)} for ${B}(), got ${w.length}`);if(w.length>D.maxArgs)throw new Error(`Expected at most ${D.maxArgs} ${A(D.maxArgs)} for ${B}(), got ${w.length}`);return new Promise((y,M)=>{let T=p.bind(null,{resolve:y,reject:M});w.push(T),E.sendMessage(...w)})},Q={devtools:{network:{onRequestFinished:f(u)}},runtime:{onMessage:f(m),onMessageExternal:f(m),sendMessage:C.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:C.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},R={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return o.privacy={network:{"*":R},services:{"*":R},websites:{"*":R}},l(n,Q,o)};e.exports=r(chrome)}})});var Lm=F((H4,vs)=>{(function(){"use strict";var e={}.hasOwnProperty;function t(){for(var o="",i=0;i<arguments.length;i++){var s=arguments[i];s&&(o=n(o,r(s)))}return o}function r(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return t.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var i="";for(var s in o)e.call(o,s)&&o[s]&&(i=n(i,s));return i}function n(o,i){return i?o?o+" "+i:o+i:o}typeof vs<"u"&&vs.exports?(t.default=t,vs.exports=t):typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("classnames",[],function(){return t}):window.classNames=t})()});var Xa=F(Rr=>{"use strict";var lQ=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",NH=lQ+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",dQ="["+lQ+"]["+NH+"]*",TH=new RegExp("^"+dQ+"$"),MH=function(e,t){let r=[],n=t.exec(e);for(;n;){let o=[];o.startIndex=t.lastIndex-n[0].length;let i=n.length;for(let s=0;s<i;s++)o.push(n[s]);r.push(o),n=t.exec(e)}return r},UH=function(e){let t=TH.exec(e);return!(t===null||typeof t>"u")};Rr.isExist=function(e){return typeof e<"u"};Rr.isEmptyObject=function(e){return Object.keys(e).length===0};Rr.merge=function(e,t,r){if(t){let n=Object.keys(t),o=n.length;for(let i=0;i<o;i++)r==="strict"?e[n[i]]=[t[n[i]]]:e[n[i]]=t[n[i]]}};Rr.getValue=function(e){return Rr.isExist(e)?e:""};Rr.isName=UH;Rr.getAllMatches=MH;Rr.nameRegexp=dQ});var md=F(mQ=>{"use strict";var pd=Xa(),OH={allowBooleanAttributes:!1,unpairedTags:[]};mQ.validate=function(e,t){t=Object.assign({},OH,t);let r=[],n=!1,o=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let i=0;i<e.length;i++)if(e[i]==="<"&&e[i+1]==="?"){if(i+=2,i=uQ(e,i),i.err)return i}else if(e[i]==="<"){let s=i;if(i++,e[i]==="!"){i=IQ(e,i);continue}else{let a=!1;e[i]==="/"&&(a=!0,i++);let A="";for(;i<e.length&&e[i]!==">"&&e[i]!==" "&&e[i]!=="	"&&e[i]!==`
`&&e[i]!=="\r";i++)A+=e[i];if(A=A.trim(),A[A.length-1]==="/"&&(A=A.substring(0,A.length-1),i--),!VH(A)){let d;return A.trim().length===0?d="Invalid space after '<'.":d="Tag '"+A+"' is an invalid name.",ke("InvalidTag",d,At(e,i))}let c=HH(e,i);if(c===!1)return ke("InvalidAttr","Attributes for '"+A+"' have open quote.",At(e,i));let g=c.value;if(i=c.index,g[g.length-1]==="/"){let d=i-g.length;g=g.substring(0,g.length-1);let l=pQ(g,t);if(l===!0)n=!0;else return ke(l.err.code,l.err.msg,At(e,d+l.err.line))}else if(a)if(c.tagClosed){if(g.trim().length>0)return ke("InvalidTag","Closing tag '"+A+"' can't have attributes or invalid starting.",At(e,s));if(r.length===0)return ke("InvalidTag","Closing tag '"+A+"' has not been opened.",At(e,s));{let d=r.pop();if(A!==d.tagName){let l=At(e,d.tagStartPos);return ke("InvalidTag","Expected closing tag '"+d.tagName+"' (opened in line "+l.line+", col "+l.col+") instead of closing tag '"+A+"'.",At(e,s))}r.length==0&&(o=!0)}}else return ke("InvalidTag","Closing tag '"+A+"' doesn't have proper closing.",At(e,i));else{let d=pQ(g,t);if(d!==!0)return ke(d.err.code,d.err.msg,At(e,i-g.length+d.err.line));if(o===!0)return ke("InvalidXml","Multiple possible root nodes found.",At(e,i));t.unpairedTags.indexOf(A)!==-1||r.push({tagName:A,tagStartPos:s}),n=!0}for(i++;i<e.length;i++)if(e[i]==="<")if(e[i+1]==="!"){i++,i=IQ(e,i);continue}else if(e[i+1]==="?"){if(i=uQ(e,++i),i.err)return i}else break;else if(e[i]==="&"){let d=KH(e,i);if(d==-1)return ke("InvalidChar","char '&' is not expected.",At(e,i));i=d}else if(o===!0&&!fQ(e[i]))return ke("InvalidXml","Extra text at the end",At(e,i));e[i]==="<"&&i--}}else{if(fQ(e[i]))continue;return ke("InvalidChar","char '"+e[i]+"' is not expected.",At(e,i))}if(n){if(r.length==1)return ke("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",At(e,r[0].tagStartPos));if(r.length>0)return ke("InvalidXml","Invalid '"+JSON.stringify(r.map(i=>i.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return ke("InvalidXml","Start tag expected.",1);return!0};function fQ(e){return e===" "||e==="	"||e===`
`||e==="\r"}function uQ(e,t){let r=t;for(;t<e.length;t++)if(e[t]=="?"||e[t]==" "){let n=e.substr(r,t-r);if(t>5&&n==="xml")return ke("InvalidXml","XML declaration allowed only at the start of the document.",At(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}function IQ(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let r=1;for(t+=8;t<e.length;t++)if(e[t]==="<")r++;else if(e[t]===">"&&(r--,r===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}var PH='"',GH="'";function HH(e,t){let r="",n="",o=!1;for(;t<e.length;t++){if(e[t]===PH||e[t]===GH)n===""?n=e[t]:n!==e[t]||(n="");else if(e[t]===">"&&n===""){o=!0;break}r+=e[t]}return n!==""?!1:{value:r,index:t,tagClosed:o}}var qH=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function pQ(e,t){let r=pd.getAllMatches(e,qH),n={};for(let o=0;o<r.length;o++){if(r[o][1].length===0)return ke("InvalidAttr","Attribute '"+r[o][2]+"' has no space in starting.",Pi(r[o]));if(r[o][3]!==void 0&&r[o][4]===void 0)return ke("InvalidAttr","Attribute '"+r[o][2]+"' is without value.",Pi(r[o]));if(r[o][3]===void 0&&!t.allowBooleanAttributes)return ke("InvalidAttr","boolean attribute '"+r[o][2]+"' is not allowed.",Pi(r[o]));let i=r[o][2];if(!JH(i))return ke("InvalidAttr","Attribute '"+i+"' is an invalid name.",Pi(r[o]));if(!n.hasOwnProperty(i))n[i]=1;else return ke("InvalidAttr","Attribute '"+i+"' is repeated.",Pi(r[o]))}return!0}function LH(e,t){let r=/\d/;for(e[t]==="x"&&(t++,r=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(r))break}return-1}function KH(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,LH(e,t);let r=0;for(;t<e.length;t++,r++)if(!(e[t].match(/\w/)&&r<20)){if(e[t]===";")break;return-1}return t}function ke(e,t,r){return{err:{code:e,msg:t,line:r.line||r,col:r.col}}}function JH(e){return pd.isName(e)}function VH(e){return pd.isName(e)}function At(e,t){let r=e.substring(0,t).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function Pi(e){return e.startIndex+e[1].length}});var CQ=F(hd=>{var hQ={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,r){return e}},zH=function(e){return Object.assign({},hQ,e)};hd.buildOptions=zH;hd.defaultOptions=hQ});var EQ=F((yce,BQ)=>{"use strict";var Cd=class{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,r){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:r})}addChild(t){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child})}};BQ.exports=Cd});var QQ=F((Qce,yQ)=>{var YH=Xa();function WH(e,t){let r={};if(e[t+3]==="O"&&e[t+4]==="C"&&e[t+5]==="T"&&e[t+6]==="Y"&&e[t+7]==="P"&&e[t+8]==="E"){t=t+9;let n=1,o=!1,i=!1,s="";for(;t<e.length;t++)if(e[t]==="<"&&!i){if(o&&ZH(e,t))t+=7,[entityName,val,t]=jH(e,t+1),val.indexOf("&")===-1&&(r[rq(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(o&&$H(e,t))t+=8;else if(o&&eq(e,t))t+=8;else if(o&&tq(e,t))t+=9;else if(XH)i=!0;else throw new Error("Invalid DOCTYPE");n++,s=""}else if(e[t]===">"){if(i?e[t-1]==="-"&&e[t-2]==="-"&&(i=!1,n--):n--,n===0)break}else e[t]==="["?o=!0:s+=e[t];if(n!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:t}}function jH(e,t){let r="";for(;t<e.length&&e[t]!=="'"&&e[t]!=='"';t++)r+=e[t];if(r=r.trim(),r.indexOf(" ")!==-1)throw new Error("External entites are not supported");let n=e[t++],o="";for(;t<e.length&&e[t]!==n;t++)o+=e[t];return[r,o,t]}function XH(e,t){return e[t+1]==="!"&&e[t+2]==="-"&&e[t+3]==="-"}function ZH(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="N"&&e[t+4]==="T"&&e[t+5]==="I"&&e[t+6]==="T"&&e[t+7]==="Y"}function $H(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="L"&&e[t+4]==="E"&&e[t+5]==="M"&&e[t+6]==="E"&&e[t+7]==="N"&&e[t+8]==="T"}function eq(e,t){return e[t+1]==="!"&&e[t+2]==="A"&&e[t+3]==="T"&&e[t+4]==="T"&&e[t+5]==="L"&&e[t+6]==="I"&&e[t+7]==="S"&&e[t+8]==="T"}function tq(e,t){return e[t+1]==="!"&&e[t+2]==="N"&&e[t+3]==="O"&&e[t+4]==="T"&&e[t+5]==="A"&&e[t+6]==="T"&&e[t+7]==="I"&&e[t+8]==="O"&&e[t+9]==="N"}function rq(e){if(YH.isName(e))return e;throw new Error(`Invalid entity name ${e}`)}yQ.exports=WH});var SQ=F((wce,wQ)=>{var nq=/^[-+]?0x[a-fA-F0-9]+$/,oq=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var iq={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function sq(e,t={}){if(t=Object.assign({},iq,t),!e||typeof e!="string")return e;let r=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(r))return e;if(t.hex&&nq.test(r))return Number.parseInt(r,16);{let n=oq.exec(r);if(n){let o=n[1],i=n[2],s=aq(n[3]),a=n[4]||n[6];if(!t.leadingZeros&&i.length>0&&o&&r[2]!==".")return e;if(!t.leadingZeros&&i.length>0&&!o&&r[1]!==".")return e;{let A=Number(r),c=""+A;return c.search(/[eE]/)!==-1||a?t.eNotation?A:e:r.indexOf(".")!==-1?c==="0"&&s===""||c===s||o&&c==="-"+s?A:e:i?s===c||o+s===c?A:e:r===c||r===o+c?A:e}}else return e}}function aq(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substr(0,e.length-1))),e}wQ.exports=sq});var DQ=F((Sce,bQ)=>{"use strict";var xQ=Xa(),Gi=EQ(),Aq=QQ(),cq=SQ(),Bd=class{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(r,n)=>String.fromCharCode(Number.parseInt(n,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(r,n)=>String.fromCharCode(Number.parseInt(n,16))}},this.addExternalEntities=gq,this.parseXml=Iq,this.parseTextData=lq,this.resolveNameSpace=dq,this.buildAttributesMap=uq,this.isItStopNode=Cq,this.replaceEntitiesValue=mq,this.readStopNodeData=Eq,this.saveTextToParentTag=hq,this.addChild=pq}};function gq(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];this.lastEntities[n]={regex:new RegExp("&"+n+";","g"),val:e[n]}}}function lq(e,t,r,n,o,i,s){if(e!==void 0&&(this.options.trimValues&&!n&&(e=e.trim()),e.length>0)){s||(e=this.replaceEntitiesValue(e));let a=this.options.tagValueProcessor(t,e,r,o,i);return a==null?e:typeof a!=typeof e||a!==e?a:this.options.trimValues?yd(e,this.options.parseTagValue,this.options.numberParseOptions):e.trim()===e?yd(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function dq(e){if(this.options.removeNSPrefix){let t=e.split(":"),r=e.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(e=r+t[1])}return e}var fq=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function uq(e,t,r){if(!this.options.ignoreAttributes&&typeof e=="string"){let n=xQ.getAllMatches(e,fq),o=n.length,i={};for(let s=0;s<o;s++){let a=this.resolveNameSpace(n[s][1]),A=n[s][4],c=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(c=this.options.transformAttributeName(c)),c==="__proto__"&&(c="#__proto__"),A!==void 0){this.options.trimValues&&(A=A.trim()),A=this.replaceEntitiesValue(A);let g=this.options.attributeValueProcessor(a,A,t);g==null?i[c]=A:typeof g!=typeof A||g!==A?i[c]=g:i[c]=yd(A,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(i[c]=!0)}if(!Object.keys(i).length)return;if(this.options.attributesGroupName){let s={};return s[this.options.attributesGroupName]=i,s}return i}}var Iq=function(e){e=e.replace(/\r\n?/g,`
`);let t=new Gi("!xml"),r=t,n="",o="";for(let i=0;i<e.length;i++)if(e[i]==="<")if(e[i+1]==="/"){let a=Tn(e,">",i,"Closing Tag is not closed."),A=e.substring(i+2,a).trim();if(this.options.removeNSPrefix){let d=A.indexOf(":");d!==-1&&(A=A.substr(d+1))}this.options.transformTagName&&(A=this.options.transformTagName(A)),r&&(n=this.saveTextToParentTag(n,r,o));let c=o.substring(o.lastIndexOf(".")+1);if(A&&this.options.unpairedTags.indexOf(A)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${A}>`);let g=0;c&&this.options.unpairedTags.indexOf(c)!==-1?(g=o.lastIndexOf(".",o.lastIndexOf(".")-1),this.tagsNodeStack.pop()):g=o.lastIndexOf("."),o=o.substring(0,g),r=this.tagsNodeStack.pop(),n="",i=a}else if(e[i+1]==="?"){let a=Ed(e,i,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(n=this.saveTextToParentTag(n,r,o),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){let A=new Gi(a.tagName);A.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(A[":@"]=this.buildAttributesMap(a.tagExp,o,a.tagName)),this.addChild(r,A,o)}i=a.closeIndex+1}else if(e.substr(i+1,3)==="!--"){let a=Tn(e,"-->",i+4,"Comment is not closed.");if(this.options.commentPropName){let A=e.substring(i+4,a-2);n=this.saveTextToParentTag(n,r,o),r.add(this.options.commentPropName,[{[this.options.textNodeName]:A}])}i=a}else if(e.substr(i+1,2)==="!D"){let a=Aq(e,i);this.docTypeEntities=a.entities,i=a.i}else if(e.substr(i+1,2)==="!["){let a=Tn(e,"]]>",i,"CDATA is not closed.")-2,A=e.substring(i+9,a);n=this.saveTextToParentTag(n,r,o);let c=this.parseTextData(A,r.tagname,o,!0,!1,!0,!0);c==null&&(c=""),this.options.cdataPropName?r.add(this.options.cdataPropName,[{[this.options.textNodeName]:A}]):r.add(this.options.textNodeName,c),i=a+2}else{let a=Ed(e,i,this.options.removeNSPrefix),A=a.tagName,c=a.rawTagName,g=a.tagExp,d=a.attrExpPresent,l=a.closeIndex;this.options.transformTagName&&(A=this.options.transformTagName(A)),r&&n&&r.tagname!=="!xml"&&(n=this.saveTextToParentTag(n,r,o,!1));let f=r;if(f&&this.options.unpairedTags.indexOf(f.tagname)!==-1&&(r=this.tagsNodeStack.pop(),o=o.substring(0,o.lastIndexOf("."))),A!==t.tagname&&(o+=o?"."+A:A),this.isItStopNode(this.options.stopNodes,o,A)){let u="";if(g.length>0&&g.lastIndexOf("/")===g.length-1)A[A.length-1]==="/"?(A=A.substr(0,A.length-1),o=o.substr(0,o.length-1),g=A):g=g.substr(0,g.length-1),i=a.closeIndex;else if(this.options.unpairedTags.indexOf(A)!==-1)i=a.closeIndex;else{let p=this.readStopNodeData(e,c,l+1);if(!p)throw new Error(`Unexpected end of ${c}`);i=p.i,u=p.tagContent}let m=new Gi(A);A!==g&&d&&(m[":@"]=this.buildAttributesMap(g,o,A)),u&&(u=this.parseTextData(u,A,o,!0,d,!0,!0)),o=o.substr(0,o.lastIndexOf(".")),m.add(this.options.textNodeName,u),this.addChild(r,m,o)}else{if(g.length>0&&g.lastIndexOf("/")===g.length-1){A[A.length-1]==="/"?(A=A.substr(0,A.length-1),o=o.substr(0,o.length-1),g=A):g=g.substr(0,g.length-1),this.options.transformTagName&&(A=this.options.transformTagName(A));let u=new Gi(A);A!==g&&d&&(u[":@"]=this.buildAttributesMap(g,o,A)),this.addChild(r,u,o),o=o.substr(0,o.lastIndexOf("."))}else{let u=new Gi(A);this.tagsNodeStack.push(r),A!==g&&d&&(u[":@"]=this.buildAttributesMap(g,o,A)),this.addChild(r,u,o),r=u}n="",i=l}}else n+=e[i];return t.child};function pq(e,t,r){let n=this.options.updateTag(t.tagname,r,t[":@"]);n===!1||(typeof n=="string"&&(t.tagname=n),e.addChild(t))}var mq=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){let r=this.docTypeEntities[t];e=e.replace(r.regx,r.val)}for(let t in this.lastEntities){let r=this.lastEntities[t];e=e.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){let r=this.htmlEntities[t];e=e.replace(r.regex,r.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function hq(e,t,r,n){return e&&(n===void 0&&(n=Object.keys(t.child).length===0),e=this.parseTextData(e,t.tagname,r,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,n),e!==void 0&&e!==""&&t.add(this.options.textNodeName,e),e=""),e}function Cq(e,t,r){let n="*."+r;for(let o in e){let i=e[o];if(n===i||t===i)return!0}return!1}function Bq(e,t,r=">"){let n,o="";for(let i=t;i<e.length;i++){let s=e[i];if(n)s===n&&(n="");else if(s==='"'||s==="'")n=s;else if(s===r[0])if(r[1]){if(e[i+1]===r[1])return{data:o,index:i}}else return{data:o,index:i};else s==="	"&&(s=" ");o+=s}}function Tn(e,t,r,n){let o=e.indexOf(t,r);if(o===-1)throw new Error(n);return o+t.length-1}function Ed(e,t,r,n=">"){let o=Bq(e,t+1,n);if(!o)return;let i=o.data,s=o.index,a=i.search(/\s/),A=i,c=!0;a!==-1&&(A=i.substring(0,a),i=i.substring(a+1).trimStart());let g=A;if(r){let d=A.indexOf(":");d!==-1&&(A=A.substr(d+1),c=A!==o.data.substr(d+1))}return{tagName:A,tagExp:i,closeIndex:s,attrExpPresent:c,rawTagName:g}}function Eq(e,t,r){let n=r,o=1;for(;r<e.length;r++)if(e[r]==="<")if(e[r+1]==="/"){let i=Tn(e,">",r,`${t} is not closed`);if(e.substring(r+2,i).trim()===t&&(o--,o===0))return{tagContent:e.substring(n,r),i};r=i}else if(e[r+1]==="?")r=Tn(e,"?>",r+1,"StopNode is not closed.");else if(e.substr(r+1,3)==="!--")r=Tn(e,"-->",r+3,"StopNode is not closed.");else if(e.substr(r+1,2)==="![")r=Tn(e,"]]>",r,"StopNode is not closed.")-2;else{let i=Ed(e,r,">");i&&((i&&i.tagName)===t&&i.tagExp[i.tagExp.length-1]!=="/"&&o++,r=i.closeIndex)}}function yd(e,t,r){if(t&&typeof e=="string"){let n=e.trim();return n==="true"?!0:n==="false"?!1:cq(e,r)}else return xQ.isExist(e)?e:""}bQ.exports=Bd});var _Q=F(FQ=>{"use strict";function yq(e,t){return kQ(e,t)}function kQ(e,t,r){let n,o={};for(let i=0;i<e.length;i++){let s=e[i],a=Qq(s),A="";if(r===void 0?A=a:A=r+"."+a,a===t.textNodeName)n===void 0?n=s[a]:n+=""+s[a];else{if(a===void 0)continue;if(s[a]){let c=kQ(s[a],t,A),g=Sq(c,t);s[":@"]?wq(c,s[":@"],A,t):Object.keys(c).length===1&&c[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?c=c[t.textNodeName]:Object.keys(c).length===0&&(t.alwaysCreateTextNode?c[t.textNodeName]="":c=""),o[a]!==void 0&&o.hasOwnProperty(a)?(Array.isArray(o[a])||(o[a]=[o[a]]),o[a].push(c)):t.isArray(a,A,g)?o[a]=[c]:o[a]=c}}}return typeof n=="string"?n.length>0&&(o[t.textNodeName]=n):n!==void 0&&(o[t.textNodeName]=n),o}function Qq(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];if(n!==":@")return n}}function wq(e,t,r,n){if(t){let o=Object.keys(t),i=o.length;for(let s=0;s<i;s++){let a=o[s];n.isArray(a,r+"."+a,!0,!0)?e[a]=[t[a]]:e[a]=t[a]}}}function Sq(e,t){let{textNodeName:r}=t,n=Object.keys(e).length;return!!(n===0||n===1&&(e[r]||typeof e[r]=="boolean"||e[r]===0))}FQ.prettify=yq});var RQ=F((bce,vQ)=>{var{buildOptions:xq}=CQ(),bq=DQ(),{prettify:Dq}=_Q(),kq=md(),Qd=class{constructor(t){this.externalEntities={},this.options=xq(t)}parse(t,r){if(typeof t!="string")if(t.toString)t=t.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});let i=kq.validate(t,r);if(i!==!0)throw Error(`${i.err.msg}:${i.err.line}:${i.err.col}`)}let n=new bq(this.options);n.addExternalEntities(this.externalEntities);let o=n.parseXml(t);return this.options.preserveOrder||o===void 0?o:Dq(o,this.options)}addEntity(t,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(r==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=r}};vQ.exports=Qd});var OQ=F((Dce,UQ)=>{var Fq=`
`;function _q(e,t){let r="";return t.format&&t.indentBy.length>0&&(r=Fq),TQ(e,t,"",r)}function TQ(e,t,r,n){let o="",i=!1;for(let s=0;s<e.length;s++){let a=e[s],A=vq(a);if(A===void 0)continue;let c="";if(r.length===0?c=A:c=`${r}.${A}`,A===t.textNodeName){let u=a[A];Rq(c,t)||(u=t.tagValueProcessor(A,u),u=MQ(u,t)),i&&(o+=n),o+=u,i=!1;continue}else if(A===t.cdataPropName){i&&(o+=n),o+=`<![CDATA[${a[A][0][t.textNodeName]}]]>`,i=!1;continue}else if(A===t.commentPropName){o+=n+`<!--${a[A][0][t.textNodeName]}-->`,i=!0;continue}else if(A[0]==="?"){let u=NQ(a[":@"],t),m=A==="?xml"?"":n,p=a[A][0][t.textNodeName];p=p.length!==0?" "+p:"",o+=m+`<${A}${p}${u}?>`,i=!0;continue}let g=n;g!==""&&(g+=t.indentBy);let d=NQ(a[":@"],t),l=n+`<${A}${d}`,f=TQ(a[A],t,c,g);t.unpairedTags.indexOf(A)!==-1?t.suppressUnpairedNode?o+=l+">":o+=l+"/>":(!f||f.length===0)&&t.suppressEmptyNode?o+=l+"/>":f&&f.endsWith(">")?o+=l+`>${f}${n}</${A}>`:(o+=l+">",f&&n!==""&&(f.includes("/>")||f.includes("</"))?o+=n+t.indentBy+f+n:o+=f,o+=`</${A}>`),i=!0}return o}function vq(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];if(e.hasOwnProperty(n)&&n!==":@")return n}}function NQ(e,t){let r="";if(e&&!t.ignoreAttributes)for(let n in e){if(!e.hasOwnProperty(n))continue;let o=t.attributeValueProcessor(n,e[n]);o=MQ(o,t),o===!0&&t.suppressBooleanAttributes?r+=` ${n.substr(t.attributeNamePrefix.length)}`:r+=` ${n.substr(t.attributeNamePrefix.length)}="${o}"`}return r}function Rq(e,t){e=e.substr(0,e.length-t.textNodeName.length-1);let r=e.substr(e.lastIndexOf(".")+1);for(let n in t.stopNodes)if(t.stopNodes[n]===e||t.stopNodes[n]==="*."+r)return!0;return!1}function MQ(e,t){if(e&&e.length>0&&t.processEntities)for(let r=0;r<t.entities.length;r++){let n=t.entities[r];e=e.replace(n.regex,n.val)}return e}UQ.exports=_q});var GQ=F((kce,PQ)=>{"use strict";var Nq=OQ(),Tq={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function cn(e){this.options=Object.assign({},Tq,e),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=Oq),this.processTextOrObjNode=Mq,this.options.format?(this.indentate=Uq,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}cn.prototype.build=function(e){return this.options.preserveOrder?Nq(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0).val)};cn.prototype.j2x=function(e,t){let r="",n="";for(let o in e)if(Object.prototype.hasOwnProperty.call(e,o))if(typeof e[o]>"u")this.isAttribute(o)&&(n+="");else if(e[o]===null)this.isAttribute(o)?n+="":o[0]==="?"?n+=this.indentate(t)+"<"+o+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+o+"/"+this.tagEndChar;else if(e[o]instanceof Date)n+=this.buildTextValNode(e[o],o,"",t);else if(typeof e[o]!="object"){let i=this.isAttribute(o);if(i)r+=this.buildAttrPairStr(i,""+e[o]);else if(o===this.options.textNodeName){let s=this.options.tagValueProcessor(o,""+e[o]);n+=this.replaceEntitiesValue(s)}else n+=this.buildTextValNode(e[o],o,"",t)}else if(Array.isArray(e[o])){let i=e[o].length,s="",a="";for(let A=0;A<i;A++){let c=e[o][A];if(!(typeof c>"u"))if(c===null)o[0]==="?"?n+=this.indentate(t)+"<"+o+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+o+"/"+this.tagEndChar;else if(typeof c=="object")if(this.options.oneListGroup){let g=this.j2x(c,t+1);s+=g.val,this.options.attributesGroupName&&c.hasOwnProperty(this.options.attributesGroupName)&&(a+=g.attrStr)}else s+=this.processTextOrObjNode(c,o,t);else if(this.options.oneListGroup){let g=this.options.tagValueProcessor(o,c);g=this.replaceEntitiesValue(g),s+=g}else s+=this.buildTextValNode(c,o,"",t)}this.options.oneListGroup&&(s=this.buildObjectNode(s,o,a,t)),n+=s}else if(this.options.attributesGroupName&&o===this.options.attributesGroupName){let i=Object.keys(e[o]),s=i.length;for(let a=0;a<s;a++)r+=this.buildAttrPairStr(i[a],""+e[o][i[a]])}else n+=this.processTextOrObjNode(e[o],o,t);return{attrStr:r,val:n}};cn.prototype.buildAttrPairStr=function(e,t){return t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&t==="true"?" "+e:" "+e+'="'+t+'"'};function Mq(e,t,r){let n=this.j2x(e,r+1);return e[this.options.textNodeName]!==void 0&&Object.keys(e).length===1?this.buildTextValNode(e[this.options.textNodeName],t,n.attrStr,r):this.buildObjectNode(n.val,t,n.attrStr,r)}cn.prototype.buildObjectNode=function(e,t,r,n){if(e==="")return t[0]==="?"?this.indentate(n)+"<"+t+r+"?"+this.tagEndChar:this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar;{let o="</"+t+this.tagEndChar,i="";return t[0]==="?"&&(i="?",o=""),(r||r==="")&&e.indexOf("<")===-1?this.indentate(n)+"<"+t+r+i+">"+e+o:this.options.commentPropName!==!1&&t===this.options.commentPropName&&i.length===0?this.indentate(n)+`<!--${e}-->`+this.newLine:this.indentate(n)+"<"+t+r+i+this.tagEndChar+e+this.indentate(n)+o}};cn.prototype.closeTag=function(e){let t="";return this.options.unpairedTags.indexOf(e)!==-1?this.options.suppressUnpairedNode||(t="/"):this.options.suppressEmptyNode?t="/":t=`></${e}`,t};cn.prototype.buildTextValNode=function(e,t,r,n){if(this.options.cdataPropName!==!1&&t===this.options.cdataPropName)return this.indentate(n)+`<![CDATA[${e}]]>`+this.newLine;if(this.options.commentPropName!==!1&&t===this.options.commentPropName)return this.indentate(n)+`<!--${e}-->`+this.newLine;if(t[0]==="?")return this.indentate(n)+"<"+t+r+"?"+this.tagEndChar;{let o=this.options.tagValueProcessor(t,e);return o=this.replaceEntitiesValue(o),o===""?this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar:this.indentate(n)+"<"+t+r+">"+o+"</"+t+this.tagEndChar}};cn.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){let r=this.options.entities[t];e=e.replace(r.regex,r.val)}return e};function Uq(e){return this.options.indentBy.repeat(e)}function Oq(e){return e.startsWith(this.options.attributeNamePrefix)&&e!==this.options.textNodeName?e.substr(this.attrPrefixLen):!1}PQ.exports=cn});var qQ=F((Fce,HQ)=>{"use strict";var Pq=md(),Gq=RQ(),Hq=GQ();HQ.exports={XMLParser:Gq,XMLValidator:Pq,XMLBuilder:Hq}});var Gf=F((rs,Pf)=>{(function(e,t){typeof rs=="object"&&typeof Pf=="object"?Pf.exports=t():typeof define=="function"&&define.amd?define([],t):typeof rs=="object"?rs.bowser=t():e.bowser=t()})(rs,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(n,o,i){r.o(n,o)||Object.defineProperty(n,o,{enumerable:!0,get:i})},r.r=function(n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r.t=function(n,o){if(1&o&&(n=r(n)),8&o||4&o&&typeof n=="object"&&n&&n.__esModule)return n;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:n}),2&o&&typeof n!="string")for(var s in n)r.d(i,s,function(a){return n[a]}.bind(null,s));return i},r.n=function(n){var o=n&&n.__esModule?function(){return n.default}:function(){return n};return r.d(o,"a",o),o},r.o=function(n,o){return Object.prototype.hasOwnProperty.call(n,o)},r.p="",r(r.s=90)}({17:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n=r(18),o=function(){function i(){}return i.getFirstMatch=function(s,a){var A=a.match(s);return A&&A.length>0&&A[1]||""},i.getSecondMatch=function(s,a){var A=a.match(s);return A&&A.length>1&&A[2]||""},i.matchAndReturnConst=function(s,a,A){if(s.test(a))return A},i.getWindowsVersionName=function(s){switch(s){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},i.getMacOSVersionName=function(s){var a=s.split(".").splice(0,2).map(function(A){return parseInt(A,10)||0});if(a.push(0),a[0]===10)switch(a[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},i.getAndroidVersionName=function(s){var a=s.split(".").splice(0,2).map(function(A){return parseInt(A,10)||0});if(a.push(0),!(a[0]===1&&a[1]<5))return a[0]===1&&a[1]<6?"Cupcake":a[0]===1&&a[1]>=6?"Donut":a[0]===2&&a[1]<2?"Eclair":a[0]===2&&a[1]===2?"Froyo":a[0]===2&&a[1]>2?"Gingerbread":a[0]===3?"Honeycomb":a[0]===4&&a[1]<1?"Ice Cream Sandwich":a[0]===4&&a[1]<4?"Jelly Bean":a[0]===4&&a[1]>=4?"KitKat":a[0]===5?"Lollipop":a[0]===6?"Marshmallow":a[0]===7?"Nougat":a[0]===8?"Oreo":a[0]===9?"Pie":void 0},i.getVersionPrecision=function(s){return s.split(".").length},i.compareVersions=function(s,a,A){A===void 0&&(A=!1);var c=i.getVersionPrecision(s),g=i.getVersionPrecision(a),d=Math.max(c,g),l=0,f=i.map([s,a],function(u){var m=d-i.getVersionPrecision(u),p=u+new Array(m+1).join(".0");return i.map(p.split("."),function(C){return new Array(20-C.length).join("0")+C}).reverse()});for(A&&(l=d-Math.min(c,g)),d-=1;d>=l;){if(f[0][d]>f[1][d])return 1;if(f[0][d]===f[1][d]){if(d===l)return 0;d-=1}else if(f[0][d]<f[1][d])return-1}},i.map=function(s,a){var A,c=[];if(Array.prototype.map)return Array.prototype.map.call(s,a);for(A=0;A<s.length;A+=1)c.push(a(s[A]));return c},i.find=function(s,a){var A,c;if(Array.prototype.find)return Array.prototype.find.call(s,a);for(A=0,c=s.length;A<c;A+=1){var g=s[A];if(a(g,A))return g}},i.assign=function(s){for(var a,A,c=s,g=arguments.length,d=new Array(g>1?g-1:0),l=1;l<g;l++)d[l-1]=arguments[l];if(Object.assign)return Object.assign.apply(Object,[s].concat(d));var f=function(){var u=d[a];typeof u=="object"&&u!==null&&Object.keys(u).forEach(function(m){c[m]=u[m]})};for(a=0,A=d.length;a<A;a+=1)f();return s},i.getBrowserAlias=function(s){return n.BROWSER_ALIASES_MAP[s]},i.getBrowserTypeByAlias=function(s){return n.BROWSER_MAP[s]||""},i}();t.default=o,e.exports=t.default},18:function(e,t,r){"use strict";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,o=(n=r(91))&&n.__esModule?n:{default:n},i=r(18);function s(A,c){for(var g=0;g<c.length;g++){var d=c[g];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(A,d.key,d)}}var a=function(){function A(){}var c,g,d;return A.getParser=function(l,f){if(f===void 0&&(f=!1),typeof l!="string")throw new Error("UserAgent should be a string");return new o.default(l,f)},A.parse=function(l){return new o.default(l).getResult()},c=A,d=[{key:"BROWSER_MAP",get:function(){return i.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return i.ENGINE_MAP}},{key:"OS_MAP",get:function(){return i.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return i.PLATFORMS_MAP}}],(g=null)&&s(c.prototype,g),d&&s(c,d),A}();t.default=a,e.exports=t.default},91:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n=A(r(92)),o=A(r(93)),i=A(r(94)),s=A(r(95)),a=A(r(17));function A(g){return g&&g.__esModule?g:{default:g}}var c=function(){function g(l,f){if(f===void 0&&(f=!1),l==null||l==="")throw new Error("UserAgent parameter can't be empty");this._ua=l,this.parsedResult={},f!==!0&&this.parse()}var d=g.prototype;return d.getUA=function(){return this._ua},d.test=function(l){return l.test(this._ua)},d.parseBrowser=function(){var l=this;this.parsedResult.browser={};var f=a.default.find(n.default,function(u){if(typeof u.test=="function")return u.test(l);if(u.test instanceof Array)return u.test.some(function(m){return l.test(m)});throw new Error("Browser's test function is not valid")});return f&&(this.parsedResult.browser=f.describe(this.getUA())),this.parsedResult.browser},d.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},d.getBrowserName=function(l){return l?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},d.getBrowserVersion=function(){return this.getBrowser().version},d.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},d.parseOS=function(){var l=this;this.parsedResult.os={};var f=a.default.find(o.default,function(u){if(typeof u.test=="function")return u.test(l);if(u.test instanceof Array)return u.test.some(function(m){return l.test(m)});throw new Error("Browser's test function is not valid")});return f&&(this.parsedResult.os=f.describe(this.getUA())),this.parsedResult.os},d.getOSName=function(l){var f=this.getOS().name;return l?String(f).toLowerCase()||"":f||""},d.getOSVersion=function(){return this.getOS().version},d.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},d.getPlatformType=function(l){l===void 0&&(l=!1);var f=this.getPlatform().type;return l?String(f).toLowerCase()||"":f||""},d.parsePlatform=function(){var l=this;this.parsedResult.platform={};var f=a.default.find(i.default,function(u){if(typeof u.test=="function")return u.test(l);if(u.test instanceof Array)return u.test.some(function(m){return l.test(m)});throw new Error("Browser's test function is not valid")});return f&&(this.parsedResult.platform=f.describe(this.getUA())),this.parsedResult.platform},d.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},d.getEngineName=function(l){return l?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},d.parseEngine=function(){var l=this;this.parsedResult.engine={};var f=a.default.find(s.default,function(u){if(typeof u.test=="function")return u.test(l);if(u.test instanceof Array)return u.test.some(function(m){return l.test(m)});throw new Error("Browser's test function is not valid")});return f&&(this.parsedResult.engine=f.describe(this.getUA())),this.parsedResult.engine},d.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},d.getResult=function(){return a.default.assign({},this.parsedResult)},d.satisfies=function(l){var f=this,u={},m=0,p={},C=0;if(Object.keys(l).forEach(function(M){var T=l[M];typeof T=="string"?(p[M]=T,C+=1):typeof T=="object"&&(u[M]=T,m+=1)}),m>0){var Q=Object.keys(u),R=a.default.find(Q,function(M){return f.isOS(M)});if(R){var B=this.satisfies(u[R]);if(B!==void 0)return B}var D=a.default.find(Q,function(M){return f.isPlatform(M)});if(D){var E=this.satisfies(u[D]);if(E!==void 0)return E}}if(C>0){var w=Object.keys(p),y=a.default.find(w,function(M){return f.isBrowser(M,!0)});if(y!==void 0)return this.compareVersion(p[y])}},d.isBrowser=function(l,f){f===void 0&&(f=!1);var u=this.getBrowserName().toLowerCase(),m=l.toLowerCase(),p=a.default.getBrowserTypeByAlias(m);return f&&p&&(m=p.toLowerCase()),m===u},d.compareVersion=function(l){var f=[0],u=l,m=!1,p=this.getBrowserVersion();if(typeof p=="string")return l[0]===">"||l[0]==="<"?(u=l.substr(1),l[1]==="="?(m=!0,u=l.substr(2)):f=[],l[0]===">"?f.push(1):f.push(-1)):l[0]==="="?u=l.substr(1):l[0]==="~"&&(m=!0,u=l.substr(1)),f.indexOf(a.default.compareVersions(p,u,m))>-1},d.isOS=function(l){return this.getOSName(!0)===String(l).toLowerCase()},d.isPlatform=function(l){return this.getPlatformType(!0)===String(l).toLowerCase()},d.isEngine=function(l){return this.getEngineName(!0)===String(l).toLowerCase()},d.is=function(l,f){return f===void 0&&(f=!1),this.isBrowser(l,f)||this.isOS(l)||this.isPlatform(l)},d.some=function(l){var f=this;return l===void 0&&(l=[]),l.some(function(u){return f.is(u)})},g}();t.default=c,e.exports=t.default},92:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,o=(n=r(17))&&n.__esModule?n:{default:n},i=/version\/(\d+(\.?_?\d+)+)/i,s=[{test:[/googlebot/i],describe:function(a){var A={name:"Googlebot"},c=o.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,a)||o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/opera/i],describe:function(a){var A={name:"Opera"},c=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/opr\/|opios/i],describe:function(a){var A={name:"Opera"},c=o.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,a)||o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/SamsungBrowser/i],describe:function(a){var A={name:"Samsung Internet for Android"},c=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/Whale/i],describe:function(a){var A={name:"NAVER Whale Browser"},c=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/MZBrowser/i],describe:function(a){var A={name:"MZ Browser"},c=o.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,a)||o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/focus/i],describe:function(a){var A={name:"Focus"},c=o.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,a)||o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/swing/i],describe:function(a){var A={name:"Swing"},c=o.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,a)||o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/coast/i],describe:function(a){var A={name:"Opera Coast"},c=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(a){var A={name:"Opera Touch"},c=o.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,a)||o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/yabrowser/i],describe:function(a){var A={name:"Yandex Browser"},c=o.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,a)||o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/ucbrowser/i],describe:function(a){var A={name:"UC Browser"},c=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/Maxthon|mxios/i],describe:function(a){var A={name:"Maxthon"},c=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/epiphany/i],describe:function(a){var A={name:"Epiphany"},c=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/puffin/i],describe:function(a){var A={name:"Puffin"},c=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/sleipnir/i],describe:function(a){var A={name:"Sleipnir"},c=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/k-meleon/i],describe:function(a){var A={name:"K-Meleon"},c=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/micromessenger/i],describe:function(a){var A={name:"WeChat"},c=o.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,a)||o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/qqbrowser/i],describe:function(a){var A={name:/qqbrowserlite/i.test(a)?"QQ Browser Lite":"QQ Browser"},c=o.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,a)||o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/msie|trident/i],describe:function(a){var A={name:"Internet Explorer"},c=o.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/\sedg\//i],describe:function(a){var A={name:"Microsoft Edge"},c=o.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/edg([ea]|ios)/i],describe:function(a){var A={name:"Microsoft Edge"},c=o.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/vivaldi/i],describe:function(a){var A={name:"Vivaldi"},c=o.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/seamonkey/i],describe:function(a){var A={name:"SeaMonkey"},c=o.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/sailfish/i],describe:function(a){var A={name:"Sailfish"},c=o.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,a);return c&&(A.version=c),A}},{test:[/silk/i],describe:function(a){var A={name:"Amazon Silk"},c=o.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/phantom/i],describe:function(a){var A={name:"PhantomJS"},c=o.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/slimerjs/i],describe:function(a){var A={name:"SlimerJS"},c=o.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(a){var A={name:"BlackBerry"},c=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/(web|hpw)[o0]s/i],describe:function(a){var A={name:"WebOS Browser"},c=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/bada/i],describe:function(a){var A={name:"Bada"},c=o.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/tizen/i],describe:function(a){var A={name:"Tizen"},c=o.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,a)||o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/qupzilla/i],describe:function(a){var A={name:"QupZilla"},c=o.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,a)||o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/firefox|iceweasel|fxios/i],describe:function(a){var A={name:"Firefox"},c=o.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/electron/i],describe:function(a){var A={name:"Electron"},c=o.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/MiuiBrowser/i],describe:function(a){var A={name:"Miui"},c=o.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/chromium/i],describe:function(a){var A={name:"Chromium"},c=o.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,a)||o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/chrome|crios|crmo/i],describe:function(a){var A={name:"Chrome"},c=o.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/GSA/i],describe:function(a){var A={name:"Google Search"},c=o.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:function(a){var A=!a.test(/like android/i),c=a.test(/android/i);return A&&c},describe:function(a){var A={name:"Android Browser"},c=o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/playstation 4/i],describe:function(a){var A={name:"PlayStation 4"},c=o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/safari|applewebkit/i],describe:function(a){var A={name:"Safari"},c=o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/.*/i],describe:function(a){var A=a.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:o.default.getFirstMatch(A,a),version:o.default.getSecondMatch(A,a)}}}];t.default=s,e.exports=t.default},93:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,o=(n=r(17))&&n.__esModule?n:{default:n},i=r(18),s=[{test:[/Roku\/DVP/],describe:function(a){var A=o.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,a);return{name:i.OS_MAP.Roku,version:A}}},{test:[/windows phone/i],describe:function(a){var A=o.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,a);return{name:i.OS_MAP.WindowsPhone,version:A}}},{test:[/windows /i],describe:function(a){var A=o.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,a),c=o.default.getWindowsVersionName(A);return{name:i.OS_MAP.Windows,version:A,versionName:c}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(a){var A={name:i.OS_MAP.iOS},c=o.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,a);return c&&(A.version=c),A}},{test:[/macintosh/i],describe:function(a){var A=o.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,a).replace(/[_\s]/g,"."),c=o.default.getMacOSVersionName(A),g={name:i.OS_MAP.MacOS,version:A};return c&&(g.versionName=c),g}},{test:[/(ipod|iphone|ipad)/i],describe:function(a){var A=o.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,a).replace(/[_\s]/g,".");return{name:i.OS_MAP.iOS,version:A}}},{test:function(a){var A=!a.test(/like android/i),c=a.test(/android/i);return A&&c},describe:function(a){var A=o.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,a),c=o.default.getAndroidVersionName(A),g={name:i.OS_MAP.Android,version:A};return c&&(g.versionName=c),g}},{test:[/(web|hpw)[o0]s/i],describe:function(a){var A=o.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,a),c={name:i.OS_MAP.WebOS};return A&&A.length&&(c.version=A),c}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(a){var A=o.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,a)||o.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,a)||o.default.getFirstMatch(/\bbb(\d+)/i,a);return{name:i.OS_MAP.BlackBerry,version:A}}},{test:[/bada/i],describe:function(a){var A=o.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,a);return{name:i.OS_MAP.Bada,version:A}}},{test:[/tizen/i],describe:function(a){var A=o.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,a);return{name:i.OS_MAP.Tizen,version:A}}},{test:[/linux/i],describe:function(){return{name:i.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:i.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(a){var A=o.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,a);return{name:i.OS_MAP.PlayStation4,version:A}}}];t.default=s,e.exports=t.default},94:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,o=(n=r(17))&&n.__esModule?n:{default:n},i=r(18),s=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(a){var A=o.default.getFirstMatch(/(can-l01)/i,a)&&"Nova",c={type:i.PLATFORMS_MAP.mobile,vendor:"Huawei"};return A&&(c.model=A),c}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet}}},{test:function(a){var A=a.test(/ipod|iphone/i),c=a.test(/like (ipod|iphone)/i);return A&&!c},describe:function(a){var A=o.default.getFirstMatch(/(ipod|iphone)/i,a);return{type:i.PLATFORMS_MAP.mobile,vendor:"Apple",model:A}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getBrowserName(!0)==="blackberry"},describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(a){return a.getBrowserName(!0)==="bada"},describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getBrowserName()==="windows phone"},describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(a){var A=Number(String(a.getOSVersion()).split(".")[0]);return a.getOSName(!0)==="android"&&A>=3},describe:function(){return{type:i.PLATFORMS_MAP.tablet}}},{test:function(a){return a.getOSName(!0)==="android"},describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getOSName(!0)==="macos"},describe:function(){return{type:i.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(a){return a.getOSName(!0)==="windows"},describe:function(){return{type:i.PLATFORMS_MAP.desktop}}},{test:function(a){return a.getOSName(!0)==="linux"},describe:function(){return{type:i.PLATFORMS_MAP.desktop}}},{test:function(a){return a.getOSName(!0)==="playstation 4"},describe:function(){return{type:i.PLATFORMS_MAP.tv}}},{test:function(a){return a.getOSName(!0)==="roku"},describe:function(){return{type:i.PLATFORMS_MAP.tv}}}];t.default=s,e.exports=t.default},95:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,o=(n=r(17))&&n.__esModule?n:{default:n},i=r(18),s=[{test:function(a){return a.getBrowserName(!0)==="microsoft edge"},describe:function(a){if(/\sedg\//i.test(a))return{name:i.ENGINE_MAP.Blink};var A=o.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,a);return{name:i.ENGINE_MAP.EdgeHTML,version:A}}},{test:[/trident/i],describe:function(a){var A={name:i.ENGINE_MAP.Trident},c=o.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:function(a){return a.test(/presto/i)},describe:function(a){var A={name:i.ENGINE_MAP.Presto},c=o.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:function(a){var A=a.test(/gecko/i),c=a.test(/like gecko/i);return A&&!c},describe:function(a){var A={name:i.ENGINE_MAP.Gecko},c=o.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:i.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(a){var A={name:i.ENGINE_MAP.WebKit},c=o.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}}];t.default=s,e.exports=t.default}})})});var oD=F(ae=>{"use strict";var gs=Symbol.for("react.element"),EK=Symbol.for("react.portal"),yK=Symbol.for("react.fragment"),QK=Symbol.for("react.strict_mode"),wK=Symbol.for("react.profiler"),SK=Symbol.for("react.provider"),xK=Symbol.for("react.context"),bK=Symbol.for("react.forward_ref"),DK=Symbol.for("react.suspense"),kK=Symbol.for("react.memo"),FK=Symbol.for("react.lazy"),Y0=Symbol.iterator;function _K(e){return e===null||typeof e!="object"?null:(e=Y0&&e[Y0]||e["@@iterator"],typeof e=="function"?e:null)}var X0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z0=Object.assign,$0={};function Xo(e,t,r){this.props=e,this.context=t,this.refs=$0,this.updater=r||X0}Xo.prototype.isReactComponent={};Xo.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Xo.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function eD(){}eD.prototype=Xo.prototype;function Zf(e,t,r){this.props=e,this.context=t,this.refs=$0,this.updater=r||X0}var $f=Zf.prototype=new eD;$f.constructor=Zf;Z0($f,Xo.prototype);$f.isPureReactComponent=!0;var W0=Array.isArray,tD=Object.prototype.hasOwnProperty,eu={current:null},rD={key:!0,ref:!0,__self:!0,__source:!0};function nD(e,t,r){var n,o={},i=null,s=null;if(t!=null)for(n in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(i=""+t.key),t)tD.call(t,n)&&!rD.hasOwnProperty(n)&&(o[n]=t[n]);var a=arguments.length-2;if(a===1)o.children=r;else if(1<a){for(var A=Array(a),c=0;c<a;c++)A[c]=arguments[c+2];o.children=A}if(e&&e.defaultProps)for(n in a=e.defaultProps,a)o[n]===void 0&&(o[n]=a[n]);return{$$typeof:gs,type:e,key:i,ref:s,props:o,_owner:eu.current}}function vK(e,t){return{$$typeof:gs,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function tu(e){return typeof e=="object"&&e!==null&&e.$$typeof===gs}function RK(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var j0=/\/+/g;function Xf(e,t){return typeof e=="object"&&e!==null&&e.key!=null?RK(""+e.key):t.toString(36)}function yc(e,t,r,n,o){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case gs:case EK:s=!0}}if(s)return s=e,o=o(s),e=n===""?"."+Xf(s,0):n,W0(o)?(r="",e!=null&&(r=e.replace(j0,"$&/")+"/"),yc(o,t,r,"",function(c){return c})):o!=null&&(tu(o)&&(o=vK(o,r+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(j0,"$&/")+"/")+e)),t.push(o)),1;if(s=0,n=n===""?".":n+":",W0(e))for(var a=0;a<e.length;a++){i=e[a];var A=n+Xf(i,a);s+=yc(i,t,r,A,o)}else if(A=_K(e),typeof A=="function")for(e=A.call(e),a=0;!(i=e.next()).done;)i=i.value,A=n+Xf(i,a++),s+=yc(i,t,r,A,o);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Ec(e,t,r){if(e==null)return e;var n=[],o=0;return yc(e,n,"","",function(i){return t.call(r,i,o++)}),n}function NK(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var dt={current:null},Qc={transition:null},TK={ReactCurrentDispatcher:dt,ReactCurrentBatchConfig:Qc,ReactCurrentOwner:eu};ae.Children={map:Ec,forEach:function(e,t,r){Ec(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Ec(e,function(){t++}),t},toArray:function(e){return Ec(e,function(t){return t})||[]},only:function(e){if(!tu(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ae.Component=Xo;ae.Fragment=yK;ae.Profiler=wK;ae.PureComponent=Zf;ae.StrictMode=QK;ae.Suspense=DK;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TK;ae.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Z0({},e.props),o=e.key,i=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,s=eu.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(A in t)tD.call(t,A)&&!rD.hasOwnProperty(A)&&(n[A]=t[A]===void 0&&a!==void 0?a[A]:t[A])}var A=arguments.length-2;if(A===1)n.children=r;else if(1<A){a=Array(A);for(var c=0;c<A;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:gs,type:e.type,key:o,ref:i,props:n,_owner:s}};ae.createContext=function(e){return e={$$typeof:xK,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:SK,_context:e},e.Consumer=e};ae.createElement=nD;ae.createFactory=function(e){var t=nD.bind(null,e);return t.type=e,t};ae.createRef=function(){return{current:null}};ae.forwardRef=function(e){return{$$typeof:bK,render:e}};ae.isValidElement=tu;ae.lazy=function(e){return{$$typeof:FK,_payload:{_status:-1,_result:e},_init:NK}};ae.memo=function(e,t){return{$$typeof:kK,type:e,compare:t===void 0?null:t}};ae.startTransition=function(e){var t=Qc.transition;Qc.transition={};try{e()}finally{Qc.transition=t}};ae.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ae.useCallback=function(e,t){return dt.current.useCallback(e,t)};ae.useContext=function(e){return dt.current.useContext(e)};ae.useDebugValue=function(){};ae.useDeferredValue=function(e){return dt.current.useDeferredValue(e)};ae.useEffect=function(e,t){return dt.current.useEffect(e,t)};ae.useId=function(){return dt.current.useId()};ae.useImperativeHandle=function(e,t,r){return dt.current.useImperativeHandle(e,t,r)};ae.useInsertionEffect=function(e,t){return dt.current.useInsertionEffect(e,t)};ae.useLayoutEffect=function(e,t){return dt.current.useLayoutEffect(e,t)};ae.useMemo=function(e,t){return dt.current.useMemo(e,t)};ae.useReducer=function(e,t,r){return dt.current.useReducer(e,t,r)};ae.useRef=function(e){return dt.current.useRef(e)};ae.useState=function(e){return dt.current.useState(e)};ae.useSyncExternalStore=function(e,t,r){return dt.current.useSyncExternalStore(e,t,r)};ae.useTransition=function(){return dt.current.useTransition()};ae.version="18.2.0"});var ru=F((TSe,iD)=>{"use strict";iD.exports=oD()});var dD=F((zSe,lD)=>{"use strict";lD.exports=()=>{let e={};return e.promise=new Promise((t,r)=>{e.resolve=t,e.reject=r}),e}});var uD=F((YSe,fD)=>{"use strict";var qK=dD();function LK(e,t="maxAge"){let r,n,o,i=async()=>{if(r!==void 0)return;let A=async c=>{o=qK();let g=c[1][t]-Date.now();if(g<=0){e.delete(c[0]),o.resolve();return}return r=c[0],n=setTimeout(()=>{e.delete(c[0]),o&&o.resolve()},g),typeof n.unref=="function"&&n.unref(),o.promise};try{for(let c of e)await A(c)}catch{}r=void 0},s=()=>{r=void 0,n!==void 0&&(clearTimeout(n),n=void 0),o!==void 0&&(o.reject(void 0),o=void 0)},a=e.set.bind(e);return e.set=(A,c)=>{e.has(A)&&e.delete(A);let g=a(A,c);return r&&r===A&&s(),i(),g},i(),e}fD.exports=LK});var su=F((WSe,ID)=>{"use strict";var KK=uD(),iu=class{constructor(t,r){if(this.maxAge=t,this[Symbol.toStringTag]="Map",this.data=new Map,KK(this.data),r)for(let[n,o]of r)this.set(n,o)}get size(){return this.data.size}clear(){this.data.clear()}delete(t){return this.data.delete(t)}has(t){return this.data.has(t)}get(t){let r=this.data.get(t);if(r)return r.data}set(t,r){return this.data.set(t,{maxAge:Date.now()+this.maxAge,data:r}),this}values(){return this.createIterator(t=>t[1].data)}keys(){return this.data.keys()}entries(){return this.createIterator(t=>[t[0],t[1].data])}forEach(t,r){for(let[n,o]of this.entries())t.apply(r,[o,n,this])}[Symbol.iterator](){return this.entries()}*createIterator(t){for(let r of this.data.entries())yield t(r)}};ID.exports=iu});var v4=J(am()),R4=J(gm()),N4=J(Im()),T4=J(hm()),M4=J(Em()),U4=J(Sm()),O4=J(Um()),P4=J(Pm()),Gm=AbortSignal.any||function(t){let r=new AbortController;if(t.length===0)return r.signal;let n=t.find(i=>i.aborted);if(n)return r.abort(n.reason),r.signal;let o=function(){r.abort(this.reason)};for(let i of t)i.addEventListener("abort",o,{once:!0,signal:r.signal});return r.signal},Hm=AbortSignal.timeout||function(t){let r=new AbortController;return setTimeout(()=>{r.abort(new DOMException("Timeout","TimeoutError"))},t),r.signal};var _t=J(ie());var fG=J(Lm());var uN=typeof global=="object"&&global&&global.Object===Object&&global,Rs=uN;var IN=typeof self=="object"&&self&&self.Object===Object&&self,pN=Rs||IN||Function("return this")(),xe=pN;var mN=xe.Symbol,at=mN;var Km=Object.prototype,hN=Km.hasOwnProperty,CN=Km.toString,di=at?at.toStringTag:void 0;function BN(e){var t=hN.call(e,di),r=e[di];try{e[di]=void 0;var n=!0}catch{}var o=CN.call(e);return n&&(t?e[di]=r:delete e[di]),o}var Jm=BN;var EN=Object.prototype,yN=EN.toString;function QN(e){return yN.call(e)}var Vm=QN;var wN="[object Null]",SN="[object Undefined]",zm=at?at.toStringTag:void 0;function xN(e){return e==null?e===void 0?SN:wN:zm&&zm in Object(e)?Jm(e):Vm(e)}var Ct=xN;function bN(e){return e!=null&&typeof e=="object"}var Ue=bN;var DN="[object Symbol]";function kN(e){return typeof e=="symbol"||Ue(e)&&Ct(e)==DN}var qr=kN;function FN(e,t){for(var r=-1,n=e==null?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}var Ns=FN;var _N=Array.isArray,we=_N;var vN=1/0,Ym=at?at.prototype:void 0,Wm=Ym?Ym.toString:void 0;function jm(e){if(typeof e=="string")return e;if(we(e))return Ns(e,jm)+"";if(qr(e))return Wm?Wm.call(e):"";var t=e+"";return t=="0"&&1/e==-vN?"-0":t}var Xm=jm;var RN=/\s/;function NN(e){for(var t=e.length;t--&&RN.test(e.charAt(t)););return t}var Zm=NN;var TN=/^\s+/;function MN(e){return e&&e.slice(0,Zm(e)+1).replace(TN,"")}var $m=MN;function UN(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Ie=UN;var eh=NaN,ON=/^[-+]0x[0-9a-f]+$/i,PN=/^0b[01]+$/i,GN=/^0o[0-7]+$/i,HN=parseInt;function qN(e){if(typeof e=="number")return e;if(qr(e))return eh;if(Ie(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Ie(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=$m(e);var r=PN.test(e);return r||GN.test(e)?HN(e.slice(2),r?2:8):ON.test(e)?eh:+e}var Jg=qN;function LN(e){return e}var Xn=LN;var KN="[object AsyncFunction]",JN="[object Function]",VN="[object GeneratorFunction]",zN="[object Proxy]";function YN(e){if(!Ie(e))return!1;var t=Ct(e);return t==JN||t==VN||t==KN||t==zN}var Zn=YN;var WN=xe["__core-js_shared__"],Ts=WN;var th=function(){var e=/[^.]+$/.exec(Ts&&Ts.keys&&Ts.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function jN(e){return!!th&&th in e}var rh=jN;var XN=Function.prototype,ZN=XN.toString;function $N(e){if(e!=null){try{return ZN.call(e)}catch{}try{return e+""}catch{}}return""}var Er=$N;var eT=/[\\^$.*+?()[\]{}|]/g,tT=/^\[object .+?Constructor\]$/,rT=Function.prototype,nT=Object.prototype,oT=rT.toString,iT=nT.hasOwnProperty,sT=RegExp("^"+oT.call(iT).replace(eT,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function aT(e){if(!Ie(e)||rh(e))return!1;var t=Zn(e)?sT:tT;return t.test(Er(e))}var nh=aT;function AT(e,t){return e?.[t]}var oh=AT;function cT(e,t){var r=oh(e,t);return nh(r)?r:void 0}var ut=cT;var gT=ut(xe,"WeakMap"),Ms=gT;var ih=Object.create,lT=function(){function e(){}return function(t){if(!Ie(t))return{};if(ih)return ih(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),sh=lT;function dT(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var ah=dT;function fT(){}var yr=fT;function uT(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var Us=uT;var IT=800,pT=16,mT=Date.now;function hT(e){var t=0,r=0;return function(){var n=mT(),o=pT-(n-r);if(r=n,o>0){if(++t>=IT)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Ah=hT;function CT(e){return function(){return e}}var ch=CT;var BT=function(){try{var e=ut(Object,"defineProperty");return e({},"",{}),e}catch{}}(),$n=BT;var ET=$n?function(e,t){return $n(e,"toString",{configurable:!0,enumerable:!1,value:ch(t),writable:!0})}:Xn,gh=ET;var yT=Ah(gh),lh=yT;function QT(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var dh=QT;var wT=9007199254740991,ST=/^(?:0|[1-9]\d*)$/;function xT(e,t){var r=typeof e;return t=t??wT,!!t&&(r=="number"||r!="symbol"&&ST.test(e))&&e>-1&&e%1==0&&e<t}var Lr=xT;function bT(e,t,r){t=="__proto__"&&$n?$n(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var eo=bT;function DT(e,t){return e===t||e!==e&&t!==t}var er=DT;var kT=Object.prototype,FT=kT.hasOwnProperty;function _T(e,t,r){var n=e[t];(!(FT.call(e,t)&&er(n,r))||r===void 0&&!(t in e))&&eo(e,t,r)}var to=_T;function vT(e,t,r,n){var o=!r;r||(r={});for(var i=-1,s=t.length;++i<s;){var a=t[i],A=n?n(r[a],e[a],a,r,e):void 0;A===void 0&&(A=e[a]),o?eo(r,a,A):to(r,a,A)}return r}var tr=vT;var fh=Math.max;function RT(e,t,r){return t=fh(t===void 0?e.length-1:t,0),function(){for(var n=arguments,o=-1,i=fh(n.length-t,0),s=Array(i);++o<i;)s[o]=n[t+o];o=-1;for(var a=Array(t+1);++o<t;)a[o]=n[o];return a[t]=r(s),ah(e,this,a)}}var uh=RT;function NT(e,t){return lh(uh(e,t,Xn),e+"")}var Ih=NT;var TT=9007199254740991;function MT(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=TT}var ro=MT;function UT(e){return e!=null&&ro(e.length)&&!Zn(e)}var rr=UT;function OT(e,t,r){if(!Ie(r))return!1;var n=typeof t;return(n=="number"?rr(r)&&Lr(t,r.length):n=="string"&&t in r)?er(r[t],e):!1}var ph=OT;function PT(e){return Ih(function(t,r){var n=-1,o=r.length,i=o>1?r[o-1]:void 0,s=o>2?r[2]:void 0;for(i=e.length>3&&typeof i=="function"?(o--,i):void 0,s&&ph(r[0],r[1],s)&&(i=o<3?void 0:i,o=1),t=Object(t);++n<o;){var a=r[n];a&&e(t,a,n,i)}return t})}var mh=PT;var GT=Object.prototype;function HT(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||GT;return e===r}var Kr=HT;function qT(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var hh=qT;var LT="[object Arguments]";function KT(e){return Ue(e)&&Ct(e)==LT}var Vg=KT;var Ch=Object.prototype,JT=Ch.hasOwnProperty,VT=Ch.propertyIsEnumerable,zT=Vg(function(){return arguments}())?Vg:function(e){return Ue(e)&&JT.call(e,"callee")&&!VT.call(e,"callee")},Qr=zT;function YT(){return!1}var Bh=YT;var Qh=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Eh=Qh&&typeof module=="object"&&module&&!module.nodeType&&module,WT=Eh&&Eh.exports===Qh,yh=WT?xe.Buffer:void 0,jT=yh?yh.isBuffer:void 0,XT=jT||Bh,Gt=XT;var ZT="[object Arguments]",$T="[object Array]",eM="[object Boolean]",tM="[object Date]",rM="[object Error]",nM="[object Function]",oM="[object Map]",iM="[object Number]",sM="[object Object]",aM="[object RegExp]",AM="[object Set]",cM="[object String]",gM="[object WeakMap]",lM="[object ArrayBuffer]",dM="[object DataView]",fM="[object Float32Array]",uM="[object Float64Array]",IM="[object Int8Array]",pM="[object Int16Array]",mM="[object Int32Array]",hM="[object Uint8Array]",CM="[object Uint8ClampedArray]",BM="[object Uint16Array]",EM="[object Uint32Array]",ye={};ye[fM]=ye[uM]=ye[IM]=ye[pM]=ye[mM]=ye[hM]=ye[CM]=ye[BM]=ye[EM]=!0;ye[ZT]=ye[$T]=ye[lM]=ye[eM]=ye[dM]=ye[tM]=ye[rM]=ye[nM]=ye[oM]=ye[iM]=ye[sM]=ye[aM]=ye[AM]=ye[cM]=ye[gM]=!1;function yM(e){return Ue(e)&&ro(e.length)&&!!ye[Ct(e)]}var wh=yM;function QM(e){return function(t){return e(t)}}var no=QM;var Sh=typeof exports=="object"&&exports&&!exports.nodeType&&exports,fi=Sh&&typeof module=="object"&&module&&!module.nodeType&&module,wM=fi&&fi.exports===Sh,zg=wM&&Rs.process,SM=function(){try{var e=fi&&fi.require&&fi.require("util").types;return e||zg&&zg.binding&&zg.binding("util")}catch{}}(),wr=SM;var xh=wr&&wr.isTypedArray,xM=xh?no(xh):wh,Jr=xM;var bM=Object.prototype,DM=bM.hasOwnProperty;function kM(e,t){var r=we(e),n=!r&&Qr(e),o=!r&&!n&&Gt(e),i=!r&&!n&&!o&&Jr(e),s=r||n||o||i,a=s?hh(e.length,String):[],A=a.length;for(var c in e)(t||DM.call(e,c))&&!(s&&(c=="length"||o&&(c=="offset"||c=="parent")||i&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Lr(c,A)))&&a.push(c);return a}var Os=kM;function FM(e,t){return function(r){return e(t(r))}}var Ps=FM;var _M=Ps(Object.keys,Object),bh=_M;var vM=Object.prototype,RM=vM.hasOwnProperty;function NM(e){if(!Kr(e))return bh(e);var t=[];for(var r in Object(e))RM.call(e,r)&&r!="constructor"&&t.push(r);return t}var Gs=NM;function TM(e){return rr(e)?Os(e):Gs(e)}var Vr=TM;function MM(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var Dh=MM;var UM=Object.prototype,OM=UM.hasOwnProperty;function PM(e){if(!Ie(e))return Dh(e);var t=Kr(e),r=[];for(var n in e)n=="constructor"&&(t||!OM.call(e,n))||r.push(n);return r}var kh=PM;function GM(e){return rr(e)?Os(e,!0):kh(e)}var nr=GM;var HM=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,qM=/^\w*$/;function LM(e,t){if(we(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||qr(e)?!0:qM.test(e)||!HM.test(e)||t!=null&&e in Object(t)}var oo=LM;var KM=ut(Object,"create"),Sr=KM;function JM(){this.__data__=Sr?Sr(null):{},this.size=0}var Fh=JM;function VM(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var _h=VM;var zM="__lodash_hash_undefined__",YM=Object.prototype,WM=YM.hasOwnProperty;function jM(e){var t=this.__data__;if(Sr){var r=t[e];return r===zM?void 0:r}return WM.call(t,e)?t[e]:void 0}var vh=jM;var XM=Object.prototype,ZM=XM.hasOwnProperty;function $M(e){var t=this.__data__;return Sr?t[e]!==void 0:ZM.call(t,e)}var Rh=$M;var e3="__lodash_hash_undefined__";function t3(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Sr&&t===void 0?e3:t,this}var Nh=t3;function io(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}io.prototype.clear=Fh;io.prototype.delete=_h;io.prototype.get=vh;io.prototype.has=Rh;io.prototype.set=Nh;var Yg=io;function r3(){this.__data__=[],this.size=0}var Th=r3;function n3(e,t){for(var r=e.length;r--;)if(er(e[r][0],t))return r;return-1}var zr=n3;var o3=Array.prototype,i3=o3.splice;function s3(e){var t=this.__data__,r=zr(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():i3.call(t,r,1),--this.size,!0}var Mh=s3;function a3(e){var t=this.__data__,r=zr(t,e);return r<0?void 0:t[r][1]}var Uh=a3;function A3(e){return zr(this.__data__,e)>-1}var Oh=A3;function c3(e,t){var r=this.__data__,n=zr(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var Ph=c3;function so(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}so.prototype.clear=Th;so.prototype.delete=Mh;so.prototype.get=Uh;so.prototype.has=Oh;so.prototype.set=Ph;var Yr=so;var g3=ut(xe,"Map"),Wr=g3;function l3(){this.size=0,this.__data__={hash:new Yg,map:new(Wr||Yr),string:new Yg}}var Gh=l3;function d3(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Hh=d3;function f3(e,t){var r=e.__data__;return Hh(t)?r[typeof t=="string"?"string":"hash"]:r.map}var jr=f3;function u3(e){var t=jr(this,e).delete(e);return this.size-=t?1:0,t}var qh=u3;function I3(e){return jr(this,e).get(e)}var Lh=I3;function p3(e){return jr(this,e).has(e)}var Kh=p3;function m3(e,t){var r=jr(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var Jh=m3;function ao(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ao.prototype.clear=Gh;ao.prototype.delete=qh;ao.prototype.get=Lh;ao.prototype.has=Kh;ao.prototype.set=Jh;var Bn=ao;var h3="Expected a function";function Wg(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(h3);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var s=e.apply(this,n);return r.cache=i.set(o,s)||i,s};return r.cache=new(Wg.Cache||Bn),r}Wg.Cache=Bn;var Vh=Wg;var C3=500;function B3(e){var t=Vh(e,function(n){return r.size===C3&&r.clear(),n}),r=t.cache;return t}var zh=B3;var E3=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,y3=/\\(\\)?/g,Q3=zh(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(E3,function(r,n,o,i){t.push(o?i.replace(y3,"$1"):n||r)}),t}),Yh=Q3;function w3(e){return e==null?"":Xm(e)}var Wh=w3;function S3(e,t){return we(e)?e:oo(e,t)?[e]:Yh(Wh(e))}var Xr=S3;var x3=1/0;function b3(e){if(typeof e=="string"||qr(e))return e;var t=e+"";return t=="0"&&1/e==-x3?"-0":t}var or=b3;function D3(e,t){t=Xr(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[or(t[r++])];return r&&r==n?e:void 0}var Ao=D3;function k3(e,t,r){var n=e==null?void 0:Ao(e,t);return n===void 0?r:n}var jh=k3;function F3(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}var Hs=F3;var _3=Ps(Object.getPrototypeOf,Object),co=_3;var v3="[object Object]",R3=Function.prototype,N3=Object.prototype,Xh=R3.toString,T3=N3.hasOwnProperty,M3=Xh.call(Object);function U3(e){if(!Ue(e)||Ct(e)!=v3)return!1;var t=co(e);if(t===null)return!0;var r=T3.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&Xh.call(r)==M3}var go=U3;function O3(){this.__data__=new Yr,this.size=0}var Zh=O3;function P3(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var $h=P3;function G3(e){return this.__data__.get(e)}var eC=G3;function H3(e){return this.__data__.has(e)}var tC=H3;var q3=200;function L3(e,t){var r=this.__data__;if(r instanceof Yr){var n=r.__data__;if(!Wr||n.length<q3-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Bn(n)}return r.set(e,t),this.size=r.size,this}var rC=L3;function lo(e){var t=this.__data__=new Yr(e);this.size=t.size}lo.prototype.clear=Zh;lo.prototype.delete=$h;lo.prototype.get=eC;lo.prototype.has=tC;lo.prototype.set=rC;var ir=lo;function K3(e,t){return e&&tr(t,Vr(t),e)}var nC=K3;function J3(e,t){return e&&tr(t,nr(t),e)}var oC=J3;var AC=typeof exports=="object"&&exports&&!exports.nodeType&&exports,iC=AC&&typeof module=="object"&&module&&!module.nodeType&&module,V3=iC&&iC.exports===AC,sC=V3?xe.Buffer:void 0,aC=sC?sC.allocUnsafe:void 0;function z3(e,t){if(t)return e.slice();var r=e.length,n=aC?aC(r):new e.constructor(r);return e.copy(n),n}var qs=z3;function Y3(e,t){for(var r=-1,n=e==null?0:e.length,o=0,i=[];++r<n;){var s=e[r];t(s,r,e)&&(i[o++]=s)}return i}var cC=Y3;function W3(){return[]}var Ls=W3;var j3=Object.prototype,X3=j3.propertyIsEnumerable,gC=Object.getOwnPropertySymbols,Z3=gC?function(e){return e==null?[]:(e=Object(e),cC(gC(e),function(t){return X3.call(e,t)}))}:Ls,fo=Z3;function $3(e,t){return tr(e,fo(e),t)}var lC=$3;var eU=Object.getOwnPropertySymbols,tU=eU?function(e){for(var t=[];e;)Hs(t,fo(e)),e=co(e);return t}:Ls,Ks=tU;function rU(e,t){return tr(e,Ks(e),t)}var dC=rU;function nU(e,t,r){var n=t(e);return we(e)?n:Hs(n,r(e))}var Js=nU;function oU(e){return Js(e,Vr,fo)}var ui=oU;function iU(e){return Js(e,nr,Ks)}var Vs=iU;var sU=ut(xe,"DataView"),zs=sU;var aU=ut(xe,"Promise"),Ys=aU;var AU=ut(xe,"Set"),Ws=AU;var fC="[object Map]",cU="[object Object]",uC="[object Promise]",IC="[object Set]",pC="[object WeakMap]",mC="[object DataView]",gU=Er(zs),lU=Er(Wr),dU=Er(Ys),fU=Er(Ws),uU=Er(Ms),En=Ct;(zs&&En(new zs(new ArrayBuffer(1)))!=mC||Wr&&En(new Wr)!=fC||Ys&&En(Ys.resolve())!=uC||Ws&&En(new Ws)!=IC||Ms&&En(new Ms)!=pC)&&(En=function(e){var t=Ct(e),r=t==cU?e.constructor:void 0,n=r?Er(r):"";if(n)switch(n){case gU:return mC;case lU:return fC;case dU:return uC;case fU:return IC;case uU:return pC}return t});var Ht=En;var IU=Object.prototype,pU=IU.hasOwnProperty;function mU(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&pU.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var hC=mU;var hU=xe.Uint8Array,uo=hU;function CU(e){var t=new e.constructor(e.byteLength);return new uo(t).set(new uo(e)),t}var Io=CU;function BU(e,t){var r=t?Io(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var CC=BU;var EU=/\w*$/;function yU(e){var t=new e.constructor(e.source,EU.exec(e));return t.lastIndex=e.lastIndex,t}var BC=yU;var EC=at?at.prototype:void 0,yC=EC?EC.valueOf:void 0;function QU(e){return yC?Object(yC.call(e)):{}}var QC=QU;function wU(e,t){var r=t?Io(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var js=wU;var SU="[object Boolean]",xU="[object Date]",bU="[object Map]",DU="[object Number]",kU="[object RegExp]",FU="[object Set]",_U="[object String]",vU="[object Symbol]",RU="[object ArrayBuffer]",NU="[object DataView]",TU="[object Float32Array]",MU="[object Float64Array]",UU="[object Int8Array]",OU="[object Int16Array]",PU="[object Int32Array]",GU="[object Uint8Array]",HU="[object Uint8ClampedArray]",qU="[object Uint16Array]",LU="[object Uint32Array]";function KU(e,t,r){var n=e.constructor;switch(t){case RU:return Io(e);case SU:case xU:return new n(+e);case NU:return CC(e,r);case TU:case MU:case UU:case OU:case PU:case GU:case HU:case qU:case LU:return js(e,r);case bU:return new n;case DU:case _U:return new n(e);case kU:return BC(e);case FU:return new n;case vU:return QC(e)}}var wC=KU;function JU(e){return typeof e.constructor=="function"&&!Kr(e)?sh(co(e)):{}}var Xs=JU;var VU="[object Map]";function zU(e){return Ue(e)&&Ht(e)==VU}var SC=zU;var xC=wr&&wr.isMap,YU=xC?no(xC):SC,bC=YU;var WU="[object Set]";function jU(e){return Ue(e)&&Ht(e)==WU}var DC=jU;var kC=wr&&wr.isSet,XU=kC?no(kC):DC,FC=XU;var ZU=1,$U=2,eO=4,_C="[object Arguments]",tO="[object Array]",rO="[object Boolean]",nO="[object Date]",oO="[object Error]",vC="[object Function]",iO="[object GeneratorFunction]",sO="[object Map]",aO="[object Number]",RC="[object Object]",AO="[object RegExp]",cO="[object Set]",gO="[object String]",lO="[object Symbol]",dO="[object WeakMap]",fO="[object ArrayBuffer]",uO="[object DataView]",IO="[object Float32Array]",pO="[object Float64Array]",mO="[object Int8Array]",hO="[object Int16Array]",CO="[object Int32Array]",BO="[object Uint8Array]",EO="[object Uint8ClampedArray]",yO="[object Uint16Array]",QO="[object Uint32Array]",pe={};pe[_C]=pe[tO]=pe[fO]=pe[uO]=pe[rO]=pe[nO]=pe[IO]=pe[pO]=pe[mO]=pe[hO]=pe[CO]=pe[sO]=pe[aO]=pe[RC]=pe[AO]=pe[cO]=pe[gO]=pe[lO]=pe[BO]=pe[EO]=pe[yO]=pe[QO]=!0;pe[oO]=pe[vC]=pe[dO]=!1;function Zs(e,t,r,n,o,i){var s,a=t&ZU,A=t&$U,c=t&eO;if(r&&(s=o?r(e,n,o,i):r(e)),s!==void 0)return s;if(!Ie(e))return e;var g=we(e);if(g){if(s=hC(e),!a)return Us(e,s)}else{var d=Ht(e),l=d==vC||d==iO;if(Gt(e))return qs(e,a);if(d==RC||d==_C||l&&!o){if(s=A||l?{}:Xs(e),!a)return A?dC(e,oC(s,e)):lC(e,nC(s,e))}else{if(!pe[d])return o?e:{};s=wC(e,d,a)}}i||(i=new ir);var f=i.get(e);if(f)return f;i.set(e,s),FC(e)?e.forEach(function(p){s.add(Zs(p,t,r,p,e,i))}):bC(e)&&e.forEach(function(p,C){s.set(C,Zs(p,t,r,C,e,i))});var u=c?A?Vs:ui:A?nr:Vr,m=g?void 0:u(e);return dh(m||e,function(p,C){m&&(C=p,p=e[C]),to(s,C,Zs(p,t,r,C,e,i))}),s}var NC=Zs;var wO=4;function SO(e){return NC(e,wO)}var jg=SO;var xO="__lodash_hash_undefined__";function bO(e){return this.__data__.set(e,xO),this}var TC=bO;function DO(e){return this.__data__.has(e)}var MC=DO;function $s(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new Bn;++t<r;)this.add(e[t])}$s.prototype.add=$s.prototype.push=TC;$s.prototype.has=MC;var UC=$s;function kO(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var OC=kO;function FO(e,t){return e.has(t)}var PC=FO;var _O=1,vO=2;function RO(e,t,r,n,o,i){var s=r&_O,a=e.length,A=t.length;if(a!=A&&!(s&&A>a))return!1;var c=i.get(e),g=i.get(t);if(c&&g)return c==t&&g==e;var d=-1,l=!0,f=r&vO?new UC:void 0;for(i.set(e,t),i.set(t,e);++d<a;){var u=e[d],m=t[d];if(n)var p=s?n(m,u,d,t,e,i):n(u,m,d,e,t,i);if(p!==void 0){if(p)continue;l=!1;break}if(f){if(!OC(t,function(C,Q){if(!PC(f,Q)&&(u===C||o(u,C,r,n,i)))return f.push(Q)})){l=!1;break}}else if(!(u===m||o(u,m,r,n,i))){l=!1;break}}return i.delete(e),i.delete(t),l}var ea=RO;function NO(e){var t=-1,r=Array(e.size);return e.forEach(function(n,o){r[++t]=[o,n]}),r}var GC=NO;function TO(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var HC=TO;var MO=1,UO=2,OO="[object Boolean]",PO="[object Date]",GO="[object Error]",HO="[object Map]",qO="[object Number]",LO="[object RegExp]",KO="[object Set]",JO="[object String]",VO="[object Symbol]",zO="[object ArrayBuffer]",YO="[object DataView]",qC=at?at.prototype:void 0,Xg=qC?qC.valueOf:void 0;function WO(e,t,r,n,o,i,s){switch(r){case YO:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case zO:return!(e.byteLength!=t.byteLength||!i(new uo(e),new uo(t)));case OO:case PO:case qO:return er(+e,+t);case GO:return e.name==t.name&&e.message==t.message;case LO:case JO:return e==t+"";case HO:var a=GC;case KO:var A=n&MO;if(a||(a=HC),e.size!=t.size&&!A)return!1;var c=s.get(e);if(c)return c==t;n|=UO,s.set(e,t);var g=ea(a(e),a(t),n,o,i,s);return s.delete(e),g;case VO:if(Xg)return Xg.call(e)==Xg.call(t)}return!1}var LC=WO;var jO=1,XO=Object.prototype,ZO=XO.hasOwnProperty;function $O(e,t,r,n,o,i){var s=r&jO,a=ui(e),A=a.length,c=ui(t),g=c.length;if(A!=g&&!s)return!1;for(var d=A;d--;){var l=a[d];if(!(s?l in t:ZO.call(t,l)))return!1}var f=i.get(e),u=i.get(t);if(f&&u)return f==t&&u==e;var m=!0;i.set(e,t),i.set(t,e);for(var p=s;++d<A;){l=a[d];var C=e[l],Q=t[l];if(n)var R=s?n(Q,C,l,t,e,i):n(C,Q,l,e,t,i);if(!(R===void 0?C===Q||o(C,Q,r,n,i):R)){m=!1;break}p||(p=l=="constructor")}if(m&&!p){var B=e.constructor,D=t.constructor;B!=D&&"constructor"in e&&"constructor"in t&&!(typeof B=="function"&&B instanceof B&&typeof D=="function"&&D instanceof D)&&(m=!1)}return i.delete(e),i.delete(t),m}var KC=$O;var eP=1,JC="[object Arguments]",VC="[object Array]",ta="[object Object]",tP=Object.prototype,zC=tP.hasOwnProperty;function rP(e,t,r,n,o,i){var s=we(e),a=we(t),A=s?VC:Ht(e),c=a?VC:Ht(t);A=A==JC?ta:A,c=c==JC?ta:c;var g=A==ta,d=c==ta,l=A==c;if(l&&Gt(e)){if(!Gt(t))return!1;s=!0,g=!1}if(l&&!g)return i||(i=new ir),s||Jr(e)?ea(e,t,r,n,o,i):LC(e,t,A,r,n,o,i);if(!(r&eP)){var f=g&&zC.call(e,"__wrapped__"),u=d&&zC.call(t,"__wrapped__");if(f||u){var m=f?e.value():e,p=u?t.value():t;return i||(i=new ir),o(m,p,r,n,i)}}return l?(i||(i=new ir),KC(e,t,r,n,o,i)):!1}var YC=rP;function WC(e,t,r,n,o){return e===t?!0:e==null||t==null||!Ue(e)&&!Ue(t)?e!==e&&t!==t:YC(e,t,r,n,WC,o)}var ra=WC;var nP=1,oP=2;function iP(e,t,r,n){var o=r.length,i=o,s=!n;if(e==null)return!i;for(e=Object(e);o--;){var a=r[o];if(s&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++o<i;){a=r[o];var A=a[0],c=e[A],g=a[1];if(s&&a[2]){if(c===void 0&&!(A in e))return!1}else{var d=new ir;if(n)var l=n(c,g,A,e,t,d);if(!(l===void 0?ra(g,c,nP|oP,n,d):l))return!1}}return!0}var jC=iP;function sP(e){return e===e&&!Ie(e)}var na=sP;function aP(e){for(var t=Vr(e),r=t.length;r--;){var n=t[r],o=e[n];t[r]=[n,o,na(o)]}return t}var XC=aP;function AP(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var oa=AP;function cP(e){var t=XC(e);return t.length==1&&t[0][2]?oa(t[0][0],t[0][1]):function(r){return r===e||jC(r,e,t)}}var ZC=cP;function gP(e,t){return e!=null&&t in Object(e)}var $C=gP;function lP(e,t,r){t=Xr(t,e);for(var n=-1,o=t.length,i=!1;++n<o;){var s=or(t[n]);if(!(i=e!=null&&r(e,s)))break;e=e[s]}return i||++n!=o?i:(o=e==null?0:e.length,!!o&&ro(o)&&Lr(s,o)&&(we(e)||Qr(e)))}var eB=lP;function dP(e,t){return e!=null&&eB(e,t,$C)}var tB=dP;var fP=1,uP=2;function IP(e,t){return oo(e)&&na(t)?oa(or(e),t):function(r){var n=jh(r,e);return n===void 0&&n===t?tB(r,e):ra(t,n,fP|uP)}}var rB=IP;function pP(e){return function(t){return t?.[e]}}var nB=pP;function mP(e){return function(t){return Ao(t,e)}}var oB=mP;function hP(e){return oo(e)?nB(or(e)):oB(e)}var iB=hP;function CP(e){return typeof e=="function"?e:e==null?Xn:typeof e=="object"?we(e)?rB(e[0],e[1]):ZC(e):iB(e)}var sB=CP;function BP(e){return function(t,r,n){for(var o=-1,i=Object(t),s=n(t),a=s.length;a--;){var A=s[e?a:++o];if(r(i[A],A,i)===!1)break}return t}}var aB=BP;var EP=aB(),AB=EP;var yP=function(){return xe.Date.now()},ia=yP;var QP="Expected a function",wP=Math.max,SP=Math.min;function xP(e,t,r){var n,o,i,s,a,A,c=0,g=!1,d=!1,l=!0;if(typeof e!="function")throw new TypeError(QP);t=Jg(t)||0,Ie(r)&&(g=!!r.leading,d="maxWait"in r,i=d?wP(Jg(r.maxWait)||0,t):i,l="trailing"in r?!!r.trailing:l);function f(E){var w=n,y=o;return n=o=void 0,c=E,s=e.apply(y,w),s}function u(E){return c=E,a=setTimeout(C,t),g?f(E):s}function m(E){var w=E-A,y=E-c,M=t-w;return d?SP(M,i-y):M}function p(E){var w=E-A,y=E-c;return A===void 0||w>=t||w<0||d&&y>=i}function C(){var E=ia();if(p(E))return Q(E);a=setTimeout(C,m(E))}function Q(E){return a=void 0,l&&n?f(E):(n=o=void 0,s)}function R(){a!==void 0&&clearTimeout(a),c=0,n=A=o=a=void 0}function B(){return a===void 0?s:Q(ia())}function D(){var E=ia(),w=p(E);if(n=arguments,o=this,A=E,w){if(a===void 0)return u(A);if(d)return clearTimeout(a),a=setTimeout(C,t),f(A)}return a===void 0&&(a=setTimeout(C,t)),s}return D.cancel=R,D.flush=B,D}var Bt=xP;function bP(e,t,r){(r!==void 0&&!er(e[t],r)||r===void 0&&!(t in e))&&eo(e,t,r)}var Ii=bP;function DP(e){return Ue(e)&&rr(e)}var cB=DP;function kP(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var pi=kP;function FP(e){return tr(e,nr(e))}var gB=FP;function _P(e,t,r,n,o,i,s){var a=pi(e,r),A=pi(t,r),c=s.get(A);if(c){Ii(e,r,c);return}var g=i?i(a,A,r+"",e,t,s):void 0,d=g===void 0;if(d){var l=we(A),f=!l&&Gt(A),u=!l&&!f&&Jr(A);g=A,l||f||u?we(a)?g=a:cB(a)?g=Us(a):f?(d=!1,g=qs(A,!0)):u?(d=!1,g=js(A,!0)):g=[]:go(A)||Qr(A)?(g=a,Qr(a)?g=gB(a):(!Ie(a)||Zn(a))&&(g=Xs(A))):d=!1}d&&(s.set(A,g),o(g,A,n,i,s),s.delete(A)),Ii(e,r,g)}var lB=_P;function dB(e,t,r,n,o){e!==t&&AB(t,function(i,s){if(o||(o=new ir),Ie(i))lB(e,t,s,r,dB,n,o);else{var a=n?n(pi(e,s),i,s+"",e,t,o):void 0;a===void 0&&(a=i),Ii(e,s,a)}},nr)}var fB=dB;var vP=mh(function(e,t,r,n){fB(e,t,r,n)}),mi=vP;var RP="[object Map]",NP="[object Set]",TP=Object.prototype,MP=TP.hasOwnProperty;function UP(e){if(e==null)return!0;if(rr(e)&&(we(e)||typeof e=="string"||typeof e.splice=="function"||Gt(e)||Jr(e)||Qr(e)))return!e.length;var t=Ht(e);if(t==RP||t==NP)return!e.size;if(Kr(e))return!Gs(e).length;for(var r in e)if(MP.call(e,r))return!1;return!0}var hi=UP;function OP(e,t,r,n){if(!Ie(e))return e;t=Xr(t,e);for(var o=-1,i=t.length,s=i-1,a=e;a!=null&&++o<i;){var A=or(t[o]),c=r;if(A==="__proto__"||A==="constructor"||A==="prototype")return e;if(o!=s){var g=a[A];c=n?n(g,A,a):void 0,c===void 0&&(c=Ie(g)?g:Lr(t[o+1])?[]:{})}to(a,A,c),a=a[A]}return e}var uB=OP;function PP(e,t,r){for(var n=-1,o=t.length,i={};++n<o;){var s=t[n],a=Ao(e,s);r(a,s)&&uB(i,Xr(s,e),a)}return i}var IB=PP;function GP(e,t){if(e==null)return{};var r=Ns(Vs(e),function(n){return[n]});return t=sB(t),IB(e,r,function(n,o){return t(n,o[0])})}var Zg=GP;var Jt=J(ie());var qB=J(ie());var $g=function(e,t){return $g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},$g(e,t)};function Zr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");$g(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function $r(e,t,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function a(g){try{c(n.next(g))}catch(d){s(d)}}function A(g){try{c(n.throw(g))}catch(d){s(d)}}function c(g){g.done?i(g.value):o(g.value).then(a,A)}c((n=n.apply(e,t||[])).next())})}function sr(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(g){return A([c,g])}}function A(c){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(r=0)),r;)try{if(n=1,o&&(i=c[0]&2?o.return:c[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,c[1])).done)return i;switch(o=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,o=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(g){c=[6,g],o=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Et(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ar(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],s;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return i}function Ar(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,i;n<o;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function yn(e){return this instanceof yn?(this.v=e,this):new yn(e)}function pB(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(f){return function(u){return Promise.resolve(u).then(f,d)}}function a(f,u){n[f]&&(o[f]=function(m){return new Promise(function(p,C){i.push([f,m,p,C])>1||A(f,m)})},u&&(o[f]=u(o[f])))}function A(f,u){try{c(n[f](u))}catch(m){l(i[0][3],m)}}function c(f){f.value instanceof yn?Promise.resolve(f.value.v).then(g,d):l(i[0][2],f)}function g(f){A("next",f)}function d(f){A("throw",f)}function l(f,u){f(u),i.shift(),i.length&&A(i[0][0],i[0][1])}}function mB(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Et=="function"?Et(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(s){return new Promise(function(a,A){s=e[i](s),o(a,A,s.done,s.value)})}}function o(i,s,a,A){Promise.resolve(A).then(function(c){i({value:c,done:a})},s)}}function ge(e){return typeof e=="function"}function sa(e){var t=function(n){Error.call(n),n.stack=new Error().stack},r=e(t);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var aa=sa(function(e){return function(r){e(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(n,o){return o+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function Ci(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var po=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,r,n,o,i;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var a=Et(s),A=a.next();!A.done;A=a.next()){var c=A.value;c.remove(this)}}catch(m){t={error:m}}finally{try{A&&!A.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}else s.remove(this);var g=this.initialTeardown;if(ge(g))try{g()}catch(m){i=m instanceof aa?m.errors:[m]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var l=Et(d),f=l.next();!f.done;f=l.next()){var u=f.value;try{hB(u)}catch(m){i=i??[],m instanceof aa?i=Ar(Ar([],ar(i)),ar(m.errors)):i.push(m)}}}catch(m){n={error:m}}finally{try{f&&!f.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}}}if(i)throw new aa(i)}},e.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)hB(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(t)}},e.prototype._hasParent=function(t){var r=this._parentage;return r===t||Array.isArray(r)&&r.includes(t)},e.prototype._addParent=function(t){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(t),r):r?[r,t]:t},e.prototype._removeParent=function(t){var r=this._parentage;r===t?this._parentage=null:Array.isArray(r)&&Ci(r,t)},e.prototype.remove=function(t){var r=this._finalizers;r&&Ci(r,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}();var el=po.EMPTY;function Aa(e){return e instanceof po||e&&"closed"in e&&ge(e.remove)&&ge(e.add)&&ge(e.unsubscribe)}function hB(e){ge(e)?e():e.unsubscribe()}var qt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var mo={setTimeout:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=mo.delegate;return o?.setTimeout?o.setTimeout.apply(o,Ar([e,t],ar(r))):setTimeout.apply(void 0,Ar([e,t],ar(r)))},clearTimeout:function(e){var t=mo.delegate;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function ca(e){mo.setTimeout(function(){var t=qt.onUnhandledError;if(t)t(e);else throw e})}function tl(){}var CB=function(){return rl("C",void 0,void 0)}();function BB(e){return rl("E",void 0,e)}function EB(e){return rl("N",e,void 0)}function rl(e,t,r){return{kind:e,value:t,error:r}}var Qn=null;function ho(e){if(qt.useDeprecatedSynchronousErrorHandling){var t=!Qn;if(t&&(Qn={errorThrown:!1,error:null}),e(),t){var r=Qn,n=r.errorThrown,o=r.error;if(Qn=null,n)throw o}}else e()}function yB(e){qt.useDeprecatedSynchronousErrorHandling&&Qn&&(Qn.errorThrown=!0,Qn.error=e)}var Bi=function(e){Zr(t,e);function t(r){var n=e.call(this)||this;return n.isStopped=!1,r?(n.destination=r,Aa(r)&&r.add(n)):n.destination=KP,n}return t.create=function(r,n,o){return new wn(r,n,o)},t.prototype.next=function(r){this.isStopped?ol(EB(r),this):this._next(r)},t.prototype.error=function(r){this.isStopped?ol(BB(r),this):(this.isStopped=!0,this._error(r))},t.prototype.complete=function(){this.isStopped?ol(CB,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(r){this.destination.next(r)},t.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(po);var HP=Function.prototype.bind;function nl(e,t){return HP.call(e,t)}var qP=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var r=this.partialObserver;if(r.next)try{r.next(t)}catch(n){ga(n)}},e.prototype.error=function(t){var r=this.partialObserver;if(r.error)try{r.error(t)}catch(n){ga(n)}else ga(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(r){ga(r)}},e}(),wn=function(e){Zr(t,e);function t(r,n,o){var i=e.call(this)||this,s;if(ge(r)||!r)s={next:r??void 0,error:n??void 0,complete:o??void 0};else{var a;i&&qt.useDeprecatedNextContext?(a=Object.create(r),a.unsubscribe=function(){return i.unsubscribe()},s={next:r.next&&nl(r.next,a),error:r.error&&nl(r.error,a),complete:r.complete&&nl(r.complete,a)}):s=r}return i.destination=new qP(s),i}return t}(Bi);function ga(e){qt.useDeprecatedSynchronousErrorHandling?yB(e):ca(e)}function LP(e){throw e}function ol(e,t){var r=qt.onStoppedNotification;r&&mo.setTimeout(function(){return r(e,t)})}var KP={closed:!0,next:tl,error:LP,complete:tl};var Co=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function QB(e){return e}function wB(e){return e.length===0?QB:e.length===1?e[0]:function(r){return e.reduce(function(n,o){return o(n)},r)}}var kt=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(t,r,n){var o=this,i=VP(t)?t:new wn(t,r,n);return ho(function(){var s=o,a=s.operator,A=s.source;i.add(a?a.call(i,A):A?o._subscribe(i):o._trySubscribe(i))}),i},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(r){t.error(r)}},e.prototype.forEach=function(t,r){var n=this;return r=SB(r),new r(function(o,i){var s=new wn({next:function(a){try{t(a)}catch(A){i(A),s.unsubscribe()}},error:i,complete:o});n.subscribe(s)})},e.prototype._subscribe=function(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)},e.prototype[Co]=function(){return this},e.prototype.pipe=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return wB(t)(this)},e.prototype.toPromise=function(t){var r=this;return t=SB(t),new t(function(n,o){var i;r.subscribe(function(s){return i=s},function(s){return o(s)},function(){return n(i)})})},e.create=function(t){return new e(t)},e}();function SB(e){var t;return(t=e??qt.Promise)!==null&&t!==void 0?t:Promise}function JP(e){return e&&ge(e.next)&&ge(e.error)&&ge(e.complete)}function VP(e){return e&&e instanceof Bi||JP(e)&&Aa(e)}function zP(e){return ge(e?.lift)}function la(e){return function(t){if(zP(t))return t.lift(function(r){try{return e(r,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function xB(e,t,r,n,o){return new YP(e,t,r,n,o)}var YP=function(e){Zr(t,e);function t(r,n,o,i,s,a){var A=e.call(this,r)||this;return A.onFinalize=s,A.shouldUnsubscribe=a,A._next=n?function(c){try{n(c)}catch(g){r.error(g)}}:e.prototype._next,A._error=i?function(c){try{i(c)}catch(g){r.error(g)}finally{this.unsubscribe()}}:e.prototype._error,A._complete=o?function(){try{o()}catch(c){r.error(c)}finally{this.unsubscribe()}}:e.prototype._complete,A}return t.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&((r=this.onFinalize)===null||r===void 0||r.call(this))}},t}(Bi);var bB=sa(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}});var il=function(e){Zr(t,e);function t(){var r=e.call(this)||this;return r.closed=!1,r.currentObservers=null,r.observers=[],r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return t.prototype.lift=function(r){var n=new DB(this,this);return n.operator=r,n},t.prototype._throwIfClosed=function(){if(this.closed)throw new bB},t.prototype.next=function(r){var n=this;ho(function(){var o,i;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var s=Et(n.currentObservers),a=s.next();!a.done;a=s.next()){var A=a.value;A.next(r)}}catch(c){o={error:c}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}}})},t.prototype.error=function(r){var n=this;ho(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=r;for(var o=n.observers;o.length;)o.shift().error(r)}})},t.prototype.complete=function(){var r=this;ho(function(){if(r._throwIfClosed(),!r.isStopped){r.isStopped=!0;for(var n=r.observers;n.length;)n.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(r){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,r)},t.prototype._subscribe=function(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)},t.prototype._innerSubscribe=function(r){var n=this,o=this,i=o.hasError,s=o.isStopped,a=o.observers;return i||s?el:(this.currentObservers=null,a.push(r),new po(function(){n.currentObservers=null,Ci(a,r)}))},t.prototype._checkFinalizedStatuses=function(r){var n=this,o=n.hasError,i=n.thrownError,s=n.isStopped;o?r.error(i):s&&r.complete()},t.prototype.asObservable=function(){var r=new kt;return r.source=this,r},t.create=function(r,n){return new DB(r,n)},t}(kt);var DB=function(e){Zr(t,e);function t(r,n){var o=e.call(this)||this;return o.destination=r,o.source=n,o}return t.prototype.next=function(r){var n,o;(o=(n=this.destination)===null||n===void 0?void 0:n.next)===null||o===void 0||o.call(n,r)},t.prototype.error=function(r){var n,o;(o=(n=this.destination)===null||n===void 0?void 0:n.error)===null||o===void 0||o.call(n,r)},t.prototype.complete=function(){var r,n;(n=(r=this.destination)===null||r===void 0?void 0:r.complete)===null||n===void 0||n.call(r)},t.prototype._subscribe=function(r){var n,o;return(o=(n=this.source)===null||n===void 0?void 0:n.subscribe(r))!==null&&o!==void 0?o:el},t}(il);var kB=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function FB(e){return ge(e?.then)}function _B(e){return ge(e[Co])}function vB(e){return Symbol.asyncIterator&&ge(e?.[Symbol.asyncIterator])}function RB(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function WP(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var NB=WP();function TB(e){return ge(e?.[NB])}function MB(e){return pB(this,arguments,function(){var r,n,o,i;return sr(this,function(s){switch(s.label){case 0:r=e.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,yn(r.read())];case 3:return n=s.sent(),o=n.value,i=n.done,i?[4,yn(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,yn(o)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return r.releaseLock(),[7];case 10:return[2]}})})}function UB(e){return ge(e?.getReader)}function sl(e){if(e instanceof kt)return e;if(e!=null){if(_B(e))return jP(e);if(kB(e))return XP(e);if(FB(e))return ZP(e);if(vB(e))return OB(e);if(TB(e))return $P(e);if(UB(e))return eG(e)}throw RB(e)}function jP(e){return new kt(function(t){var r=e[Co]();if(ge(r.subscribe))return r.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function XP(e){return new kt(function(t){for(var r=0;r<e.length&&!t.closed;r++)t.next(e[r]);t.complete()})}function ZP(e){return new kt(function(t){e.then(function(r){t.closed||(t.next(r),t.complete())},function(r){return t.error(r)}).then(null,ca)})}function $P(e){return new kt(function(t){var r,n;try{for(var o=Et(e),i=o.next();!i.done;i=o.next()){var s=i.value;if(t.next(s),t.closed)return}}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}t.complete()})}function OB(e){return new kt(function(t){tG(e,t).catch(function(r){return t.error(r)})})}function eG(e){return OB(MB(e))}function tG(e,t){var r,n,o,i;return $r(this,void 0,void 0,function(){var s,a;return sr(this,function(A){switch(A.label){case 0:A.trys.push([0,5,6,11]),r=mB(e),A.label=1;case 1:return[4,r.next()];case 2:if(n=A.sent(),!!n.done)return[3,4];if(s=n.value,t.next(s),t.closed)return[2];A.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=A.sent(),o={error:a},[3,11];case 6:return A.trys.push([6,,9,10]),n&&!n.done&&(i=r.return)?[4,i.call(r)]:[3,8];case 7:A.sent(),A.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function PB(e,t){return la(function(r,n){var o=0;r.subscribe(xB(n,function(i){n.next(e.call(t,i,o++))}))})}var rG=Array.isArray;function nG(e,t){return rG(t)?e.apply(void 0,Ar([],ar(t))):e(t)}function GB(e){return PB(function(t){return nG(e,t)})}function da(e,t,r){return r?da(e,t).pipe(GB(r)):new kt(function(n){var o=function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];return n.next(s.length===1?s[0]:s)},i=e(o);return ge(t)?function(){return t(o,i)}:void 0})}function Al(e){e===void 0&&(e={});var t=e.connector,r=t===void 0?function(){return new il}:t,n=e.resetOnError,o=n===void 0?!0:n,i=e.resetOnComplete,s=i===void 0?!0:i,a=e.resetOnRefCountZero,A=a===void 0?!0:a;return function(c){var g,d,l,f=0,u=!1,m=!1,p=function(){d?.unsubscribe(),d=void 0},C=function(){p(),g=l=void 0,u=m=!1},Q=function(){var R=g;C(),R?.unsubscribe()};return la(function(R,B){f++,!m&&!u&&p();var D=l=l??r();B.add(function(){f--,f===0&&!m&&!u&&(d=al(Q,A))}),D.subscribe(B),!g&&f>0&&(g=new wn({next:function(E){return D.next(E)},error:function(E){m=!0,p(),d=al(C,o,E),D.error(E)},complete:function(){u=!0,p(),d=al(C,s),D.complete()}}),sl(R).subscribe(g))})(c)}}function al(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];if(t===!0){e();return}if(t!==!1){var o=new wn({next:function(){o.unsubscribe(),e()}});return sl(t.apply(void 0,Ar([],ar(r)))).subscribe(o)}}var Sn=J(ie());async function W(e,t){let r=await Sn.default.storage.local.get(e);return typeof e=="string"?Object.hasOwn(r,e)?r[e]:t:r}async function en(e,t){return typeof e=="string"?Sn.default.storage.local.set({[e]:t}):Sn.default.storage.local.set(e)}var cl=da(e=>Sn.default.storage.local.onChanged.addListener(e),e=>Sn.default.runtime.id&&Sn.default.storage.local.onChanged.removeListener(e),e=>e).pipe(Al({resetOnRefCountZero:!0}));var gl=qB.default.runtime.getManifest(),ze=gl.version_name===gl.version+"-e",LB="Sider";var Ei=ze?"dhoenijjpgpeimemopealfcbiecgceod":"difoiogjjojoaoomphldepapgpbgkhkb",fa=`ChitChat_${ze?"Edge":"Chrome"}_Ext`,je=gl.version,KB=["gpmljinohlbfgmeoaeceoajachkabijo","nlipoenfbbikpbjkfpfillcgkoblgpmj"];var JB=["translate"];var VB={name:"Robot",avatar:"",gender:"unknown",platform:"system",requireVIP:!1};var ll="gpt-3.5-turbo";var oG={dev:"",test:"",preview:"https://preview.sider.ai",prod:"https://sider.ai"},iG={dev:"",test:"",preview:"sider.ai",prod:"sider.ai"},HB=oG.prod,le={origin:HB,api:`${HB}/api`,domain:iG.prod},zB="https://www.google-analytics.com/mp/collect",YB="G-0PRFKME4HP";var WB="6FX_tIISST2SsnSx29yQRg";var Lt={English:"en","Chinese(Simplified)":"zh_CN","Chinese(Traditional)":"zh_TW",Spanish:"es",French:"fr",Japanese:"ja",German:"de",Portuguese:"pt",Arabic:"ar",Russian:"ru",Italian:"it",Korean:"ko",Hindi:"hi",Dutch:"nl",Polish:"pl",Amharic:"am",Bulgarian:"bg",Bengali:"bn",Catalan:"ca",Czech:"cs",Danish:"da",Greek:"el",Estonian:"et",Persian:"fa",Finnish:"fi",Filipino:"fil",Gujarati:"gu",Hebrew:"he",Croatian:"hr",Hungarian:"hu",Indonesian:"id",Kannada:"kn",Lithuanian:"lt",Latvian:"lv",Malayalam:"ml",Marathi:"mr",Malay:"ms",Norwegian:"no",Romanian:"ro",Slovak:"sk",Slovenian:"sl",Serbian:"sr",Swedish:"sv",Swahili:"sw",Tamil:"ta",Telugu:"te",Thai:"th",Turkish:"tr",Ukrainian:"uk",Urdu:"ur",Vietnamese:"vi"},sG={English:"en","English (Australia)":"en_AU","English (Canada)":"en_CA","English (India)":"en_IN","English (UK)":"en_UK","English (US)":"en_US","Chinese (Simplified)":"zh_CN","Chinese (Traditional)":"zh_TW",Spanish:"es","Spanish (Argentina)":"es_AR","Spanish (Colombia)":"es_CO","Spanish (Spain)":"es_ES","Spanish (Mexico)":"es_MX",French:"fr",Japanese:"ja",German:"de",Portuguese:"pt","Portuguese (Brazil)":"pt_BR","Portuguese (Portugal)":"pt_PT",Arabic:"ar","Arabic (Egypt)":"ar_EG","Arabic (Saudi)":"ar_SA",Russian:"ru",Italian:"it",Korean:"ko",Hindi:"hi",Dutch:"nl",Polish:"pl",Amharic:"am",Bengali:"bn",Bulgarian:"bg",Catalan:"ca",Croatian:"hr",Czech:"cs",Danish:"da",Estonian:"et",Filipino:"fil",Finnish:"fi",Greek:"el",Gujarati:"gu",Hebrew:"he",Hungarian:"hu",Indonesian:"id",Kannada:"kn",Latvian:"lv",Lithuanian:"lt",Malay:"ms",Malayalam:"ml",Marathi:"mr",Norwegian:"no",Persian:"fa",Romanian:"ro",Serbian:"sr",Slovak:"sk",Slovenian:"sl",Swahili:"sw",Swedish:"sv",Tamil:"ta",Telugu:"te",Thai:"th",Turkish:"tr",Ukrainian:"uk",Urdu:"ur",Vietnamese:"vi"};var dl=Object.entries(Lt).reduce((e,[t,r])=>(e[r]=t,e),{}),ua=Object.entries(sG).reduce((e,[t,r])=>(e[r]=t,e),{});var yi="provider:siderApi",b7=`${yi}:SelectedModels`;async function jB(){let e="provider:gpt3",[t="siderApi",r]=await Promise.all([W("provider"),W(e)]);return{provider:t,configs:{gpt3:r}}}var xr={login:`${le.origin}/login`,openaiChat:"https://chatgpt.com",openaiLogin:"https://platform.openai.com/login",openaiSignup:"https://platform.openai.com/signup",openaiApiKey:"https://platform.openai.com/account/api-keys",openaiApiSession:"https://chatgpt.com/api/auth/session",edgeStore:"https://microsoftedge.microsoft.com/addons/detail/sider-ai-sidebar/dhoenijjpgpeimemopealfcbiecgceod",chromeStore:"https://chromewebstore.google.com/detail/sider-chatgpt-sidebar-+-v/difoiogjjojoaoomphldepapgpbgkhkb",chromeStoreReview:"https://chromewebstore.google.com/detail/sider-chatgpt-sidebar-+-v/difoiogjjojoaoomphldepapgpbgkhkb/reviews",weChatQrCode:"https://sider.ai/resource/weixin/qrcode.jpeg",producthuntPromoteApi:"https://sider.ai/resource/promotion/extension-promote.json",promoteConfigApi:"https://sider.ai/resource/promotion/promote-config.json"};var aG={key:"j",keyCode:74,metaKey:!0,ctrlKey:!0,altKey:!1,shiftKey:!1,disabled:!1},AG={key:"a",keyCode:65,metaKey:!1,ctrlKey:!1,altKey:!0,shiftKey:!1,disabled:!1};var Ia={"provider:gpt3":{apiKey:"",customURL:"",enableCustomURL:!0,model:"gpt-3.5-turbo"},language:"zh_CN",theme:"light",isShowSearch:!1,triggerMode:"questionMark",submitShortcut:"Enter",sidebarShortcut:{altKey:!1,ctrlKey:!0,key:"O",keyCode:79,metaKey:!1,shiftKey:!0},sidebarLocation:"right",sidebarDisplayOption:"overlay",sidebarFab:!0,sidebarFabDisabledHost:{},selectionSidebarFab:!0,sidebarOnStartup:"new",showSelectedTextInSidebarEnable:!0,chatVisiblePromptKeys:[],readVisiblePromptKeys:[],writeVisiblePromptKeys:[],quickActionDispalyModifier:"",quickActionEnable:!0,quickActionSelectionEnable:!0,quickActionInputSelectionEnable:!0,translatorShortcut:aG,translatorPinnedTemplates:[],quickActionPinnedReading:[],quickActionPinnedWriting:[],quickActionInputIconEnable:!0,quickActionInputIconDisabledHost:{},translatorHostConfig:{"fab-config.example.com":{favicon:"",enable:!0}},enableWebAssistantVideo:!0,enableBilingualSubtitle:!0,enableWebAssistantArticle:!0,enableWebAssistantQA:!0,enableWebAssistantEmail:!0,enableWebAssistantCode:!0,enableWebAssistantImage:!0,enableLinkPreview:!0,webAssistantImageDisabledHost:{},pageTranslationService:"free",pageTranslationLastTargetLang:"",pageTranslationAutoEn:!0,pageTranslationDisplayStyle:"none",pageTranslationShowOriginalText:!0,pageTranslationNeverHost:{},pageTranslateShortcut:AG,inputTranslationEnable:!1,inputTranslationTargetLang:"",inputTranslationTriggerKey:" ",inputTranslationDisabledHost:{}},XB={device:"free",login:"free",premium_starter:"starter",premium:"basic",premium_pro:"pro",premium_ultra:"ultra",premium_ultra_mobile:"pocket"};var D7=1024*1024*10,k7=1024*1024*100;var ZB="chatgpt:img:",$B=["g-BlafpMvzd","g-nleealfRT"],eE={"g-BlafpMvzd":{flair:{kind:"sidebar_keep"},resource:{files:[],gizmo:{appeal_info:null,author:{display_name:"sider.ai",is_verified:!0,link_to:"https://sider.ai",selected_display:"website",user_id:"user-inve40FQN9r2Tg4j1mlXSMQb",will_receive_support_emails:null},created_at:"2024-01-10T07:08:34.362699+00:00",display:{categories:["productivity"],description:"Top browser expert! Provide 3X accurate responses. Read any links: PDFs, videos, etc. Create 10+ types of files, like mind maps & spreadsheets, from search-derived contents.",name:"Browser Pro",profile_picture_url:"https://files.oaiusercontent.com/file-HKO0TEnSmvIb1M9G1HUyuAZJ?se=2123-12-27T11%3A10%3A22Z&sp=r&sv=2021-08-06&sr=b&rscc=max-age%3D1209600%2C%20immutable&rscd=attachment%3B%20filename%3DFrame%2520616.png&sig=fJSm%2BvONY8TkDO8IopKdwun%2BWeW2Wo9hti5JG%2Bb5Bj4%3D",prompt_starters:["Search for latest AI research outcomes.","Read this link and summarize the key points.","Create a mind map on ChatGPT prompt skills.","Type E to show all extensions."],welcome_message:"Hi, I'm Browser+! How can I assist you today?"},id:"g-BlafpMvzd",instructions:null,last_interacted_at:"2024-01-20T07:48:12.598861+00:00",live_version:null,model:null,organization_id:"org-i9SD3zX6OqRLnBDt97AtVHHk",settings:null,share_recipient:"marketplace",sharing_targets:null,short_url:"g-BlafpMvzd-browser-pro",tags:["public","reportable","uses_function_calls","pinned"],training_disabled:null,updated_at:"2024-01-20T11:10:24.859178+00:00",vanity_metrics:{created_ago_str:"last week",num_conversations:1066,num_conversations_str:"1066",num_pins:0,num_users_interacted_with:0},version:null,voice:{id:"ember"},workspace_approval_date:null,workspace_approved:null,workspace_id:null},product_features:{attachments:{accepted_mime_types:["application/json","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/javascript","text/plain","text/x-c++","text/x-script.python","text/x-typescript","text/markdown","application/pdf","text/x-sh","text/x-csharp","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/x-latext","text/x-tex","text/html","text/x-php","text/x-java","text/x-c","text/x-ruby","application/msword"],can_accept_all_mime_types:!0,image_mime_types:["image/webp","image/gif","image/png","image/jpeg"],type:"retrieval"}},tools:[{id:"gzm_cnf_jSWQ9Aj5eNZu3L3mS3bzGxGI~gzm_tool_l6SR7MvRO40YmUGDO8JfhnU8",metadata:{action_id:"g-d08200cb39473e72a1058ed24f66ff9838cf07c1",auth:{type:"none"},domain:"actions.sider.ai",json_schema:null,privacy_policy_url:"https://sider.ai/policies/privacy",raw_spec:""},settings:null,type:"plugins_prototype"},{id:"gzm_cnf_p4GmqNKla5EIJWaJ78Qjnq0B~gzm_tool_wtkmQ099hG3LZNbfZ6jXBMfN",metadata:null,settings:null,type:"dalle"}]}},"g-nleealfRT":{flair:{kind:"sidebar_keep"},resource:{files:[],gizmo:{appeal_info:null,author:{display_name:"awesomegpts.ai",is_verified:!0,link_to:"https://awesomegpts.ai",selected_display:"website",user_id:"user-MV1EPMI80LBUBFXL3yqj7TxP",will_receive_support_emails:null},created_at:"2023-11-15T09:08:04.569234+00:00",display:{categories:["lifestyle"],description:"Shop Smarter, Save Bigger! Quickly find top-rated gems and the best deals in the shopping sea!",name:"Shopping GPT",profile_picture_url:"https://files.oaiusercontent.com/file-epOlIRgMgGrqAHUd0l3Oq2HP?se=2123-12-22T06%3A43%3A25Z&sp=r&sv=2021-08-06&sr=b&rscc=max-age%3D1209600%2C%20immutable&rscd=attachment%3B%20filename%3DFrame%2520613.png&sig=ryqJXchYBS%2BMGC2aa4EPU6zGnOR93RgQoBXoV12b5KY%3D",prompt_starters:["Compare MacBook series products in a table","Locate nearby headphone retailers","Find sofas with top reviews","Find the cheapest Apple Watch Series 9"],welcome_message:""},id:"g-nleealfRT",instructions:null,last_interacted_at:"2024-01-20T06:16:29.030796+00:00",live_version:null,model:null,organization_id:"org-1uI21Op8M017HxHB8qTGnaym",settings:null,share_recipient:"marketplace",sharing_targets:null,short_url:"g-nleealfRT-shopping-gpt",tags:["public","reportable","uses_function_calls","pinned"],training_disabled:null,updated_at:"2024-01-20T02:52:49.252542+00:00",vanity_metrics:{created_ago_str:"2 months ago",num_conversations:341,num_conversations_str:"341",num_pins:0,num_users_interacted_with:0},version:null,voice:{id:"ember"},workspace_approval_date:null,workspace_approved:null,workspace_id:null},product_features:{attachments:{accepted_mime_types:["text/x-csharp","text/javascript","application/json","text/x-php","application/pdf","text/x-c","application/x-latext","text/html","text/x-sh","text/markdown","text/x-script.python","application/msword","application/vnd.openxmlformats-officedocument.presentationml.presentation","text/x-typescript","text/x-c++","text/x-ruby","text/plain","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/x-tex","text/x-java"],can_accept_all_mime_types:!0,image_mime_types:["image/gif","image/png","image/jpeg","image/webp"],type:"retrieval"}},tools:[{id:"gzm_cnf_mEdggaHyWwxFTAlH5vuabKsd~gzm_tool_sJQMJJ1tT9JqB6NizdOV6ChU",metadata:{action_id:"g-6a3d44cc7cf012a5f2222be5dadb5cc8140a15e3",auth:{type:"none"},domain:"actions.sider.ai",json_schema:null,privacy_policy_url:"https://sider.ai/policies/privacy",raw_spec:""},settings:null,type:"plugins_prototype"},{id:"gzm_cnf_gWRjhVNf1a0XZfN7oDjbgOEC~gzm_tool_YJucv3shUVUdtXn36lZJWVfs",metadata:null,settings:null,type:"browser"}]}}},tE=["thinking_mode","artifacts","search","text_to_image","data_analysis"],rE=[{name:"thinking_mode",isExperimental:!0,isPro:!0},{name:"artifacts",isExperimental:!1,isPro:!0},{name:"search",isExperimental:!1,isPro:!0},{name:"text_to_image",isExperimental:!1,isPro:!0},{name:"data_analysis",isExperimental:!1,isPro:!0}];var $=J(ie());function z(e){return $.default.storage.local.get(e)}async function N(e){return $.default.storage.local.set(e)}async function Ge(e){return $.default.storage.local.remove(e)}function fl(e,t,r){return typeof e=="string"&&(e=[e]),cG($.default.storage.local.onChanged,n=>{for(let o of e)if(o in n){t(e.reduce((i,s)=>(i[s]=n[s],i),{}));break}},{signal:r?.signal})}async function ul(e){if($.default.cookies){let t=await $.default.cookies.get(e);return t?.value?decodeURIComponent(t.value):""}return $.default.runtime.sendMessage({type:"GET_COOKIE",data:e})}async function Il(e){return $.default?.cookies?await $.default.cookies.set(e):$.default.runtime.sendMessage({type:"SET_COOKIE",data:e})}function pa(e){return ul({name:e,url:le.origin})}function pl(e,t,r=360){let n=Math.round(Date.now()/1e3)+86400*r;try{return Il({name:e,value:t,url:le.origin,domain:"."+new URL(le.origin).hostname,expirationDate:n,secure:!0})}catch{}}function cr(e){return $.default.tabs?$.default.tabs.create(e):$.default.runtime.sendMessage({type:"OPEN_URL_IN_NEW_TAB",details:e})}async function nE(e,t){let r=await $.default.tabs.query(e);for(let n of r)n.id&&await $.default.tabs.update(n.id,t)}async function oE(e){return $.default?.tabs?ma(e):$.default.runtime.sendMessage({type:"SWITCH_TAB",queryInfo:e})}async function ma(e,t=!1,r){let{url:n,...o}=e,i=new URL(n),s=`${i.origin}${i.pathname}*`,a=await $.default.tabs.query({url:s,...o});if(a.length)for(let A of a)A.id&&(await $.default.tabs.update(A.id,{active:!0}),t&&await $.default.tabs.reload(A.id,r));else{let{url:A,cookieStoreId:c,...g}=e,d={url:Array.isArray(A)?A[0]:A,...g};await $.default.tabs.create(d)}}function ml(e="general",t,r){let n="/options.html";if(e&&(n+=`?section=${e}`),r){let o=new URLSearchParams(r);n+=`&${o.toString()}`}t&&(t.startsWith("#")||(t="#"+t),n+=t),$.default.tabs.create({url:n})}var iE=(e,t)=>$.default.contextMenus?$.default.contextMenus.update(e,t):$.default.runtime.sendMessage({type:"UPDATE_CONTEXT_MENU",data:{id:e,opts:t}});function br(e){return $.default.runtime.getURL(e)}async function Kt(){return(await $.default.tabs.query({active:!0,currentWindow:!0}))[0]}function sE(){return $.default.tabs?$.default.extension.isAllowedFileSchemeAccess():$.default.runtime.sendMessage({type:"IS_ALLOWED_FILE_SCHEME_ACCESS"})}function aE(){return!!($.default.tabs&&$.default.tabs.query)}function cG(e,t,r={}){let n=r.signal;if(n?.aborted)return yr;e.addListener(t);let o=()=>e.removeListener(t);return n?(n.addEventListener("abort",o,{once:!0}),()=>{o(),n.removeEventListener("abort",o)}):o}async function hl(){let[e]=await $.default.tabs.query({active:!0,currentWindow:!0});if(!e)throw new Error("No active tab");let t=e.id;if(t===void 0)throw new Error("No active tab");return t}function AE(){try{let t=$.default.runtime.getManifest().side_panel.default_path,r=new URL($.default.runtime.getURL(t)),n=new URL(window.location.href);return n.pathname===r.pathname&&n.origin===r.origin}catch{return!1}}function cE(){if(!("serviceWorker"in navigator)&&!$.default.extension.getViews)return!0;try{let e=new URL(window.location.href);return browser.runtime.getManifest().background.scripts.some(r=>{let n=new URL($.default.runtime.getURL(r));return e.pathname===n.pathname&&e.origin===n.origin})}catch{return!1}}async function Qi(e,t){let{fileTextStatus:r}=await $.default.storage.local.get({fileTextStatus:{}});return e.forEach(n=>{r[n]=t}),$.default.storage.local.set({fileTextStatus:r})}var gG=J(ie());var Cl=Object.hasOwn;var lG=Array.isArray;var dG="_";function Bl(e,t){let r=e in t?t[e]:t[dG];return typeof r=="function"?r():r}function El(e){return[...new Set(e)]}var tn=(...e)=>e.join("/").replace(/([^:])\/{2,}/g,"$1/");function xn(e=1e3,t){return new Promise((r,n)=>{let o=setTimeout(r,e);t&&t.addEventListener("abort",()=>{clearTimeout(o),n(new DOMException("Aborted","AbortError"))},{once:!0})})}function yl(e){return e!=null}async function rn(e,t=1e3,r=2){let n=0;for(;;){try{return await e()}catch(o){if(r>=0&&n++>=r)throw o}await xn(t)}}function gr(e,t=0){let r=!1,n;return function(...o){return r||(r=!0,n=new Promise((i,s)=>{e(...o).then(i).catch(s).finally(async()=>{t&&await xn(t),r=!1})})),n}}function gE(e,t,r){return async function(){let n=`__debounceJob:${e}__`,o=(await z({[n]:{running:!1,startAt:0,endAt:0,retryCount:0}}))[n],{running:i=!1,startAt:s=0,endAt:a=0,retryCount:A=0}=o,c=async m=>(Object.assign(o,m),N({[n]:o})),g=Date.now(),d=a===0,l=A>0,f=l?A*1e4:r??0;if((d||g-a>=f)&&(!i||g-s>3e3)){c({startAt:g,running:!0});try{return await t(),c({endAt:Date.now(),running:!1,retryCount:0}),""}catch{throw c({endAt:Date.now(),running:!1,retryCount:A>=60?60:A+1}),new Error(e)}}if(l)throw new Error(e);return""}}function Dr(e){return new Promise((t,r)=>{let n=new FileReader;n.readAsDataURL(e),n.onload=()=>{t(n.result)},n.onerror=r})}async function lE(){return(await Jt.default.cookies.getAll({domain:".chat.openai.com"})).some(r=>r.name=="__Secure-next-auth.session-token")}function dE(e,t,r){let n=Jt.default.runtime.getURL("chat/index.html");return Jt.default.tabs.query({url:n+"*",currentWindow:!0}).then(async o=>{if(o.length){let i=await Jt.default.tabs.update(o[0].id,{active:!0});return t&&t(),i}else return r&&await r(),Jt.default.tabs.create({url:n+(e?"?reason="+e:"")})})}async function Bo(){let e=Jt.default.runtime.getURL("standalone.html?from=sidebar"),[t]=await Jt.default.tabs.query({currentWindow:!0,url:`${e}*`});return t&&t.id?Jt.default.tabs.reload(t.id).then(()=>Jt.default.tabs.update(t.id,{active:!0})):Jt.default.tabs.create({url:e})}function Ql(e){let t=e.lastIndexOf(".");return e.substring(0,t)}function ha(e,t="https://"){let r=e.trim();return/https?:\/\//.test(r)?r:t+r}function Ca(e,t,r){let n=uG(e,r);switch(t){case"<":return n===-1;case"<=":return n===-1||n===0;case"=":return n===0;case">":return n===1;case">=":return n===1||n===0;default:break}}function uG(e,t){let r=e.split(".").map(Number),n=t.split(".").map(Number),o=Math.max(r.length,n.length);for(let i=0;i<o;i++){let s=r[i]||0,a=n[i]||0;if(s>a)return 1;if(s<a)return-1}return 0}var IG=[Error,EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,AggregateError,globalThis.DOMException,globalThis.AssertionError,globalThis.SystemError].filter(Boolean).map(e=>[e.name,e]),fE=new Map(IG);var wl=class e extends Error{name="NonError";constructor(t){super(e._prepareSuperMessage(t))}static _prepareSuperMessage(t){try{return JSON.stringify(t)}catch{return String(t)}}},pG=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0},{property:"cause",enumerable:!1},{property:"errors",enumerable:!1}],Sl=new WeakSet,mG=e=>{Sl.add(e);let t=e.toJSON();return Sl.delete(e),t},IE=e=>{let t=fE.get(e)??Error;return t===AggregateError?new t([]):new t},xl=({from:e,seen:t,to:r,forceEnumerable:n,maxDepth:o,depth:i,useToJSON:s,serialize:a})=>{if(r||(Array.isArray(e)?r=[]:!a&&uE(e)?r=IE(e.name):r={}),t.push(e),i>=o)return r;if(s&&typeof e.toJSON=="function"&&!Sl.has(e))return mG(e);let A=c=>xl({from:c,seen:[...t],forceEnumerable:n,maxDepth:o,depth:i,useToJSON:s,serialize:a});for(let[c,g]of Object.entries(e)){if(g&&g instanceof Uint8Array&&g.constructor.name==="Buffer"){r[c]="[object Buffer]";continue}if(g!==null&&typeof g=="object"&&typeof g.pipe=="function"){r[c]="[object Stream]";continue}if(typeof g!="function"){if(!g||typeof g!="object"){try{r[c]=g}catch{}continue}if(!t.includes(e[c])){i++,r[c]=A(e[c]);continue}r[c]="[Circular]"}}if(a||r instanceof Error)for(let{property:c,enumerable:g}of pG)e[c]!==void 0&&e[c]!==null&&Object.defineProperty(r,c,{value:uE(e[c])||Array.isArray(e[c])?A(e[c]):e[c],enumerable:n?!0:g,configurable:!0,writable:!0});return r};function bn(e,t={}){let{maxDepth:r=Number.POSITIVE_INFINITY,useToJSON:n=!0}=t;return typeof e=="object"&&e!==null?xl({from:e,seen:[],forceEnumerable:!0,maxDepth:r,depth:0,useToJSON:n,serialize:!0}):typeof e=="function"?`[Function: ${e.name||"anonymous"}]`:e}function pE(e,t={}){let{maxDepth:r=Number.POSITIVE_INFINITY}=t;return e instanceof Error?e:hG(e)?xl({from:e,seen:[],to:IE(e.name),maxDepth:r,depth:0,serialize:!1}):new wl(e)}function uE(e){return!!e&&typeof e=="object"&&typeof e.name=="string"&&typeof e.message=="string"&&typeof e.stack=="string"}function hG(e){return!!e&&typeof e=="object"&&typeof e.message=="string"&&!Array.isArray(e)}var Eo=J(ie());var mE="__webext_forward_tabs_message__",Ba=new Map,CG=cE(),BG=AE(),bl=(e,t)=>{if(CG){let o=EG(e,t);if(o)return o}if(e.view==="sidebar"&&!BG)return;let r=e.type,n=Ba.get(r);if(n)return new Promise(async o=>{try{o({data:await n({sender:t,data:e.data,id:r,originalSender:e.sender})})}catch(i){o({error:bn(i)})}})};function EG(e,t){if(e.type===mE)return new Promise(async(r,n)=>{let{tabId:o,frameId:i,type:s,data:a,view:A}=e.data,c;try{c=o==="sender"?t.tab.id:o==="active"?await hl():o}catch(d){return n(d)}let g=i==="sender"?t.frameId:i;r(Eo.default.tabs.sendMessage(c,{type:s,data:a,sender:t,view:A},g===void 0?void 0:{frameId:g}))})}async function Ft(...e){if(!Eo.default.runtime.id)throw new Error("Extension not initialized.");let[t,r,n={}]=e,o=n.tabId,i=n.frameId,s=n.view,a;if(o===void 0?a=await Eo.default.runtime.sendMessage({type:t,data:r,view:s}):o!=="sender"&&i!=="sender"&&aE()?a=await Eo.default.tabs.sendMessage(o==="active"?await hl():o,{type:t,data:r,view:s},i===void 0?void 0:{frameId:i}):a=await Eo.default.runtime.sendMessage({type:mE,data:{tabId:o,frameId:i,type:t,data:r,view:s}}),!a)throw new Error(`null for Message ID "${t}". Maybe multiple async runtime.onMessage listeners or no listener.`);if("error"in a)throw pE(a.error);return a.data}function Xe(e,t,r={}){let n=r.signal;if(n?.aborted)return yr;if(Ba.get(e))throw new Error(`Message ID "${e}" already has a listener.`);Ba.set(e,t);let i=()=>Ba.delete(e);return n&&n.addEventListener("abort",i,{once:!0}),()=>{i(),n&&n.removeEventListener("abort",i)}}var yG=J(ie()),Ea=new Map;function ya(e,t){if(Ea.get(e))throw new Error(`Channel "${e}" already has a listener.`);return Ea.set(e,t),()=>{Ea.delete(e)}}function Dl(e){let t=e.name,r=Ea.get(t);return r?(r(QG(e)),!0):!1}function QG(e){let t=new AbortController,r=!0;e.onDisconnect.addListener(()=>{t.abort(),r=!1});function n(i){return e.onDisconnect.addListener(i),()=>e.onDisconnect.removeListener(i)}function o(i){return e.onMessage.addListener(i),()=>e.onMessage.removeListener(i)}return{signal:t.signal,send:i=>r&&e.postMessage(i),close:()=>r&&e.disconnect(),onMessage:o,onClose:n,async*iter(...i){let s,a=o(c=>s(c)),A=n(()=>s=yr);i.length&&e.postMessage(i[0]);try{for(;;)yield new Promise(c=>s=c)}finally{a(),A()}}}}var hE=J(ie()),Qa=new Map;async function CE(e){if(!chrome.offscreen?.createDocument)throw new Error("Offscreen document is not supported");let t=hE.default.runtime.getURL(e);if(!((await chrome.runtime.getContexts({contextTypes:[chrome.runtime.ContextType.OFFSCREEN_DOCUMENT],documentUrls:[t]})).length>0)){if(Qa.has(t))return Qa.get(t);{let n=chrome.offscreen.createDocument({url:e,reasons:[chrome.offscreen.Reason.BLOBS],justification:"reason for needing the document"});Qa.set(t,n),await n,Qa.delete(t)}}}Xe("disable-iframe-restrictions",async({sender:e})=>{if(!_t.default.declarativeNetRequest)throw new Error("declarativeNetRequest is not supported");let t=e.tab?.id;if(!t)throw new Error("tabId is required");let r=await _t.default.declarativeNetRequest.getSessionRules().then(o=>o.find(i=>i.id===1));if(!(r&&(!r.condition.tabIds||r.condition.tabIds.includes(t))))return _t.default.declarativeNetRequest.updateSessionRules({removeRuleIds:[1],addRules:[{id:1,priority:1,action:{type:"modifyHeaders",responseHeaders:[{header:"X-Frame-Options",operation:"remove"},{header:"Frame-Options",operation:"remove"},{header:"Content-Security-Policy",operation:"remove"},{header:"Content-Security-Policy-Report-Only",operation:"remove"},{header:"ALLOW-FROM",operation:"set",value:"*"}]},condition:{resourceTypes:["sub_frame"],tabIds:[t]}}]})});Xe("restore-iframe-restrictions",()=>_t.default.declarativeNetRequest?_t.default.declarativeNetRequest.updateSessionRules({removeRuleIds:[1]}):Promise.reject(new Error("declarativeNetRequest is not supported")));Xe("fetch-as-blob-url",async({data:e})=>(await CE("offscreen-fetch-blob.html"),Ft("offscreen-fetch-blob",e)));Xe("open-standalone-page",()=>Bo());Xe("detect-language",({data:e,sender:t})=>_t.default.tabs.detectLanguage(e??t.tab?.id));Xe("get-window-value",async({data:{tabId:e,keys:t},sender:r})=>{let n=e==="sender"?r.tab?.id:e;if(n===void 0)throw new Error("tabId is required");return _t.default.scripting.executeScript({args:[t],target:{tabId:n},func:o=>{let i={};e:for(let[s,a]of Object.entries(o)){let A=window;for(let c of a){if(A==null){i[s]=void 0;continue e}A=A[c]}i[s]=A}return i},world:"MAIN"}).then(([o])=>{if(!o)throw new Error("executeScript failed");let{error:i,result:s}=o;if(i)throw i instanceof Error?i:new Error("executeScript failed: unknown error");return s})});Xe("detect-youtube-ad",async({data:{tabId:e},sender:t})=>{let r=e==="sender"?t.tab?.id:e;if(r===void 0)throw new Error("tabId is required");return _t.default.scripting.executeScript({target:{tabId:r},func:()=>{let n=document.querySelector("#movie_player");if(!n)return;function o(i,s){let a=new CustomEvent("sider-onYoutubeChange",{detail:{eventName:i,value:s}});window.dispatchEvent(a)}n.addEventListener("onAdStateChange",i=>{o("onAdStateChange",i)}),n.addEventListener("onStateChange",i=>{o("onStateChange",i)})},world:"MAIN"}).then(([n])=>{if(!n)throw new Error("executeScript failed");let{error:o,result:i}=n;if(o)throw o instanceof Error?o:new Error("executeScript failed: unknown error");return i})});Xe("get-webpage-chatgpt-message",async({data:e,sender:t})=>{let r=t.tab?.id,n=e;if(r===void 0)throw new Error("tabId is required");return _t.default.scripting.executeScript({target:{tabId:r},args:[n],func:o=>{let i=document.querySelector(`article[data-testid="conversation-turn-${o}"] [data-message-author-role][data-message-id]`);if(!i)throw new Error("message element not found");let s=Object.keys(i).find(d=>d.startsWith("__reactFiber$"));if(!s)throw new Error("fiber key not found");let a=i[s];if(!a)throw new Error("fiber not found");let A,c,g=20;for(;a&&g>0;){if(Array.isArray(a.memoizedProps.messages)&&(A=a.memoizedProps.messages),Array.isArray(a.memoizedProps.groupedMessagesToRender)&&(c=a.memoizedProps.groupedMessagesToRender),A&&c)return{messages:A,groupedMessagesToRender:c};a=a.return,g--}throw new Error("messages not found")},world:"MAIN"}).then(([o])=>{if(!o)throw new Error("executeScript failed");let{error:i,result:s}=o;if(i)throw i instanceof Error?i:new Error("executeScript failed: unknown error");return s})});Xe("get-value-from-react-fiber",async({data:e,sender:t})=>{let r=t.tab?.id,{propName:n,querySelector:o,querySelectorAll:i,maxDepth:s=999}=e;if(r===void 0)throw new Error("tabId is required");if(!o&&!i)throw new Error("querySelector or querySelectorAll is required");if(!n)throw new Error("propName is required");return _t.default.scripting.executeScript({target:{tabId:r},args:[o??null,i??null,n,s],func:(a,A,c,g)=>{let d=A?document.querySelectorAll(A):[document.querySelector(a)],l=[];for(let f of d){let u=0,m=Object.keys(f).find(C=>C.startsWith("__reactFiber$"));if(!m)continue;let p=f[m];for(;p&&!(p.memoizedProps&&Object.hasOwn(p.memoizedProps,c))&&u<g;)p=p.return,u++;p&&p.memoizedProps&&Object.hasOwn(p.memoizedProps,c)&&l.push(p.memoizedProps[c])}if(l.length)return l;throw new Error("value not found")},world:"MAIN"}).then(([a])=>{if(!a)throw new Error("executeScript failed");let{error:A,result:c}=a;if(A)throw A instanceof Error?A:new Error("executeScript failed: unknown error");return c})});Xe("get-google-doc-content",({sender:e})=>{let t=e.tab?.id;if(t===void 0)throw new Error("tabId is required");return _t.default.scripting.executeScript({target:{tabId:t},func:async()=>{function r(o,i){i.add(o),Array.isArray(o)||(o=Object.values(o));for(let s of o)if(s&&!(typeof s!="string"&&typeof s!="object")&&!i.has(s)){if(i.add(s),typeof s=="string"&&s[0]===""&&s[s.length-1]===`
`)return s;{let a=r(s,i);if(a)return a}}}let n=Reflect.get(document,"__wizmanager");if(n)return r(n,new Set)},world:"MAIN"}).then(([r])=>{if(!r)throw new Error("executeScript failed");let{error:n,result:o}=r;if(n)throw n instanceof Error?n:new Error("executeScript failed: unknown error");return o})});Xe("fetch-base64-from-bg",async({data:e})=>{let{url:t}=e,n=await(await fetch(t)).blob();return{base64:await Dr(n),size:n.size,type:n.type}});Xe("get-sender",({sender:e})=>e);var b=J(ie());var wa,wG=new Uint8Array(16);function kl(){if(!wa&&(wa=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!wa))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return wa(wG)}var Ye=[];for(let e=0;e<256;++e)Ye.push((e+256).toString(16).slice(1));function BE(e,t=0){return Ye[e[t+0]]+Ye[e[t+1]]+Ye[e[t+2]]+Ye[e[t+3]]+"-"+Ye[e[t+4]]+Ye[e[t+5]]+"-"+Ye[e[t+6]]+Ye[e[t+7]]+"-"+Ye[e[t+8]]+Ye[e[t+9]]+"-"+Ye[e[t+10]]+Ye[e[t+11]]+Ye[e[t+12]]+Ye[e[t+13]]+Ye[e[t+14]]+Ye[e[t+15]]}var SG=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Fl={randomUUID:SG};function xG(e,t,r){if(Fl.randomUUID&&!t&&!e)return Fl.randomUUID();e=e||{};let n=e.random||(e.rng||kl)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let o=0;o<16;++o)t[r+o]=n[o];return t}return BE(n)}var me=xG;var cs=J(ie());var IK=J(ie());var $2=J(ie());function bi(e,t,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function a(g){try{c(n.next(g))}catch(d){s(d)}}function A(g){try{c(n.throw(g))}catch(d){s(d)}}function c(g){g.done?i(g.value):o(g.value).then(a,A)}c((n=n.apply(e,t||[])).next())})}var Qe=class{constructor(){this.mutex=Promise.resolve()}lock(){let t=()=>{};return this.mutex=this.mutex.then(()=>new Promise(t)),new Promise(r=>{t=r})}dispatch(t){return bi(this,void 0,void 0,function*(){let r=yield this.lock();try{return yield Promise.resolve(t())}finally{r()}})}},_l;function bG(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global}var Nl=bG(),vl=(_l=Nl.Buffer)!==null&&_l!==void 0?_l:null,DG=Nl.TextEncoder?new Nl.TextEncoder:null;function bE(e,t){return(e&15)+(e>>6|e>>3&8)<<4|(t&15)+(t>>6|t>>3&8)}function kG(e,t){let r=t.length>>1;for(let n=0;n<r;n++){let o=n<<1;e[n]=bE(t.charCodeAt(o),t.charCodeAt(o+1))}}function FG(e,t){if(e.length!==t.length*2)return!1;for(let r=0;r<t.length;r++){let n=r<<1;if(t[r]!==bE(e.charCodeAt(n),e.charCodeAt(n+1)))return!1}return!0}var EE=87,yE=48;function QE(e,t,r){let n=0;for(let o=0;o<r;o++){let i=t[o]>>>4;e[n++]=i>9?i+EE:i+yE,i=t[o]&15,e[n++]=i>9?i+EE:i+yE}return String.fromCharCode.apply(null,e)}var wE=vl!==null?e=>{if(typeof e=="string"){let t=vl.from(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.length)}if(vl.isBuffer(e))return new Uint8Array(e.buffer,e.byteOffset,e.length);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Invalid data type!")}:e=>{if(typeof e=="string")return DG.encode(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Invalid data type!")},SE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xi=new Uint8Array(256);for(let e=0;e<SE.length;e++)xi[SE.charCodeAt(e)]=e;function _G(e){let t=Math.floor(e.length*.75),r=e.length;return e[r-1]==="="&&(t-=1,e[r-2]==="="&&(t-=1)),t}function vG(e){let t=_G(e),r=e.length,n=new Uint8Array(t),o=0;for(let i=0;i<r;i+=4){let s=xi[e.charCodeAt(i)],a=xi[e.charCodeAt(i+1)],A=xi[e.charCodeAt(i+2)],c=xi[e.charCodeAt(i+3)];n[o]=s<<2|a>>4,o+=1,n[o]=(a&15)<<4|A>>2,o+=1,n[o]=(A&3)<<6|c&63,o+=1}return n}var Sa=16*1024,wi=4,RG=new Qe,Rl=new Map;function NG(e,t){return bi(this,void 0,void 0,function*(){let r=null,n=null,o=!1;if(typeof WebAssembly>"u")throw new Error("WebAssembly is not supported in this environment!");let i=(E,w=0)=>{n.set(E,w)},s=()=>n,a=()=>r.exports,A=E=>{r.exports.Hash_SetMemorySize(E);let w=r.exports.Hash_GetBuffer(),y=r.exports.memory.buffer;n=new Uint8Array(y,w,E)},c=()=>new DataView(r.exports.memory.buffer).getUint32(r.exports.STATE_SIZE,!0),g=RG.dispatch(()=>bi(this,void 0,void 0,function*(){if(!Rl.has(e.name)){let w=vG(e.data),y=WebAssembly.compile(w);Rl.set(e.name,y)}let E=yield Rl.get(e.name);r=yield WebAssembly.instantiate(E,{})})),d=()=>bi(this,void 0,void 0,function*(){r||(yield g);let E=r.exports.Hash_GetBuffer(),w=r.exports.memory.buffer;n=new Uint8Array(w,E,Sa)}),l=(E=null)=>{o=!0,r.exports.Hash_Init(E)},f=E=>{let w=0;for(;w<E.length;){let y=E.subarray(w,w+Sa);w+=y.length,n.set(y),r.exports.Hash_Update(y.length)}},u=E=>{if(!o)throw new Error("update() called before init()");let w=wE(E);f(w)},m=new Uint8Array(t*2),p=(E,w=null)=>{if(!o)throw new Error("digest() called before init()");return o=!1,r.exports.Hash_Final(w),E==="binary"?n.slice(0,t):QE(m,n,t)},C=()=>{if(!o)throw new Error("save() can only be called after init() and before digest()");let E=r.exports.Hash_GetState(),w=c(),y=r.exports.memory.buffer,M=new Uint8Array(y,E,w),T=new Uint8Array(wi+w);return kG(T,e.hash),T.set(M,wi),T},Q=E=>{if(!(E instanceof Uint8Array))throw new Error("load() expects an Uint8Array generated by save()");let w=r.exports.Hash_GetState(),y=c(),M=wi+y,T=r.exports.memory.buffer;if(E.length!==M)throw new Error(`Bad state length (expected ${M} bytes, got ${E.length})`);if(!FG(e.hash,E.subarray(0,wi)))throw new Error("This state was written by an incompatible hash implementation");let U=E.subarray(wi);new Uint8Array(T,w,y).set(U),o=!0},R=E=>typeof E=="string"?E.length<Sa/4:E.byteLength<Sa,B=R;switch(e.name){case"argon2":case"scrypt":B=()=>!0;break;case"blake2b":case"blake2s":B=(E,w)=>w<=512&&R(E);break;case"blake3":B=(E,w)=>w===0&&R(E);break;case"xxhash64":case"xxhash3":case"xxhash128":B=()=>!1;break}let D=(E,w=null,y=null)=>{if(!B(E,w))return l(w),u(E),p("hex",y);let M=wE(E);return n.set(M),r.exports.Hash_Calculate(M.length,w,y),QE(m,n,t)};return yield d(),{getMemory:s,writeMemory:i,getExports:a,setMemorySize:A,init:l,update:u,digest:p,save:C,load:Q,calculate:D,hashLength:t}})}function DE(e,t,r){return bi(this,void 0,void 0,function*(){let n=yield e.lock(),o=yield NG(t,r);return n(),o})}var See=new Qe;var xee=new Qe;var bee=new DataView(new ArrayBuffer(4));var Dee=new Qe;var kee=new Qe;var Fee=new Qe;var _ee=new Qe;var vee=new Qe;var TG="md5",MG="AGFzbQEAAAABEgRgAAF/YAAAYAF/AGACf38BfwMIBwABAgMBAAIFBAEBAgIGDgJ/AUGgigULfwBBgAgLB3AIBm1lbW9yeQIADkhhc2hfR2V0QnVmZmVyAAAJSGFzaF9Jbml0AAELSGFzaF9VcGRhdGUAAgpIYXNoX0ZpbmFsAAQNSGFzaF9HZXRTdGF0ZQAFDkhhc2hfQ2FsY3VsYXRlAAYKU1RBVEVfU0laRQMBCooaBwUAQYAJCy0AQQBC/rnrxemOlZkQNwKQiQFBAEKBxpS6lvHq5m83AoiJAUEAQgA3AoCJAQu+BQEHf0EAQQAoAoCJASIBIABqQf////8BcSICNgKAiQFBAEEAKAKEiQEgAiABSWogAEEddmo2AoSJAQJAAkACQAJAAkACQCABQT9xIgMNAEGACSEEDAELQcAAIANrIgUgAEsNASAFQQNxIQZBACEBAkAgA0E/c0EDSQ0AIANBgIkBaiEEIAVB/ABxIQdBACEBA0AgBCABaiICQRhqIAFBgAlqLQAAOgAAIAJBGWogAUGBCWotAAA6AAAgAkEaaiABQYIJai0AADoAACACQRtqIAFBgwlqLQAAOgAAIAcgAUEEaiIBRw0ACwsCQCAGRQ0AIANBmIkBaiECA0AgAiABaiABQYAJai0AADoAACABQQFqIQEgBkF/aiIGDQALC0GYiQFBwAAQAxogACAFayEAIAVBgAlqIQQLIABBwABPDQEgACECDAILIABFDQIgAEEDcSEGQQAhAQJAIABBBEkNACADQYCJAWohBCAAQXxxIQBBACEBA0AgBCABaiICQRhqIAFBgAlqLQAAOgAAIAJBGWogAUGBCWotAAA6AAAgAkEaaiABQYIJai0AADoAACACQRtqIAFBgwlqLQAAOgAAIAAgAUEEaiIBRw0ACwsgBkUNAiADQZiJAWohAgNAIAIgAWogAUGACWotAAA6AAAgAUEBaiEBIAZBf2oiBg0ADAMLCyAAQT9xIQIgBCAAQUBxEAMhBAsgAkUNACACQQNxIQZBACEBAkAgAkEESQ0AIAJBPHEhAEEAIQEDQCABQZiJAWogBCABaiICLQAAOgAAIAFBmYkBaiACQQFqLQAAOgAAIAFBmokBaiACQQJqLQAAOgAAIAFBm4kBaiACQQNqLQAAOgAAIAAgAUEEaiIBRw0ACwsgBkUNAANAIAFBmIkBaiAEIAFqLQAAOgAAIAFBAWohASAGQX9qIgYNAAsLC4cQARl/QQAoApSJASECQQAoApCJASEDQQAoAoyJASEEQQAoAoiJASEFA0AgACgCCCIGIAAoAhgiByAAKAIoIgggACgCOCIJIAAoAjwiCiAAKAIMIgsgACgCHCIMIAAoAiwiDSAMIAsgCiANIAkgCCAHIAMgBmogAiAAKAIEIg5qIAUgBCACIANzcSACc2ogACgCACIPakH4yKq7fWpBB3cgBGoiECAEIANzcSADc2pB1u6exn5qQQx3IBBqIhEgECAEc3EgBHNqQdvhgaECakERdyARaiISaiAAKAIUIhMgEWogACgCECIUIBBqIAQgC2ogEiARIBBzcSAQc2pB7p33jXxqQRZ3IBJqIhAgEiARc3EgEXNqQa+f8Kt/akEHdyAQaiIRIBAgEnNxIBJzakGqjJ+8BGpBDHcgEWoiEiARIBBzcSAQc2pBk4zBwXpqQRF3IBJqIhVqIAAoAiQiFiASaiAAKAIgIhcgEWogDCAQaiAVIBIgEXNxIBFzakGBqppqakEWdyAVaiIQIBUgEnNxIBJzakHYsYLMBmpBB3cgEGoiESAQIBVzcSAVc2pBr++T2nhqQQx3IBFqIhIgESAQc3EgEHNqQbG3fWpBEXcgEmoiFWogACgCNCIYIBJqIAAoAjAiGSARaiANIBBqIBUgEiARc3EgEXNqQb6v88p4akEWdyAVaiIQIBUgEnNxIBJzakGiosDcBmpBB3cgEGoiESAQIBVzcSAVc2pBk+PhbGpBDHcgEWoiFSARIBBzcSAQc2pBjofls3pqQRF3IBVqIhJqIAcgFWogDiARaiAKIBBqIBIgFSARc3EgEXNqQaGQ0M0EakEWdyASaiIQIBJzIBVxIBJzakHiyviwf2pBBXcgEGoiESAQcyAScSAQc2pBwOaCgnxqQQl3IBFqIhIgEXMgEHEgEXNqQdG0+bICakEOdyASaiIVaiAIIBJqIBMgEWogDyAQaiAVIBJzIBFxIBJzakGqj9vNfmpBFHcgFWoiECAVcyAScSAVc2pB3aC8sX1qQQV3IBBqIhEgEHMgFXEgEHNqQdOokBJqQQl3IBFqIhIgEXMgEHEgEXNqQYHNh8V9akEOdyASaiIVaiAJIBJqIBYgEWogFCAQaiAVIBJzIBFxIBJzakHI98++fmpBFHcgFWoiECAVcyAScSAVc2pB5puHjwJqQQV3IBBqIhEgEHMgFXEgEHNqQdaP3Jl8akEJdyARaiISIBFzIBBxIBFzakGHm9Smf2pBDncgEmoiFWogBiASaiAYIBFqIBcgEGogFSAScyARcSASc2pB7anoqgRqQRR3IBVqIhAgFXMgEnEgFXNqQYXSj896akEFdyAQaiIRIBBzIBVxIBBzakH4x75nakEJdyARaiISIBFzIBBxIBFzakHZhby7BmpBDncgEmoiFWogFyASaiATIBFqIBkgEGogFSAScyARcSASc2pBipmp6XhqQRR3IBVqIhAgFXMiFSASc2pBwvJoakEEdyAQaiIRIBVzakGB7ce7eGpBC3cgEWoiEiARcyIaIBBzakGiwvXsBmpBEHcgEmoiFWogFCASaiAOIBFqIAkgEGogFSAac2pBjPCUb2pBF3cgFWoiECAVcyIVIBJzakHE1PulempBBHcgEGoiESAVc2pBqZ/73gRqQQt3IBFqIhIgEXMiCSAQc2pB4JbttX9qQRB3IBJqIhVqIA8gEmogGCARaiAIIBBqIBUgCXNqQfD4/vV7akEXdyAVaiIQIBVzIhUgEnNqQcb97cQCakEEdyAQaiIRIBVzakH6z4TVfmpBC3cgEWoiEiARcyIIIBBzakGF4bynfWpBEHcgEmoiFWogGSASaiAWIBFqIAcgEGogFSAIc2pBhbqgJGpBF3cgFWoiESAVcyIQIBJzakG5oNPOfWpBBHcgEWoiEiAQc2pB5bPutn5qQQt3IBJqIhUgEnMiByARc2pB+PmJ/QFqQRB3IBVqIhBqIAwgFWogDyASaiAGIBFqIBAgB3NqQeWssaV8akEXdyAQaiIRIBVBf3NyIBBzakHExKShf2pBBncgEWoiEiAQQX9zciARc2pBl/+rmQRqQQp3IBJqIhAgEUF/c3IgEnNqQafH0Nx6akEPdyAQaiIVaiALIBBqIBkgEmogEyARaiAVIBJBf3NyIBBzakG5wM5kakEVdyAVaiIRIBBBf3NyIBVzakHDs+2qBmpBBncgEWoiECAVQX9zciARc2pBkpmz+HhqQQp3IBBqIhIgEUF/c3IgEHNqQf3ov39qQQ93IBJqIhVqIAogEmogFyAQaiAOIBFqIBUgEEF/c3IgEnNqQdG7kax4akEVdyAVaiIQIBJBf3NyIBVzakHP/KH9BmpBBncgEGoiESAVQX9zciAQc2pB4M2zcWpBCncgEWoiEiAQQX9zciARc2pBlIaFmHpqQQ93IBJqIhVqIA0gEmogFCARaiAYIBBqIBUgEUF/c3IgEnNqQaGjoPAEakEVdyAVaiIQIBJBf3NyIBVzakGC/c26f2pBBncgEGoiESAVQX9zciAQc2pBteTr6XtqQQp3IBFqIhIgEEF/c3IgEXNqQbul39YCakEPdyASaiIVIARqIBYgEGogFSARQX9zciASc2pBkaeb3H5qQRV3aiEEIBUgA2ohAyASIAJqIQIgESAFaiEFIABBwABqIQAgAUFAaiIBDQALQQAgAjYClIkBQQAgAzYCkIkBQQAgBDYCjIkBQQAgBTYCiIkBIAALzwMBBH9BACgCgIkBQT9xIgBBmIkBakGAAToAACAAQQFqIQECQAJAAkACQCAAQT9zIgJBB0sNACACRQ0BIAFBmIkBakEAOgAAIAJBAUYNASAAQZqJAWpBADoAACACQQJGDQEgAEGbiQFqQQA6AAAgAkEDRg0BIABBnIkBakEAOgAAIAJBBEYNASAAQZ2JAWpBADoAACACQQVGDQEgAEGeiQFqQQA6AAAgAkEGRg0BIABBn4kBakEAOgAADAELIAJBCEYNAkE2IABrIQMCQCACQQNxIgANACADIQIMAgtBACAAayECQQAhAANAIABBz4kBakEAOgAAIAIgAEF/aiIARw0ACyADIABqIQIMAQtBmIkBQcAAEAMaQQAhAUE3IQNBNyECCyADQQNJDQAgAUGAiQFqIQBBfyEBA0AgACACakEVakEANgAAIABBfGohACACIAFBBGoiAUcNAAsLQQBBACgChIkBNgLUiQFBAEEAKAKAiQEiAEEVdjoA04kBQQAgAEENdjoA0okBQQAgAEEFdjoA0YkBQQAgAEEDdCIAOgDQiQFBACAANgKAiQFBmIkBQcAAEAMaQQBBACkCiIkBNwOACUEAQQApApCJATcDiAkLBgBBgIkBCzMAQQBC/rnrxemOlZkQNwKQiQFBAEKBxpS6lvHq5m83AoiJAUEAQgA3AoCJASAAEAIQBAsLCwEAQYAICwSYAAAA",UG="42fa4d29",OG={name:TG,data:MG,hash:UG},PG=new Qe,xa=null;function kE(e){if(xa===null)return DE(PG,OG,16).then(t=>(xa=t,xa.calculate(e)));try{let t=xa.calculate(e);return Promise.resolve(t)}catch(t){return Promise.reject(t)}}var Ree=new Qe;var GG="sha3",HG="AGFzbQEAAAABFARgAAF/YAF/AGACf38AYAN/f38AAwgHAAEBAgEAAwUEAQECAgYOAn8BQZCNBQt/AEGACAsHcAgGbWVtb3J5AgAOSGFzaF9HZXRCdWZmZXIAAAlIYXNoX0luaXQAAQtIYXNoX1VwZGF0ZQACCkhhc2hfRmluYWwABA1IYXNoX0dldFN0YXRlAAUOSGFzaF9DYWxjdWxhdGUABgpTVEFURV9TSVpFAwEKqBwHBQBBgAoL1wMAQQBCADcDgI0BQQBCADcD+IwBQQBCADcD8IwBQQBCADcD6IwBQQBCADcD4IwBQQBCADcD2IwBQQBCADcD0IwBQQBCADcDyIwBQQBCADcDwIwBQQBCADcDuIwBQQBCADcDsIwBQQBCADcDqIwBQQBCADcDoIwBQQBCADcDmIwBQQBCADcDkIwBQQBCADcDiIwBQQBCADcDgIwBQQBCADcD+IsBQQBCADcD8IsBQQBCADcD6IsBQQBCADcD4IsBQQBCADcD2IsBQQBCADcD0IsBQQBCADcDyIsBQQBCADcDwIsBQQBCADcDuIsBQQBCADcDsIsBQQBCADcDqIsBQQBCADcDoIsBQQBCADcDmIsBQQBCADcDkIsBQQBCADcDiIsBQQBCADcDgIsBQQBCADcD+IoBQQBCADcD8IoBQQBCADcD6IoBQQBCADcD4IoBQQBCADcD2IoBQQBCADcD0IoBQQBCADcDyIoBQQBCADcDwIoBQQBCADcDuIoBQQBCADcDsIoBQQBCADcDqIoBQQBCADcDoIoBQQBCADcDmIoBQQBCADcDkIoBQQBCADcDiIoBQQBCADcDgIoBQQBBwAwgAEEBdGtBA3Y2AoyNAUEAQQA2AoiNAQuMAwEIfwJAQQAoAoiNASIBQQBIDQBBACABIABqQQAoAoyNASICcDYCiI0BAkACQCABDQBBgAohAwwBCwJAIAIgAWsiBCAAIAQgAEkbIgNFDQAgA0EDcSEFQQAhBgJAIANBBEkNACABQYCKAWohByADQXxxIQhBACEGA0AgByAGaiIDQcgBaiAGQYAKai0AADoAACADQckBaiAGQYEKai0AADoAACADQcoBaiAGQYIKai0AADoAACADQcsBaiAGQYMKai0AADoAACAIIAZBBGoiBkcNAAsLIAVFDQAgAUHIiwFqIQMDQCADIAZqIAZBgApqLQAAOgAAIAZBAWohBiAFQX9qIgUNAAsLIAQgAEsNAUHIiwEgAhADIAAgBGshACAEQYAKaiEDCwJAIAAgAkkNAANAIAMgAhADIAMgAmohAyAAIAJrIgAgAk8NAAsLIABFDQBBACECQcgBIQYDQCAGQYCKAWogAyAGakG4fmotAAA6AAAgBkEBaiEGIAAgAkEBaiICQf8BcUsNAAsLC+QLAS1+IAApA0AhAkEAKQPAigEhAyAAKQM4IQRBACkDuIoBIQUgACkDMCEGQQApA7CKASEHIAApAyghCEEAKQOoigEhCSAAKQMgIQpBACkDoIoBIQsgACkDGCEMQQApA5iKASENIAApAxAhDkEAKQOQigEhDyAAKQMIIRBBACkDiIoBIREgACkDACESQQApA4CKASETQQApA8iKASEUAkACQCABQcgASw0AQQApA9CKASEVQQApA+CKASEWQQApA9iKASEXDAELQQApA+CKASAAKQNghSEWQQApA9iKASAAKQNYhSEXQQApA9CKASAAKQNQhSEVIBQgACkDSIUhFCABQekASQ0AQQBBACkD6IoBIAApA2iFNwPoigFBAEEAKQPwigEgACkDcIU3A/CKAUEAQQApA/iKASAAKQN4hTcD+IoBQQBBACkDgIsBIAApA4ABhTcDgIsBIAFBiQFJDQBBAEEAKQOIiwEgACkDiAGFNwOIiwELIAMgAoUhGCAFIASFIRkgByAGhSEHIAkgCIUhCCALIAqFIRogDSAMhSEJIA8gDoUhCiARIBCFIQsgEyAShSEMQQApA7iLASESQQApA5CLASETQQApA+iKASEbQQApA6CLASEcQQApA/iKASENQQApA7CLASEdQQApA4iLASEOQQApA8CLASEPQQApA5iLASEeQQApA/CKASEQQQApA6iLASERQQApA4CLASEfQcB+IQADQCAaIAcgC4UgF4UgH4UgEYVCAYmFIBSFIBCFIB6FIA+FIQIgDCAZIAqFIBaFIA6FIB2FQgGJhSAIhSAVhSANhSAchSIDIAeFISAgCSAIIAyFIBWFIA2FIByFQgGJhSAYhSAbhSAThSAShSIEIA+FISEgGCAKIBQgGoUgEIUgHoUgD4VCAYmFIBmFIBaFIA6FIB2FIgWFQjeJIiIgCyAYIAmFIBuFIBOFIBKFQgGJhSAHhSAXhSAfhSARhSIGIAqFQj6JIiNCf4WDIAMgEYVCAokiJIUhDyANIAKFQimJIiUgBCAQhUIniSImQn+FgyAihSERIBIgBYVCOIkiEiAGIA6FQg+JIidCf4WDIAMgF4VCCokiKIUhDiAEIBqFQhuJIikgKCAIIAKFQiSJIipCf4WDhSENIAYgGYVCBokiKyADIAuFQgGJIixCf4WDIBwgAoVCEokiLYUhECArIAQgHoVCCIkiLiAbIAWFQhmJIhtCf4WDhSEXIAYgHYVCPYkiGSAEIBSFQhSJIgQgCSAFhUIciSIIQn+Fg4UhFCAIIBlCf4WDIAMgH4VCLYkiA4UhGCAZIANCf4WDIBUgAoVCA4kiCYUhGSAEIAMgCUJ/hYOFIQcgCSAEQn+FgyAIhSEIIAwgAoUiAiAhQg6JIgNCf4WDIBMgBYVCFYkiBIUhCSAGIBaFQiuJIgUgAyAEQn+Fg4UhCiAEIAVCf4WDICBCLIkiBIUhCyAAQdAJaikDACAFIARCf4WDhSAChSEMICcgKEJ/hYMgKoUiBSEfIAMgBCACQn+Fg4UiAiEaICogKUJ/hYMgEoUiAyEeIC0gLkJ/hYMgG4UiBCEWICYgJCAlQn+Fg4UiBiEdIBsgK0J/hYMgLIUiKCEVICMgJiAiQn+Fg4UiIiEcIC4gLCAtQn+Fg4UiJiEbICcgKSASQn+Fg4UiJyETICMgJEJ/hYMgJYUiIyESIABBCGoiAA0AC0EAIBE3A6iLAUEAIAU3A4CLAUEAIBc3A9iKAUEAIAc3A7CKAUEAIAs3A4iKAUEAIA83A8CLAUEAIAM3A5iLAUEAIBA3A/CKAUEAIBQ3A8iKAUEAIAI3A6CKAUEAIAY3A7CLAUEAIA43A4iLAUEAIAQ3A+CKAUEAIBk3A7iKAUEAIAo3A5CKAUEAICI3A6CLAUEAIA03A/iKAUEAICg3A9CKAUEAIAg3A6iKAUEAIAw3A4CKAUEAICM3A7iLAUEAICc3A5CLAUEAICY3A+iKAUEAIBg3A8CKAUEAIAk3A5iKAQv4AgEFf0HkAEEAKAKMjQEiAUEBdmshAgJAQQAoAoiNASIDQQBIDQAgASEEAkAgASADRg0AIANByIsBaiEFQQAhAwNAIAUgA2pBADoAACADQQFqIgMgAUEAKAKIjQEiBGtJDQALCyAEQciLAWoiAyADLQAAIAByOgAAIAFBx4sBaiIDIAMtAABBgAFyOgAAQciLASABEANBAEGAgICAeDYCiI0BCwJAIAJBBEkNACACQQJ2IgNBA3EhBUEAIQQCQCADQX9qQQNJDQAgA0H8////A3EhAUEAIQNBACEEA0AgA0GACmogA0GAigFqKAIANgIAIANBhApqIANBhIoBaigCADYCACADQYgKaiADQYiKAWooAgA2AgAgA0GMCmogA0GMigFqKAIANgIAIANBEGohAyABIARBBGoiBEcNAAsLIAVFDQAgBUECdCEBIARBAnQhAwNAIANBgApqIANBgIoBaigCADYCACADQQRqIQMgAUF8aiIBDQALCwsGAEGAigEL0QYBA39BAEIANwOAjQFBAEIANwP4jAFBAEIANwPwjAFBAEIANwPojAFBAEIANwPgjAFBAEIANwPYjAFBAEIANwPQjAFBAEIANwPIjAFBAEIANwPAjAFBAEIANwO4jAFBAEIANwOwjAFBAEIANwOojAFBAEIANwOgjAFBAEIANwOYjAFBAEIANwOQjAFBAEIANwOIjAFBAEIANwOAjAFBAEIANwP4iwFBAEIANwPwiwFBAEIANwPoiwFBAEIANwPgiwFBAEIANwPYiwFBAEIANwPQiwFBAEIANwPIiwFBAEIANwPAiwFBAEIANwO4iwFBAEIANwOwiwFBAEIANwOoiwFBAEIANwOgiwFBAEIANwOYiwFBAEIANwOQiwFBAEIANwOIiwFBAEIANwOAiwFBAEIANwP4igFBAEIANwPwigFBAEIANwPoigFBAEIANwPgigFBAEIANwPYigFBAEIANwPQigFBAEIANwPIigFBAEIANwPAigFBAEIANwO4igFBAEIANwOwigFBAEIANwOoigFBAEIANwOgigFBAEIANwOYigFBAEIANwOQigFBAEIANwOIigFBAEIANwOAigFBAEHADCABQQF0a0EDdjYCjI0BQQBBADYCiI0BIAAQAkHkAEEAKAKMjQEiAEEBdmshAwJAQQAoAoiNASIBQQBIDQAgACEEAkAgACABRg0AIAFByIsBaiEFQQAhAQNAIAUgAWpBADoAACABQQFqIgEgAEEAKAKIjQEiBGtJDQALCyAEQciLAWoiASABLQAAIAJyOgAAIABBx4sBaiIBIAEtAABBgAFyOgAAQciLASAAEANBAEGAgICAeDYCiI0BCwJAIANBBEkNACADQQJ2IgFBA3EhBUEAIQQCQCABQX9qQQNJDQAgAUH8////A3EhAEEAIQFBACEEA0AgAUGACmogAUGAigFqKAIANgIAIAFBhApqIAFBhIoBaigCADYCACABQYgKaiABQYiKAWooAgA2AgAgAUGMCmogAUGMigFqKAIANgIAIAFBEGohASAAIARBBGoiBEcNAAsLIAVFDQAgBUECdCEAIARBAnQhAQNAIAFBgApqIAFBgIoBaigCADYCACABQQRqIQEgAEF8aiIADQALCwsL2AEBAEGACAvQAZABAAAAAAAAAAAAAAAAAAABAAAAAAAAAIKAAAAAAAAAioAAAAAAAIAAgACAAAAAgIuAAAAAAAAAAQAAgAAAAACBgACAAAAAgAmAAAAAAACAigAAAAAAAACIAAAAAAAAAAmAAIAAAAAACgAAgAAAAACLgACAAAAAAIsAAAAAAACAiYAAAAAAAIADgAAAAAAAgAKAAAAAAACAgAAAAAAAAIAKgAAAAAAAAAoAAIAAAACAgYAAgAAAAICAgAAAAAAAgAEAAIAAAAAACIAAgAAAAIA=",qG="f2f6f5b2",LG={name:GG,data:HG,hash:qG},KG=new Qe,Si=null;function xE(e){return[224,256,384,512].includes(e)?null:new Error("Invalid variant! Valid values: 224, 256, 384, 512")}function FE(e,t=512){if(xE(t))return Promise.reject(xE(t));let r=t/8;if(Si===null||Si.hashLength!==r)return DE(KG,LG,r).then(n=>(Si=n,Si.calculate(e,t,6)));try{let n=Si.calculate(e,t,6);return Promise.resolve(n)}catch(n){return Promise.reject(n)}}var Nee=new Qe;var Tee=new Qe;var Mee=new Qe;var Uee=new Qe;var Oee=new Qe;var Pee=new Qe;var Gee=new Qe;var Hee=new ArrayBuffer(8);var qee=new Qe;var Lee=new ArrayBuffer(8);var Kee=new Qe;var Jee=new ArrayBuffer(8);var Vee=new Qe;var zee=new Qe;var Yee=new Qe;async function Tl(e){return await kE(new Uint8Array(await e.arrayBuffer()))}function yo(e){let t,r,n,o,i,s,a;return A(),{feed:c,reset:A};function A(){t=!0,r="",n=0,o=-1,i=void 0,s=void 0,a=""}function c(d){r=r?r+d:d,t&&JG(r)&&(r=r.slice(_E.length)),t=!1;let l=r.length,f=0,u=!1;for(;f<l;){u&&(r[f]===`
`&&++f,u=!1);let m=-1,p=o,C;for(let Q=n;m<0&&Q<l;++Q)C=r[Q],C===":"&&p<0?p=Q-f:C==="\r"?(u=!0,m=Q-f):C===`
`&&(m=Q-f);if(m<0){n=l-f,o=p;break}else n=0,o=-1;g(r,f,p,m),f+=m+1}f===l?r="":f>0&&(r=r.slice(f))}function g(d,l,f,u){if(u===0){a.length>0&&(e({type:"event",id:i,event:s||void 0,data:a.slice(0,-1)}),a="",i=void 0),s=void 0;return}let m=f<0,p=d.slice(l,l+(m?u:f)),C=0;m?C=u:d[l+f+1]===" "?C=f+2:C=f+1;let Q=l+C,R=u-C,B=d.slice(Q,Q+R).toString();if(p==="data")a+=B?"".concat(B,`
`):`
`;else if(p==="event")s=B;else if(p==="id"&&!B.includes("\0"))i=B;else if(p==="retry"){let D=parseInt(B,10);Number.isNaN(D)||e({type:"reconnect-interval",value:D})}}}var _E=[239,187,191];function JG(e){return _E.every((t,r)=>e.charCodeAt(r)===t)}async function*Qo(e){let t=e.getReader();try{for(;;){let{done:r,value:n}=await t.read();if(r)return;yield n}}finally{t.releaseLock()}}var Dn={609:"error_sider_premium_required",610:"error_sider_high_traffic",1001:"error_sider_invalid_token ",1003:"error_sider_need_login",1006:"error_sider_device_bind_account",1011:"error_sider_login_expired",1012:"error_sider_admin_kickout",1013:"error_sider_device_limit_logout",1018:"error_sider_login_expired",1019:"error_sider_user_banned",1101:"error_sider_processing",1102:"error_sider_api_limit",1107:"error_sider_api_limit2",1109:"error_sider_gpt4_highload",1110:"error_sider_gpt_highload",1112:"error_sider_gpt4_limit",1113:"error_sider_gpt4_limit",1136:"error_sider_o1_limit",1137:"error_sider_unlimited_limit",1138:"error_sider_new_unlimited_limit_1",1139:"error_sider_new_unlimited_limit_2",1141:"error_sider_new_unlimited_limit_3",1142:"error_sider_data_analysis_credit",1143:"error_sider_translate_api_limit",3509:"error_sider_audio_advanced_limit",1118:"error_sider_image_limit",1127:"error_sider_ocr_limit",1128:"error_sider_summary_video_limit",1501:"error_sider_openai_fault",1515:"error_sider_gemini_pro_busy",1129:"error_sider_basic_text_limit",1130:"error_sider_advanced_text_limit",1135:"error_sider_credit_freq_limit",1132:"error_sider_openai_filter",2003:"error_sider_embedding_limit_by_count",3511:"error_sider_audio_to_text_service_overload",4e3:"error_sider_trial_feat_limit",4500:"error_sider_video_too_long",4501:"error_sider_failed_to_create_user_video_task",4502:"error_sider_failed_to_send_whisper_request",4503:"error_sider_got_error_response_from_whisper",4504:"error_sider_failed_to_get_subtitle",4505:"error_sider_failed_to_get_video_info",4506:"error_sider_not_support_live_video"};function Di(e,t){switch(e){case 1001:case 1011:case 1012:case 1013:case 1018:N({__force_logout_reason__:Dn[e]}).then(()=>{ki()});break;case 609:case 1102:case 1107:case 1112:case 1113:case 1118:case 1127:case 1128:case 3511:case 4e3:case 4501:case 4502:case 4503:case 4504:Z.getVipInfoCached();break;default:break}throw new Error(Ml(e,t))}function Ml(e,t){if(e===1136)return t.includes(`ask.${le.domain}`)?Dn[e]:t;if(e===1135){let r=t.match(/after (.*) minutes/i)?.[1]||60;return`${Dn[e]}|${r}`}if(e===1137){let r=t.match(/is \( (.*) uses/i)?.[1],n=t.match(/every (.*) hours, resetting/i)?.[1],o=t.match(/resetting at (.*). Full/i)?.[1];return`${Dn[e]}|${r}|${n}|${o}`}if(e===1139||e===1141){let r=t.match(/Current speed limit is \((.*) times \//i)?.[1],n=t.match(/\/ (.*) hour/i)?.[1];return`${Dn[e]}|${r}|${n}`}return e in Dn?Dn[e]:typeof t=="string"&&t.startsWith("504")?"error_sider_timeout":t}var VG=Object.prototype.toString,zG=e=>VG.call(e)==="[object Error]",YG=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Load failed","Network request failed","fetch failed","terminated"]);function Ul(e){return e&&zG(e)&&e.name==="TypeError"&&typeof e.message=="string"?e.message==="Load failed"?e.stack===void 0:YG.has(e.message):!1}var WG="https://apidomain.gptshere.com/api/static/domain_list",vE="AES-GCM",jG="SHA-256";async function XG(e){let t=new TextEncoder().encode(e);return(await crypto.subtle.digest({name:jG},t)).slice(0,16)}async function RE(){let e=new Date().getTime(),t=await fetch(WG,{method:"GET",headers:{iv:e.toString()}}),r=t.headers.get("kl");if(!r)throw new Error("api error");let n=parseInt(r,10);if(isNaN(n)||n<0||n>64)throw new Error("api error");let i=await(await t.blob()).arrayBuffer(),s=new Uint8Array(i,0,n),a=new Uint8Array(i,n),A=await XG(e.toString()),c=await crypto.subtle.importKey("raw",s,{name:vE},!1,["decrypt"]),g=await crypto.subtle.decrypt({name:vE,iv:A},c,a),d=new TextDecoder().decode(g),l=JSON.parse(d);if(l.code!==0)throw new Error("api error");let f=l?.data?.list;if(!f||f.length===0)throw new Error("api error");return f}var vt="domainPool",Fi="domainPoolIndex";async function Ol(){let e=await z({[vt]:[],[Fi]:0}),t=e[Fi]+1;t>=e[vt].length&&(t=0),e[vt].length>0&&N({[Fi]:t})}async function ZG(){let e=await z({[vt]:[le.origin],[Fi]:0});return e[vt][e[Fi]]??le.origin}async function wo(){let e=await ZG();return new URL("api",e).toString()}async function NE(){let e=await z({[vt]:[]}),t=null,r=[];try{r=await RE()}catch(n){throw t=n,n}finally{(t||!r?.length)&&(r=[le.origin,...e[vt]]),N({[vt]:[...new Set([le.origin,...r??[]])]})}}async function So(e,t){let r=await z({[vt]:[]});if(Ul(e)&&navigator.onLine)if(t){let n=!1;t instanceof URL?n=r[vt].some(o=>t.origin.includes(o)):n=r[vt].some(o=>t.includes(o)),n&&await Ol()}else await Ol()}async function $G(e,t,r){return new Promise((n,o)=>{let i=new XMLHttpRequest;i.open(t.method||"GET",e),t.headers instanceof Headers&&t.headers.forEach((s,a)=>{i.setRequestHeader(a,s)}),i.onload=function(){n(new Response(i.responseText,{status:i.status,statusText:i.statusText}))},i.upload.onprogress=function(s){s.lengthComputable&&r&&r?.(s.loaded/s.total*100)},i.onerror=function(){o(new TypeError("Network request failed"))},i.ontimeout=function(){o(new TypeError("Network request timed out"))},i.send(t.body),t.signal&&(t.signal.onabort=function(){i.abort(),o(new DOMException("Aborted","AbortError"))})})}async function ba(e,t=null,r={}){if(!e.startsWith("http")){let u=await wo();e=tn(u,e)}e=new URL(e).href;let{onStreamData:n,getAbortMethod:o,noAuth:i,timeout:s,returnRawResponse:a,onProgress:A,...c}=r;c.method&&(c.method=c.method.toUpperCase());let g=new AbortController;if(c.signal||(c.signal=g.signal),o?.(()=>{g.abort()}),c.headers=new Headers(c.headers||{}),!i&&!c.headers.has("Authorization")){let u=(await nn()).token;u&&(c.headers.set("Authorization",u),Ge("ERR_MUST_LOGIN"))}if(t)try{t instanceof FormData||t instanceof Blob||t instanceof URLSearchParams||t instanceof ReadableStream||t instanceof ArrayBuffer||t instanceof DataView?c.body=t:(c.body=JSON.stringify(t),c.headers.set("Content-Type","application/json"))}catch{c.body=t}let d;s&&(d=setTimeout(()=>g.abort(),s));let l=null;try{l=A?await $G(e,c,A):await fetch(e,c)}catch(u){throw So(u,e),u}if(!l)throw new Error("No response");if(s&&clearTimeout(d),a)return l;let f=null;if(n||(f=await l.json().catch(()=>({}))),!l.ok||l.status!==204&&f&&f.code!==0){if(f||(f=await l.json().catch(()=>({}))),f.errMsg=f.msg||f.message,hi(f))f.errMsg=`${l.status} ${l.statusText}`;else{(f.code===1003||f.code===1006)&&N({ERR_MUST_LOGIN:!0});try{Di(f.code,f.msg||f.message)}catch(u){f.errMsg=u.message}}throw n&&n({data:null,done:!0}),f}if(n&&l.body){let u=yo(m=>{if(m.type==="event"){let p={code:0,data:null,msg:"",errMsg:"",done:m.data==="[DONE]"},C=null;try{C=JSON.parse(m.data)}catch{}if(C&&(p={...p,...C}),p.code!==0){try{Di(p.code,p.msg)}catch(Q){p.errMsg=Q.message}throw n({data:null,done:!0}),p}n({data:p.data,done:p.done})}});for await(let m of Qo(l.body)){let p=new TextDecoder().decode(m);u.feed(p)}}return f?.data}var ue=(...e)=>ba(e[0],e[1],{...e[2],method:"GET"}),j=(...e)=>ba(e[0],e[1],{...e[2],method:"POST"}),TE=(...e)=>ba(e[0],e[1],{...e[2],method:"PUT"}),Da=(...e)=>ba(e[0],e[1],{...e[2],method:"DELETE"});var ME=e=>{let t=e.httpHandler;return{setHttpHandler(r){t=r},httpHandler(){return t},updateHttpClientConfig(r,n){t.updateHttpClientConfig(r,n)},httpHandlerConfigs(){return t.httpHandlerConfigs()}}},UE=e=>({httpHandler:e.httpHandler()});var OE;(function(e){e.HEADER="header",e.QUERY="query"})(OE||(OE={}));var Pl;(function(e){e.HEADER="header",e.QUERY="query"})(Pl||(Pl={}));var xo;(function(e){e.HTTP="http",e.HTTPS="https"})(xo||(xo={}));var bo;(function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"})(bo||(bo={}));var Gl;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(Gl||(Gl={}));var Do="__smithy_context";var PE;(function(e){e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services"})(PE||(PE={}));var GE;(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(GE||(GE={}));var ee=class e{constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static clone(t){let r=new e({...t,headers:{...t.headers}});return r.query&&(r.query=eH(r.query)),r}static isInstance(t){if(!t)return!1;let r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return e.clone(this)}};function eH(e){return Object.keys(e).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{})}var yt=class{constructor(t){this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;let r=t;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};function tH(e){return t=>async r=>{let{request:n}=r;return ee.isInstance(n)&&n.body&&e.runtime==="node"&&e.requestHandler?.constructor?.name!=="FetchHttpHandler"&&(n.headers={...n.headers,Expect:"100-continue"}),t({...r,request:n})}}var rH={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0},HE=e=>({applyToStack:t=>{t.add(tH(e),rH)}});var Hl={WHEN_SUPPORTED:"WHEN_SUPPORTED",WHEN_REQUIRED:"WHEN_REQUIRED"},ql=Hl.WHEN_SUPPORTED;var Ll=Hl.WHEN_SUPPORTED,he;(function(e){e.MD5="MD5",e.CRC32="CRC32",e.CRC32C="CRC32C",e.SHA1="SHA1",e.SHA256="SHA256"})(he||(he={}));var qE;(function(e){e.HEADER="header",e.TRAILER="trailer"})(qE||(qE={}));var LE=he.MD5,KE=he.CRC32;var ka;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(ka||(ka={}));function JE(e,t,r){return e.$source||(e.$source={}),e.$source[t]=r,e}function He(e,t,r){e.__aws_sdk_context?e.__aws_sdk_context.features||(e.__aws_sdk_context.features={}):e.__aws_sdk_context={features:{}},e.__aws_sdk_context.features[t]=r}var Kl=e=>yt.isInstance(e)?e.headers?.date??e.headers?.Date:void 0;var ko=e=>new Date(Date.now()+e);var VE=(e,t)=>Math.abs(ko(t).getTime()-e)>=3e5;var Jl=(e,t)=>{let r=Date.parse(e);return VE(r,t)?r-Date.now():t};var _i=(e,t)=>{if(!t)throw new Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return t},Fa=async e=>{let t=_i("context",e.context),r=_i("config",e.config),n=t.endpointV2?.properties?.authSchemes?.[0],i=await _i("signer",r.signer)(n),s=e?.signingRegion,a=e?.signingRegionSet,A=e?.signingName;return{config:r,signer:i,signingRegion:s,signingRegionSet:a,signingName:A}},kn=class{async sign(t,r,n){if(!ee.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let o=await Fa(n),{config:i,signer:s}=o,{signingRegion:a,signingName:A}=o,c=n.context;if(c?.authSchemes?.length??!1){let[d,l]=c.authSchemes;d?.name==="sigv4a"&&l?.name==="sigv4"&&(a=l?.signingRegion??a,A=l?.signingName??A)}return await s.sign(t,{signingDate:ko(i.systemClockOffset),signingRegion:a,signingService:A})}errorHandler(t){return r=>{let n=r.ServerTime??Kl(r.$response);if(n){let o=_i("config",t.config),i=o.systemClockOffset;o.systemClockOffset=Jl(n,o.systemClockOffset),o.systemClockOffset!==i&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(t,r){let n=Kl(t);if(n){let o=_i("config",r.config);o.systemClockOffset=Jl(n,o.systemClockOffset)}}};var vi=class extends kn{async sign(t,r,n){if(!ee.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let{config:o,signer:i,signingRegion:s,signingRegionSet:a,signingName:A}=await Fa(n),g=(await o.sigv4aSigningRegionSet?.()??a??[s]).join(",");return await i.sign(t,{signingDate:ko(o.systemClockOffset),signingRegion:g,signingService:A})}};var Vt=e=>e[Do]||(e[Do]={});var We=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t};function oH(e){let t=new Map;for(let r of e)t.set(r.schemeId,r);return t}var Vl=(e,t)=>(r,n)=>async o=>{let i=e.httpAuthSchemeProvider(await t.httpAuthSchemeParametersProvider(e,n,o.input)),s=oH(e.httpAuthSchemes),a=Vt(n),A=[];for(let c of i){let g=s.get(c.schemeId);if(!g){A.push(`HttpAuthScheme \`${c.schemeId}\` was not enabled for this service.`);continue}let d=g.identityProvider(await t.identityProviderConfigProvider(e));if(!d){A.push(`HttpAuthScheme \`${c.schemeId}\` did not have an IdentityProvider configured.`);continue}let{identityProperties:l={},signingProperties:f={}}=c.propertiesExtractor?.(e,n)||{};c.identityProperties=Object.assign(c.identityProperties||{},l),c.signingProperties=Object.assign(c.signingProperties||{},f),a.selectedHttpAuthScheme={httpAuthOption:c,identity:await d(c.identityProperties),signer:g.signer};break}if(!a.selectedHttpAuthScheme)throw new Error(A.join(`
`));return r(o)};var iH={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},zE=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(Vl(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r}),iH)}});var YE=(e,t)=>r=>async n=>{let{response:o}=await r(n);try{let i=await t(o,e);return{response:o,output:i}}catch(i){if(Object.defineProperty(i,"$response",{value:o}),!("$metadata"in i)){let s="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";i.message+=`
  `+s,typeof i.$responseBodyText<"u"&&i.$response&&(i.$response.body=i.$responseBodyText)}throw i}};var WE=(e,t)=>(r,n)=>async o=>{let i=n.endpointV2?.url&&e.urlParser?async()=>e.urlParser(n.endpointV2.url):e.endpoint;if(!i)throw new Error("No valid endpoint provider available.");let s=await t(o.input,{...e,endpoint:i});return r({...o,request:s})};var sH={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Ri={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function _a(e,t,r){return{applyToStack:n=>{n.add(YE(e,r),sH),n.add(WE(e,t),Ri)}}}var soe={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:Ri.name};var aH=e=>t=>{throw t},AH=(e,t)=>{},jE=e=>(t,r)=>async n=>{if(!ee.isInstance(n.request))return t(n);let i=Vt(r).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:s={}},identity:a,signer:A}=i,c=await t({...n,request:await A.sign(n.request,a,s)}).catch((A.errorHandler||aH)(s));return(A.successHandler||AH)(c.response,s),c};var zl={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},XE=e=>({applyToStack:t=>{t.addRelativeTo(jE(e),zl)}});var kr=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t};var Fr={},Fn=new Array(64);for(let e=0,t=65,r=90;e+t<=r;e++){let n=String.fromCharCode(e+t);Fr[n]=e,Fn[e]=n}for(let e=0,t=97,r=122;e+t<=r;e++){let n=String.fromCharCode(e+t),o=e+26;Fr[n]=o,Fn[o]=n}for(let e=0;e<10;e++){Fr[e.toString(10)]=e+52;let t=e.toString(10),r=e+52;Fr[t]=r,Fn[r]=t}Fr["+"]=62;Fn[62]="+";Fr["/"]=63;Fn[63]="/";var on=6,_n=8,ZE=63;var va=e=>{let t=e.length/4*3;e.slice(-2)==="=="?t-=2:e.slice(-1)==="="&&t--;let r=new ArrayBuffer(t),n=new DataView(r);for(let o=0;o<e.length;o+=4){let i=0,s=0;for(let c=o,g=o+3;c<=g;c++)if(e[c]!=="="){if(!(e[c]in Fr))throw new TypeError(`Invalid character ${e[c]} in base64 string.`);i|=Fr[e[c]]<<(g-c)*on,s+=on}else i>>=on;let a=o/4*3;i>>=s%_n;let A=Math.floor(s/_n);for(let c=0;c<A;c++){let g=(A-c-1)*_n;n.setUint8(a+c,(i&255<<g)>>g)}}return new Uint8Array(r)};var Qt=e=>new TextEncoder().encode(e);var lr=e=>typeof e=="string"?Qt(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e);var Fo=e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(e)};function sn(e){let t;typeof e=="string"?t=Qt(e):t=e;let r=typeof t=="object"&&typeof t.length=="number",n=typeof t=="object"&&typeof t.byteOffset=="number"&&typeof t.byteLength=="number";if(!r&&!n)throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");let o="";for(let i=0;i<t.length;i+=3){let s=0,a=0;for(let c=i,g=Math.min(i+3,t.length);c<g;c++)s|=t[c]<<(g-c-1)*_n,a+=_n;let A=Math.ceil(a/on);s<<=A*on-a;for(let c=1;c<=A;c++){let g=(A-c)*on;o+=Fn[(s&ZE<<g)>>g]}o+="==".slice(0,4-A)}return o}function $E(e,t="utf-8"){return t==="base64"?sn(e):Fo(e)}function ey(e,t){return t==="base64"?_r.mutate(va(e)):_r.mutate(Qt(e))}var _r=class e extends Uint8Array{static fromString(t,r="utf-8"){switch(typeof t){case"string":return ey(t,r);default:throw new Error(`Unsupported conversion from ${typeof t} to Uint8ArrayBlobAdapter.`)}}static mutate(t){return Object.setPrototypeOf(t,e.prototype),t}transformToString(t="utf-8"){return $E(this,t)}};var ty=(e,t)=>{let{base64Encoder:r,bodyLengthChecker:n,checksumAlgorithmFn:o,checksumLocationName:i,streamHasher:s}=t,a=r!==void 0&&n!==void 0&&o!==void 0&&i!==void 0&&s!==void 0,A=a?s(o,e):void 0,c=e.getReader();return new ReadableStream({async pull(g){let{value:d,done:l}=await c.read();if(l){if(g.enqueue(`0\r
`),a){let f=r(await A);g.enqueue(`${i}:${f}\r
`),g.enqueue(`\r
`)}g.close()}else g.enqueue(`${(n(d)||0).toString(16)}\r
${d}\r
`)}})};var zt=e=>encodeURIComponent(e).replace(/[!'()*]/g,cH),cH=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`;function ry(e){let t=[];for(let r of Object.keys(e).sort()){let n=e[r];if(r=zt(r),Array.isArray(n))for(let o=0,i=n.length;o<i;o++)t.push(`${r}=${zt(n[o])}`);else{let o=r;(n||typeof n=="string")&&(o+=`=${zt(n)}`),t.push(o)}}return t.join("&")}function Yl(e,t){return new Request(e,t)}function ny(e=0){return new Promise((t,r)=>{e&&setTimeout(()=>{let n=new Error(`Request did not complete within ${e} ms`);n.name="TimeoutError",r(n)},e)})}var Wl={supported:void 0},Ra=class e{static create(t){return typeof t?.handle=="function"?t:new e(t)}constructor(t){typeof t=="function"?this.configProvider=t().then(r=>r||{}):(this.config=t??{},this.configProvider=Promise.resolve(this.config)),Wl.supported===void 0&&(Wl.supported=typeof Request<"u"&&"keepalive"in Yl("https://[::1]"))}destroy(){}async handle(t,{abortSignal:r}={}){this.config||(this.config=await this.configProvider);let n=this.config.requestTimeout,o=this.config.keepAlive===!0,i=this.config.credentials;if(r?.aborted){let C=new Error("Request aborted");return C.name="AbortError",Promise.reject(C)}let s=t.path,a=ry(t.query||{});a&&(s+=`?${a}`),t.fragment&&(s+=`#${t.fragment}`);let A="";if(t.username!=null||t.password!=null){let C=t.username??"",Q=t.password??"";A=`${C}:${Q}@`}let{port:c,method:g}=t,d=`${t.protocol}//${A}${t.hostname}${c?`:${c}`:""}${s}`,l=g==="GET"||g==="HEAD"?void 0:t.body,f={body:l,headers:new Headers(t.headers),method:g,credentials:i};this.config?.cache&&(f.cache=this.config.cache),l&&(f.duplex="half"),typeof AbortController<"u"&&(f.signal=r),Wl.supported&&(f.keepalive=o),typeof this.config.requestInit=="function"&&Object.assign(f,this.config.requestInit(t));let u=()=>{},m=Yl(d,f),p=[fetch(m).then(C=>{let Q=C.headers,R={};for(let D of Q.entries())R[D[0]]=D[1];return C.body!=null?{response:new yt({headers:R,reason:C.statusText,statusCode:C.status,body:C.body})}:C.blob().then(D=>({response:new yt({headers:R,reason:C.statusText,statusCode:C.status,body:D})}))}),ny(n)];return r&&p.push(new Promise((C,Q)=>{let R=()=>{let B=new Error("Request aborted");B.name="AbortError",Q(B)};if(typeof r.addEventListener=="function"){let B=r;B.addEventListener("abort",R,{once:!0}),u=()=>B.removeEventListener("abort",R)}else r.onabort=R})),Promise.race(p).finally(u)}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>(n[t]=r,n))}httpHandlerConfigs(){return this.config??{}}};var Na=async e=>typeof Blob=="function"&&e instanceof Blob||e.constructor?.name==="Blob"?new Uint8Array(await e.arrayBuffer()):gH(e);async function gH(e){let t=[],r=e.getReader(),n=!1,o=0;for(;!n;){let{done:a,value:A}=await r.read();A&&(t.push(A),o+=A.length),n=a}let i=new Uint8Array(o),s=0;for(let a of t)i.set(a,s),s+=a.length;return i}var oy={},jl={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),oy[e]=t,jl[t]=e}function Ta(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){let n=e.slice(r,r+2).toLowerCase();if(n in jl)t[r/2]=jl[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return t}function be(e){let t="";for(let r=0;r<e.byteLength;r++)t+=oy[e[r]];return t}var Ni=e=>typeof ReadableStream=="function"&&(e?.constructor?.name===ReadableStream.name||e instanceof ReadableStream);var iy="The stream has already been transformed.",ay=e=>{if(!sy(e)&&!Ni(e)){let o=e?.__proto__?.constructor?.name||e;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${o}`)}let t=!1,r=async()=>{if(t)throw new Error(iy);return t=!0,await Na(e)},n=o=>{if(typeof o.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return o.stream()};return Object.assign(e,{transformToByteArray:r,transformToString:async o=>{let i=await r();if(o==="base64")return sn(i);if(o==="hex")return be(i);if(o===void 0||o==="utf8"||o==="utf-8")return Fo(i);if(typeof TextDecoder=="function")return new TextDecoder(o).decode(i);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(t)throw new Error(iy);if(t=!0,sy(e))return n(e);if(Ni(e))return e;throw new Error(`Cannot transform payload to web stream, got ${e}`)}})},sy=e=>typeof Blob=="function"&&e instanceof Blob;async function Ay(e){return typeof e.stream=="function"&&(e=e.stream()),e.tee()}async function cy(e,t){let r=0,n=[],o=e.getReader(),i=!1;for(;!i;){let{done:A,value:c}=await o.read();if(c&&(n.push(c),r+=c?.byteLength??0),r>=t)break;i=A}o.releaseLock();let s=new Uint8Array(Math.min(t,r)),a=0;for(let A of n){if(A.byteLength>s.byteLength-a){s.set(A.subarray(0,s.byteLength-a),a);break}else s.set(A,a);a+=A.length}return s}var lH=typeof ReadableStream=="function"?ReadableStream:function(){},Ma=class extends lH{};var gy=({expectedChecksum:e,checksum:t,source:r,checksumSourceLocation:n,base64Encoder:o})=>{if(!Ni(r))throw new Error(`@smithy/util-stream: unsupported source type ${r?.constructor?.name??r} in ChecksumStream.`);let i=o??sn;if(typeof TransformStream!="function")throw new Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");let s=new TransformStream({start(){},async transform(A,c){t.update(A),c.enqueue(A)},async flush(A){let c=await t.digest(),g=i(c);if(e!==g){let d=new Error(`Checksum mismatch: expected "${e}" but received "${g}" in response header "${n}".`);A.error(d)}else A.terminate()}});r.pipeThrough(s);let a=s.readable;return Object.setPrototypeOf(a,Ma.prototype),a};var Ti=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return _r.mutate(e);if(!e)return _r.mutate(new Uint8Array);let r=t.streamCollector(e);return _r.mutate(await r)};function Ua(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var Xl=(e,t,r,n,o,i)=>{if(t!=null&&t[r]!==void 0){let s=n();if(s.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");e=e.replace(o,i?s.split("/").map(a=>Ua(a)).join("/"):Ua(s))}else throw new Error("No value provided for input HTTP label: "+r+".");return e};function Oa(e,t){return new Zl(e,t)}var Zl=class{constructor(t,r){this.input=t,this.context=r,this.query={},this.method="",this.headers={},this.path="",this.body=null,this.hostname="",this.resolvePathStack=[]}async build(){let{hostname:t,protocol:r="https",port:n,path:o}=await this.context.endpoint();this.path=o;for(let i of this.resolvePathStack)i(this.path);return new ee({protocol:r,hostname:this.hostname||t,port:n,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(t){return this.hostname=t,this}bp(t){return this.resolvePathStack.push(r=>{this.path=`${r?.endsWith("/")?r.slice(0,-1):r||""}`+t}),this}p(t,r,n,o){return this.resolvePathStack.push(i=>{this.path=Xl(i,this.input,t,r,n,o)}),this}h(t){return this.headers=t,this}q(t){return this.query=t,this}b(t){return this.body=t,this}m(t){return this.method=t,this}};function ly(e,t,r){e.__smithy_context?e.__smithy_context.features||(e.__smithy_context.features={}):e.__smithy_context={features:{}},e.__smithy_context.features[t]=r}var Pa=class{constructor(t){this.authSchemes=new Map;for(let[r,n]of Object.entries(t))n!==void 0&&this.authSchemes.set(r,n)}getIdentityProvider(t){return this.authSchemes.get(t)}};var dH=e=>t=>$l(t)&&t.expiration.getTime()-Date.now()<e;var dy=dH(3e5),$l=e=>e.expiration!==void 0,fy=(e,t,r)=>{if(e===void 0)return;let n=typeof e!="function"?async()=>Promise.resolve(e):e,o,i,s,a=!1,A=async c=>{i||(i=n(c));try{o=await i,s=!0,a=!1}finally{i=void 0}return o};return t===void 0?async c=>((!s||c?.forceRefresh)&&(o=await A(c)),o):async c=>((!s||c?.forceRefresh)&&(o=await A(c)),a?o:r(o)?(t(o)&&await A(c),o):(a=!0,o))};var uy=(e,t,r)=>{let n,o,i,s=!1,a=async()=>{o||(o=e());try{n=await o,i=!0,s=!1}finally{o=void 0}return n};return t===void 0?async A=>((!i||A?.forceRefresh)&&(n=await a()),n):async A=>((!i||A?.forceRefresh)&&(n=await a()),s?n:r&&!r(n)?(s=!0,n):(t(n)&&await a(),n))};var Iy=e=>(e.sigv4aSigningRegionSet=kr(e.sigv4aSigningRegionSet),e);var py="X-Amz-Algorithm",my="X-Amz-Credential",td="X-Amz-Date",hy="X-Amz-SignedHeaders",Cy="X-Amz-Expires",rd="X-Amz-Signature",nd="X-Amz-Security-Token";var od="authorization",id=td.toLowerCase(),fH="date",By=[od,id,fH],Ey=rd.toLowerCase(),Mi="x-amz-content-sha256",yy=nd.toLowerCase();var Qy={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},wy=/^proxy-/,Sy=/^sec-/;var Ga="AWS4-HMAC-SHA256";var xy="AWS4-HMAC-SHA256-PAYLOAD",by="UNSIGNED-PAYLOAD",Dy=50,sd="aws4_request",ky=60*60*24*7;var Ha={},ad=[],qa=(e,t,r)=>`${e}/${t}/${r}/${sd}`,_y=async(e,t,r,n,o)=>{let i=await Fy(e,t.secretAccessKey,t.accessKeyId),s=`${r}:${n}:${o}:${be(i)}:${t.sessionToken}`;if(s in Ha)return Ha[s];for(ad.push(s);ad.length>Dy;)delete Ha[ad.shift()];let a=`AWS4${t.secretAccessKey}`;for(let A of[r,n,o,sd])a=await Fy(e,a,A);return Ha[s]=a};var Fy=(e,t,r)=>{let n=new e(t);return n.update(lr(r)),n.digest()};var La=({headers:e},t,r)=>{let n={};for(let o of Object.keys(e).sort()){if(e[o]==null)continue;let i=o.toLowerCase();(i in Qy||t?.has(i)||wy.test(i)||Sy.test(i))&&(!r||r&&!r.has(i))||(n[i]=e[o].trim().replace(/\s+/g," "))}return n};var Ad=({query:e={}})=>{let t=[],r={};for(let n of Object.keys(e)){if(n.toLowerCase()===Ey)continue;let o=zt(n);t.push(o);let i=e[n];typeof i=="string"?r[o]=`${o}=${zt(i)}`:Array.isArray(i)&&(r[o]=i.slice(0).reduce((s,a)=>s.concat([`${o}=${zt(a)}`]),[]).sort().join("&"))}return t.sort().map(n=>r[n]).filter(n=>n).join("&")};var Ka=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]";var Ui=async({headers:e,body:t},r)=>{for(let n of Object.keys(e))if(n.toLowerCase()===Mi)return e[n];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||Ka(t)){let n=new r;return n.update(lr(t)),be(await n.digest())}return by};var Ja=class{format(t){let r=[];for(let i of Object.keys(t)){let s=Qt(i);r.push(Uint8Array.from([s.byteLength]),s,this.formatHeaderValue(t[i]))}let n=new Uint8Array(r.reduce((i,s)=>i+s.byteLength,0)),o=0;for(let i of r)n.set(i,o),o+=i.byteLength;return n}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,t.value,!1),new Uint8Array(n.buffer);case"long":let o=new Uint8Array(9);return o[0]=5,o.set(t.value.bytes,1),o;case"binary":let i=new DataView(new ArrayBuffer(3+t.value.byteLength));i.setUint8(0,6),i.setUint16(1,t.value.byteLength,!1);let s=new Uint8Array(i.buffer);return s.set(t.value,3),s;case"string":let a=Qt(t.value),A=new DataView(new ArrayBuffer(3+a.byteLength));A.setUint8(0,7),A.setUint16(1,a.byteLength,!1);let c=new Uint8Array(A.buffer);return c.set(a,3),c;case"timestamp":let g=new Uint8Array(9);return g[0]=8,g.set(cd.fromNumber(t.value.valueOf()).bytes,1),g;case"uuid":if(!uH.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);let d=new Uint8Array(17);return d[0]=9,d.set(Ta(t.value.replace(/\-/g,"")),1),d}}},vy;(function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"})(vy||(vy={}));var uH=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,cd=class e{constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,o=Math.abs(Math.round(t));n>-1&&o>0;n--,o/=256)r[n]=o;return t<0&&Ry(r),new e(r)}valueOf(){let t=this.bytes.slice(0),r=t[0]&128;return r&&Ry(t),parseInt(be(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function Ry(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}var Ny=(e,t)=>{e=e.toLowerCase();for(let r of Object.keys(t))if(e===r.toLowerCase())return!0;return!1};var gd=(e,t={})=>{let{headers:r,query:n={}}=ee.clone(e);for(let o of Object.keys(r)){let i=o.toLowerCase();(i.slice(0,6)==="x-amz-"&&!t.unhoistableHeaders?.has(i)||t.hoistableHeaders?.has(i))&&(n[o]=r[o],delete r[o])}return{...e,headers:r,query:n}};var Va=e=>{e=ee.clone(e);for(let t of Object.keys(e.headers))By.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e};var Ty=e=>IH(e).toISOString().replace(/\.\d{3}Z$/,"Z"),IH=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e;var vn=class{constructor({applyChecksum:t,credentials:r,region:n,service:o,sha256:i,uriEscapePath:s=!0}){this.headerFormatter=new Ja,this.service=o,this.sha256=i,this.uriEscapePath=s,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=We(n),this.credentialProvider=We(r)}async presign(t,r={}){let{signingDate:n=new Date,expiresIn:o=3600,unsignableHeaders:i,unhoistableHeaders:s,signableHeaders:a,hoistableHeaders:A,signingRegion:c,signingService:g}=r,d=await this.credentialProvider();this.validateResolvedCredentials(d);let l=c??await this.regionProvider(),{longDate:f,shortDate:u}=za(n);if(o>ky)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let m=qa(u,l,g??this.service),p=gd(Va(t),{unhoistableHeaders:s,hoistableHeaders:A});d.sessionToken&&(p.query[nd]=d.sessionToken),p.query[py]=Ga,p.query[my]=`${d.accessKeyId}/${m}`,p.query[td]=f,p.query[Cy]=o.toString(10);let C=La(p,i,a);return p.query[hy]=My(C),p.query[rd]=await this.getSignature(f,m,this.getSigningKey(d,l,u,g),this.createCanonicalRequest(p,C,await Ui(t,this.sha256))),p}async sign(t,r){return typeof t=="string"?this.signString(t,r):t.headers&&t.payload?this.signEvent(t,r):t.message?this.signMessage(t,r):this.signRequest(t,r)}async signEvent({headers:t,payload:r},{signingDate:n=new Date,priorSignature:o,signingRegion:i,signingService:s}){let a=i??await this.regionProvider(),{shortDate:A,longDate:c}=za(n),g=qa(A,a,s??this.service),d=await Ui({headers:{},body:r},this.sha256),l=new this.sha256;l.update(t);let f=be(await l.digest()),u=[xy,c,g,o,f,d].join(`
`);return this.signString(u,{signingDate:n,signingRegion:a,signingService:s})}async signMessage(t,{signingDate:r=new Date,signingRegion:n,signingService:o}){return this.signEvent({headers:this.headerFormatter.format(t.message.headers),payload:t.message.body},{signingDate:r,signingRegion:n,signingService:o,priorSignature:t.priorSignature}).then(s=>({message:t.message,signature:s}))}async signString(t,{signingDate:r=new Date,signingRegion:n,signingService:o}={}){let i=await this.credentialProvider();this.validateResolvedCredentials(i);let s=n??await this.regionProvider(),{shortDate:a}=za(r),A=new this.sha256(await this.getSigningKey(i,s,a,o));return A.update(lr(t)),be(await A.digest())}async signRequest(t,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:o,signingRegion:i,signingService:s}={}){let a=await this.credentialProvider();this.validateResolvedCredentials(a);let A=i??await this.regionProvider(),c=Va(t),{longDate:g,shortDate:d}=za(r),l=qa(d,A,s??this.service);c.headers[id]=g,a.sessionToken&&(c.headers[yy]=a.sessionToken);let f=await Ui(c,this.sha256);!Ny(Mi,c.headers)&&this.applyChecksum&&(c.headers[Mi]=f);let u=La(c,o,n),m=await this.getSignature(g,l,this.getSigningKey(a,A,d,s),this.createCanonicalRequest(c,u,f));return c.headers[od]=`${Ga} Credential=${a.accessKeyId}/${l}, SignedHeaders=${My(u)}, Signature=${m}`,c}createCanonicalRequest(t,r,n){let o=Object.keys(r).sort();return`${t.method}
${this.getCanonicalPath(t)}
${Ad(t)}
${o.map(i=>`${i}:${r[i]}`).join(`
`)}

${o.join(";")}
${n}`}async createStringToSign(t,r,n){let o=new this.sha256;o.update(lr(n));let i=await o.digest();return`${Ga}
${t}
${r}
${be(i)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){let r=[];for(let i of t.split("/"))i?.length!==0&&i!=="."&&(i===".."?r.pop():r.push(i));let n=`${t?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&t?.endsWith("/")?"/":""}`;return zt(n).replace(/%2F/g,"/")}return t}async getSignature(t,r,n,o){let i=await this.createStringToSign(t,r,o),s=new this.sha256(await n);return s.update(lr(i)),be(await s.digest())}getSigningKey(t,r,n,o){return _y(this.sha256,t,n,r,o||this.service)}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}},za=e=>{let t=Ty(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.slice(0,8)}},My=e=>Object.keys(e).sort().join(";");var Uy=e=>{let t=!1,r;e.credentials&&(t=!0,r=fy(e.credentials,dy,$l)),r||(e.credentialDefaultProvider?r=kr(e.credentialDefaultProvider(Object.assign({},e,{parentClientConfig:e}))):r=async()=>{throw new Error("`credentials` is missing")});let{signingEscapePath:n=!0,systemClockOffset:o=e.systemClockOffset||0,sha256:i}=e,s;return e.signer?s=kr(e.signer):e.regionInfoProvider?s=()=>kr(e.region)().then(async a=>[await e.regionInfoProvider(a,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},a]).then(([a,A])=>{let{signingRegion:c,signingService:g}=a;e.signingRegion=e.signingRegion||c||A,e.signingName=e.signingName||g||e.serviceId;let d={...e,credentials:r,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:n},l=e.signerConstructor||vn;return new l(d)}):s=async a=>{a=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await kr(e.region)(),properties:{}},a);let A=a.signingRegion,c=a.signingName;e.signingRegion=e.signingRegion||A,e.signingName=e.signingName||c||e.serviceId;let g={...e,credentials:r,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:n},d=e.signerConstructor||vn;return new d(g)},{...e,systemClockOffset:o,signingEscapePath:n,credentials:t?async()=>r().then(a=>JE(a,"CREDENTIALS_CODE","e")):r,signer:s}};var Rn=(e,t)=>{let r=[];if(e&&r.push(e),t)for(let n of t)r.push(n);return r},an=(e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,_o=()=>{let e=[],t=[],r=!1,n=new Set,o=d=>d.sort((l,f)=>Oy[f.step]-Oy[l.step]||Py[f.priority||"normal"]-Py[l.priority||"normal"]),i=d=>{let l=!1,f=u=>{let m=Rn(u.name,u.aliases);if(m.includes(d)){l=!0;for(let p of m)n.delete(p);return!1}return!0};return e=e.filter(f),t=t.filter(f),l},s=d=>{let l=!1,f=u=>{if(u.middleware===d){l=!0;for(let m of Rn(u.name,u.aliases))n.delete(m);return!1}return!0};return e=e.filter(f),t=t.filter(f),l},a=d=>(e.forEach(l=>{d.add(l.middleware,{...l})}),t.forEach(l=>{d.addRelativeTo(l.middleware,{...l})}),d.identifyOnResolve?.(g.identifyOnResolve()),d),A=d=>{let l=[];return d.before.forEach(f=>{f.before.length===0&&f.after.length===0?l.push(f):l.push(...A(f))}),l.push(d),d.after.reverse().forEach(f=>{f.before.length===0&&f.after.length===0?l.push(f):l.push(...A(f))}),l},c=(d=!1)=>{let l=[],f=[],u={};return e.forEach(p=>{let C={...p,before:[],after:[]};for(let Q of Rn(C.name,C.aliases))u[Q]=C;l.push(C)}),t.forEach(p=>{let C={...p,before:[],after:[]};for(let Q of Rn(C.name,C.aliases))u[Q]=C;f.push(C)}),f.forEach(p=>{if(p.toMiddleware){let C=u[p.toMiddleware];if(C===void 0){if(d)return;throw new Error(`${p.toMiddleware} is not found when adding ${an(p.name,p.aliases)} middleware ${p.relation} ${p.toMiddleware}`)}p.relation==="after"&&C.after.push(p),p.relation==="before"&&C.before.push(p)}}),o(l).map(A).reduce((p,C)=>(p.push(...C),p),[])},g={add:(d,l={})=>{let{name:f,override:u,aliases:m}=l,p={step:"initialize",priority:"normal",middleware:d,...l},C=Rn(f,m);if(C.length>0){if(C.some(Q=>n.has(Q))){if(!u)throw new Error(`Duplicate middleware name '${an(f,m)}'`);for(let Q of C){let R=e.findIndex(D=>D.name===Q||D.aliases?.some(E=>E===Q));if(R===-1)continue;let B=e[R];if(B.step!==p.step||p.priority!==B.priority)throw new Error(`"${an(B.name,B.aliases)}" middleware with ${B.priority} priority in ${B.step} step cannot be overridden by "${an(f,m)}" middleware with ${p.priority} priority in ${p.step} step.`);e.splice(R,1)}}for(let Q of C)n.add(Q)}e.push(p)},addRelativeTo:(d,l)=>{let{name:f,override:u,aliases:m}=l,p={middleware:d,...l},C=Rn(f,m);if(C.length>0){if(C.some(Q=>n.has(Q))){if(!u)throw new Error(`Duplicate middleware name '${an(f,m)}'`);for(let Q of C){let R=t.findIndex(D=>D.name===Q||D.aliases?.some(E=>E===Q));if(R===-1)continue;let B=t[R];if(B.toMiddleware!==p.toMiddleware||B.relation!==p.relation)throw new Error(`"${an(B.name,B.aliases)}" middleware ${B.relation} "${B.toMiddleware}" middleware cannot be overridden by "${an(f,m)}" middleware ${p.relation} "${p.toMiddleware}" middleware.`);t.splice(R,1)}}for(let Q of C)n.add(Q)}t.push(p)},clone:()=>a(_o()),use:d=>{d.applyToStack(g)},remove:d=>typeof d=="string"?i(d):s(d),removeByTag:d=>{let l=!1,f=u=>{let{tags:m,name:p,aliases:C}=u;if(m&&m.includes(d)){let Q=Rn(p,C);for(let R of Q)n.delete(R);return l=!0,!1}return!0};return e=e.filter(f),t=t.filter(f),l},concat:d=>{let l=a(_o());return l.use(d),l.identifyOnResolve(r||l.identifyOnResolve()||(d.identifyOnResolve?.()??!1)),l},applyToStack:a,identify:()=>c(!0).map(d=>{let l=d.step??d.relation+" "+d.toMiddleware;return an(d.name,d.aliases)+" - "+l}),identifyOnResolve(d){return typeof d=="boolean"&&(r=d),r},resolve:(d,l)=>{for(let f of c().map(u=>u.middleware).reverse())d=f(d,l);return d}};return g},Oy={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},Py={high:3,normal:2,low:1};var Ya=class{constructor(t){this.config=t,this.middlewareStack=_o()}send(t,r,n){let o=typeof r!="function"?r:void 0,i=typeof r=="function"?r:n,s=o===void 0&&this.config.cacheMiddleware===!0,a;if(s){this.handlers||(this.handlers=new WeakMap);let A=this.handlers;A.has(t.constructor)?a=A.get(t.constructor):(a=t.resolveMiddleware(this.middlewareStack,this.config,o),A.set(t.constructor,a))}else delete this.handlers,a=t.resolveMiddleware(this.middlewareStack,this.config,o);if(i)a(t).then(A=>i(null,A.output),A=>i(A)).catch(()=>{});else return a(t).then(A=>A.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}};var Nn=class{constructor(){this.middlewareStack=_o()}static classBuilder(){return new ld}resolveMiddlewareWithContext(t,r,n,{middlewareFn:o,clientName:i,commandName:s,inputFilterSensitiveLog:a,outputFilterSensitiveLog:A,smithyContext:c,additionalContext:g,CommandCtor:d}){for(let p of o.bind(this)(d,t,r,n))this.middlewareStack.use(p);let l=t.concat(this.middlewareStack),{logger:f}=r,u={logger:f,clientName:i,commandName:s,inputFilterSensitiveLog:a,outputFilterSensitiveLog:A,[Do]:{commandInstance:this,...c},...g},{requestHandler:m}=r;return l.resolve(p=>m.handle(p.request,n||{}),u)}},ld=class{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=t=>t,this._outputFilterSensitiveLog=t=>t,this._serializer=null,this._deserializer=null}init(t){this._init=t}ep(t){return this._ep=t,this}m(t){return this._middlewareFn=t,this}s(t,r,n={}){return this._smithyContext={service:t,operation:r,...n},this}c(t={}){return this._additionalContext=t,this}n(t,r){return this._clientName=t,this._commandName=r,this}f(t=n=>n,r=n=>n){return this._inputFilterSensitiveLog=t,this._outputFilterSensitiveLog=r,this}ser(t){return this._serializer=t,this}de(t){return this._deserializer=t,this}build(){let t=this,r;return r=class extends Nn{static getEndpointParameterInstructions(){return t._ep}constructor(...[n]){super(),this.serialize=t._serializer,this.deserialize=t._deserializer,this.input=n??{},t._init(this)}resolveMiddleware(n,o,i){return this.resolveMiddlewareWithContext(n,o,i,{CommandCtor:r,middlewareFn:t._middlewareFn,clientName:t._clientName,commandName:t._commandName,inputFilterSensitiveLog:t._inputFilterSensitiveLog,outputFilterSensitiveLog:t._outputFilterSensitiveLog,smithyContext:t._smithyContext,additionalContext:t._additionalContext})}}}};var wt="***SensitiveInformation***";var fd=e=>{switch(e){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${e}"`)}};var pH=e=>{if(e!=null){if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&jy.warn(Wy(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},mH=Math.ceil(34028234663852886e22),Gy=e=>{let t=pH(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>mH)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},dd=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}};var Hy=e=>Ly(e,16),qy=e=>Ly(e,8),Ly=(e,t)=>{let r=dd(e);if(r!==void 0&&hH(r,t)!==r)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return r},hH=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},ud=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},Ky=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;let t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},vo=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return jy.warn(Wy(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}};var Jy=e=>Gy(typeof e=="string"?Wa(e):e),CH=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Wa=e=>{let t=e.match(CH);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)};var Vy=e=>dd(typeof e=="string"?Wa(e):e);var zy=e=>Hy(typeof e=="string"?Wa(e):e),Yy=e=>qy(typeof e=="string"?Wa(e):e),Wy=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),jy={warn:console.warn};var BH=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Xy=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Zy(e){let t=e.getUTCFullYear(),r=e.getUTCMonth(),n=e.getUTCDay(),o=e.getUTCDate(),i=e.getUTCHours(),s=e.getUTCMinutes(),a=e.getUTCSeconds(),A=o<10?`0${o}`:`${o}`,c=i<10?`0${i}`:`${i}`,g=s<10?`0${s}`:`${s}`,d=a<10?`0${a}`:`${a}`;return`${BH[n]}, ${A} ${Xy[r]} ${t} ${c}:${g}:${d} GMT`}var lAe=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/);var EH=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),$y=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=EH.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,o,i,s,a,A,c,g]=t,d=zy(eQ(n)),l=Oi(o,"month",1,12),f=Oi(i,"day",1,31),u=yH(d,l,f,{hours:s,minutes:a,seconds:A,fractionalMilliseconds:c});return g.toUpperCase()!="Z"&&u.setTime(u.getTime()-bH(g)),u},dAe=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),fAe=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),uAe=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/);var yH=(e,t,r,n)=>{let o=t-1;return wH(e,o,r),new Date(Date.UTC(e,o,r,Oi(n.hours,"hour",0,23),Oi(n.minutes,"minute",0,59),Oi(n.seconds,"seconds",0,60),xH(n.fractionalMilliseconds)))};var IAe=50*365*24*60*60*1e3;var QH=[31,28,31,30,31,30,31,31,30,31,30,31],wH=(e,t,r)=>{let n=QH[t];if(t===1&&SH(e)&&(n=29),r>n)throw new TypeError(`Invalid day for ${Xy[t]} in ${e}: ${r}`)},SH=e=>e%4===0&&(e%100!==0||e%400===0),Oi=(e,t,r,n)=>{let o=Yy(eQ(e));if(o<r||o>n)throw new TypeError(`${t} must be between ${r} and ${n}, inclusive`);return o},xH=e=>e==null?0:Jy("0."+e)*1e3,bH=e=>{let t=e[0],r=1;if(t=="+")r=1;else if(t=="-")r=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);let n=Number(e.substring(1,3)),o=Number(e.substring(4,6));return r*(n*60+o)*60*1e3},eQ=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)};var ja=class e extends Error{constructor(t){super(t.message),Object.setPrototypeOf(this,e.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}},Ze=(e,t={})=>{Object.entries(t).filter(([,n])=>n!==void 0).forEach(([n,o])=>{(e[n]==null||e[n]==="")&&(e[n]=o)});let r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e};var DH=({output:e,parsedBody:t,exceptionCtor:r,errorCode:n})=>{let o=kH(e),i=o.httpStatusCode?o.httpStatusCode+"":void 0,s=new r({name:t?.code||t?.Code||n||i||"UnknownError",$fault:"client",$metadata:o});throw Ze(s,t)},tQ=e=>({output:t,parsedBody:r,errorCode:n})=>{DH({output:t,parsedBody:r,exceptionCtor:e,errorCode:n})},kH=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]});var rQ=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}};var nQ=e=>{let t=[];for(let r in bo){let n=bo[r];e[n]!==void 0&&t.push({algorithmId:()=>n,checksumConstructor:()=>e[n]})}return{_checksumAlgorithms:t,addChecksumAlgorithm(r){this._checksumAlgorithms.push(r)},checksumAlgorithms(){return this._checksumAlgorithms}}},oQ=e=>{let t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t};var iQ=e=>{let t=e.retryStrategy;return{setRetryStrategy(r){t=r},retryStrategy(){return t}}},sQ=e=>{let t={};return t.retryStrategy=e.retryStrategy(),t};var aQ=e=>({...nQ(e),...iQ(e)});var AQ=e=>({...oQ(e),...sQ(e)});var Id=e=>{let t="#text";for(let r in e)e.hasOwnProperty(r)&&e[r][t]!==void 0?e[r]=e[r][t]:typeof e[r]=="object"&&e[r]!==null&&(e[r]=Id(e[r]));return e};var vr=e=>e!=null;var Ro=function(t){return Object.assign(new String(t),{deserializeJSON(){return JSON.parse(String(t))},toString(){return String(t)},toJSON(){return String(t)}})};Ro.from=e=>e&&typeof e=="object"&&(e instanceof Ro||"deserializeJSON"in e)?e:typeof e=="string"||Object.getPrototypeOf(e)===String.prototype?Ro(String(e)):Ro(JSON.stringify(e));Ro.fromObject=Ro.from;var An=class{trace(){}debug(){}info(){}warn(){}error(){}};function De(e,t,r){let n,o,i;if(typeof t>"u"&&typeof r>"u")n={},i=e;else{if(n=e,typeof t=="function")return o=t,i=r,FH(n,o,i);i=t}for(let s of Object.keys(i)){if(!Array.isArray(i[s])){n[s]=i[s];continue}_H(n,null,i,s)}return n}var FH=(e,t,r)=>De(e,Object.entries(r).reduce((n,[o,i])=>(Array.isArray(i)?n[o]=i:typeof i=="function"?n[o]=[t,i()]:n[o]=[t,i],n),{})),_H=(e,t,r,n)=>{if(t!==null){let s=r[n];typeof s=="function"&&(s=[,s]);let[a=vH,A=RH,c=n]=s;(typeof a=="function"&&a(t[c])||typeof a!="function"&&a)&&(e[n]=A(t[c]));return}let[o,i]=r[n];if(typeof i=="function"){let s,a=o===void 0&&(s=i())!=null,A=typeof o=="function"&&!!o(void 0)||typeof o!="function"&&!!o;a?e[n]=s:A&&(e[n]=i())}else{let s=o===void 0&&i!=null,a=typeof o=="function"&&!!o(i)||typeof o!="function"&&!!o;(s||a)&&(e[n]=i)}},vH=e=>e!=null,RH=e=>e;var cQ=e=>e.toISOString().replace(".000Z","Z");var gQ=(e,t)=>Ti(e,t).then(r=>t.utf8Encoder(r));var LQ=J(qQ());var wd=(e,t)=>gQ(e,t).then(r=>{if(r.length){let n=new LQ.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(A,c)=>c.trim()===""&&c.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let o;try{o=n.parse(r,!0)}catch(A){throw A&&typeof A=="object"&&Object.defineProperty(A,"$responseBodyText",{value:r}),A}let i="#text",s=Object.keys(o)[0],a=o[s];return a[i]&&(a[s]=a[i],delete a[i]),Id(a)}return{}}),KQ=async(e,t)=>{let r=await wd(e,t);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},JQ=(e,t)=>{if(t?.Error?.Code!==void 0)return t.Error.Code;if(t?.Code!==void 0)return t.Code;if(e.statusCode==404)return"NotFound"};var Hi=[he.CRC32,he.CRC32C,he.SHA1,he.SHA256],VQ=[he.SHA256,he.SHA1,he.CRC32,he.CRC32C];var zQ=(e,{requestChecksumRequired:t,requestAlgorithmMember:r},n)=>{let o=n?KE:LE;if(!r||!e[r])return t?o:void 0;let i=e[r];if(!Hi.includes(i))throw new Error(`The checksum algorithm "${i}" is not supported by the client. Select one of ${Hi}.`);return i};var No=e=>e===he.MD5?"content-md5":`x-amz-checksum-${e.toLowerCase()}`;var YQ=(e,t)=>{let r=e.toLowerCase();for(let n of Object.keys(t))if(r===n.toLowerCase())return!0;return!1};var To=e=>e!==void 0&&typeof e!="string"&&!ArrayBuffer.isView(e)&&!Ka(e);var Sd=e=>new TextEncoder().encode(e);var qq=typeof Buffer<"u"&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:Sd;function ct(e){return e instanceof Uint8Array?e:typeof e=="string"?qq(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}function dr(e){return typeof e=="string"?e.length===0:e.byteLength===0}function qi(e){return new Uint8Array([(e&4278190080)>>24,(e&16711680)>>16,(e&65280)>>8,e&255])}function Li(e){if(!Uint32Array.from){for(var t=new Uint32Array(e.length),r=0;r<e.length;)t[r]=e[r],r+=1;return t}return Uint32Array.from(e)}var bd=function(){function e(){this.crc32c=new xd}return e.prototype.update=function(t){dr(t)||this.crc32c.update(ct(t))},e.prototype.digest=function(){return $r(this,void 0,void 0,function(){return sr(this,function(t){return[2,qi(this.crc32c.digest())]})})},e.prototype.reset=function(){this.crc32c=new xd},e}();var xd=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(t){var r,n;try{for(var o=Et(t),i=o.next();!i.done;i=o.next()){var s=i.value;this.checksum=this.checksum>>>8^Kq[(this.checksum^s)&255]}}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return this},e.prototype.digest=function(){return(this.checksum^4294967295)>>>0},e}();var Lq=[0,4067132163,3778769143,324072436,3348797215,904991772,648144872,3570033899,2329499855,2024987596,1809983544,2575936315,1296289744,3207089363,2893594407,1578318884,274646895,3795141740,4049975192,51262619,3619967088,632279923,922689671,3298075524,2592579488,1760304291,2075979607,2312596564,1562183871,2943781820,3156637768,1313733451,549293790,3537243613,3246849577,871202090,3878099393,357341890,102525238,4101499445,2858735121,1477399826,1264559846,3107202533,1845379342,2677391885,2361733625,2125378298,820201905,3263744690,3520608582,598981189,4151959214,85089709,373468761,3827903834,3124367742,1213305469,1526817161,2842354314,2107672161,2412447074,2627466902,1861252501,1098587580,3004210879,2688576843,1378610760,2262928035,1955203488,1742404180,2511436119,3416409459,969524848,714683780,3639785095,205050476,4266873199,3976438427,526918040,1361435347,2739821008,2954799652,1114974503,2529119692,1691668175,2005155131,2247081528,3690758684,697762079,986182379,3366744552,476452099,3993867776,4250756596,255256311,1640403810,2477592673,2164122517,1922457750,2791048317,1412925310,1197962378,3037525897,3944729517,427051182,170179418,4165941337,746937522,3740196785,3451792453,1070968646,1905808397,2213795598,2426610938,1657317369,3053634322,1147748369,1463399397,2773627110,4215344322,153784257,444234805,3893493558,1021025245,3467647198,3722505002,797665321,2197175160,1889384571,1674398607,2443626636,1164749927,3070701412,2757221520,1446797203,137323447,4198817972,3910406976,461344835,3484808360,1037989803,781091935,3705997148,2460548119,1623424788,1939049696,2180517859,1429367560,2807687179,3020495871,1180866812,410100952,3927582683,4182430767,186734380,3756733383,763408580,1053836080,3434856499,2722870694,1344288421,1131464017,2971354706,1708204729,2545590714,2229949006,1988219213,680717673,3673779818,3383336350,1002577565,4010310262,493091189,238226049,4233660802,2987750089,1082061258,1395524158,2705686845,1972364758,2279892693,2494862625,1725896226,952904198,3399985413,3656866545,731699698,4283874585,222117402,510512622,3959836397,3280807620,837199303,582374963,3504198960,68661723,4135334616,3844915500,390545967,1230274059,3141532936,2825850620,1510247935,2395924756,2091215383,1878366691,2644384480,3553878443,565732008,854102364,3229815391,340358836,3861050807,4117890627,119113024,1493875044,2875275879,3090270611,1247431312,2660249211,1828433272,2141937292,2378227087,3811616794,291187481,34330861,4032846830,615137029,3603020806,3314634738,939183345,1776939221,2609017814,2295496738,2058945313,2926798794,1545135305,1330124605,3173225534,4084100981,17165430,307568514,3762199681,888469610,3332340585,3587147933,665062302,2042050490,2346497209,2559330125,1793573966,3190661285,1279665062,1595330642,2910671697],Kq=Li(Lq);var Dd=function(){function e(){this.crc32=new Mn}return e.prototype.update=function(t){dr(t)||this.crc32.update(ct(t))},e.prototype.digest=function(){return $r(this,void 0,void 0,function(){return sr(this,function(t){return[2,qi(this.crc32.digest())]})})},e.prototype.reset=function(){this.crc32=new Mn},e}();var Mn=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(t){var r,n;try{for(var o=Et(t),i=o.next();!i.done;i=o.next()){var s=i.value;this.checksum=this.checksum>>>8^Vq[(this.checksum^s)&255]}}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return this},e.prototype.digest=function(){return(this.checksum^4294967295)>>>0},e}();var Jq=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],Vq=Li(Jq);var WQ=()=>Dd;var Za=(e,t)=>({[he.MD5]:t.md5,[he.CRC32]:WQ(),[he.CRC32C]:bd,[he.SHA1]:t.sha1,[he.SHA256]:t.sha256})[e];var $a=(e,t)=>{let r=new e;return r.update(lr(t||"")),r.digest()};var jQ={name:"flexibleChecksumsMiddleware",step:"build",tags:["BODY_CHECKSUM"],override:!0},XQ=(e,t)=>(r,n)=>async o=>{if(!ee.isInstance(o.request))return r(o);let{request:i,input:s}=o,{body:a,headers:A}=i,{base64Encoder:c,streamHasher:g}=e,{requestChecksumRequired:d,requestAlgorithmMember:l}=t,f=zQ(s,{requestChecksumRequired:d,requestAlgorithmMember:l},!!n.isS3ExpressBucket),u=a,m=A;if(f){switch(f){case he.CRC32:He(n,"FLEXIBLE_CHECKSUMS_REQ_CRC32","U");break;case he.CRC32C:He(n,"FLEXIBLE_CHECKSUMS_REQ_CRC32C","V");break;case he.SHA1:He(n,"FLEXIBLE_CHECKSUMS_REQ_SHA1","X");break;case he.SHA256:He(n,"FLEXIBLE_CHECKSUMS_REQ_SHA256","Y");break}let C=No(f),Q=Za(f,e);if(To(a)){let{getAwsChunkedEncodingStream:R,bodyLengthChecker:B}=e;u=R(a,{base64Encoder:c,bodyLengthChecker:B,checksumLocationName:C,checksumAlgorithmFn:Q,streamHasher:g}),m={...A,"content-encoding":A["content-encoding"]?`${A["content-encoding"]},aws-chunked`:"aws-chunked","transfer-encoding":"chunked","x-amz-decoded-content-length":A["content-length"],"x-amz-content-sha256":"STREAMING-UNSIGNED-PAYLOAD-TRAILER","x-amz-trailer":C},delete m["content-length"]}else if(!YQ(C,A)){let R=await $a(Q,a);m={...A,[C]:c(R)}}}return await r({...o,request:{...i,headers:m,body:u}})};var eA=(e=[])=>{let t=[];for(let r of VQ)!e.includes(r)||!Hi.includes(r)||t.push(r);return t};var ZQ=e=>{let t=e.lastIndexOf("-");if(t!==-1){let r=e.slice(t+1);if(!r.startsWith("0")){let n=parseInt(r,10);if(!isNaN(n)&&n>=1&&n<=1e4)return!0}}return!1};function kd(e){return new Blob([e]).stream()}var $Q=async(e,{checksumAlgorithmFn:t,base64Encoder:r})=>r(await $a(t,e));var ew=async(e,{config:t,responseAlgorithms:r})=>{let n=eA(r),{body:o,headers:i}=e;for(let s of n){let a=No(s),A=i[a];if(A){let c=Za(s,t),{base64Encoder:g}=t;if(To(o)){e.body=gy({expectedChecksum:A,checksumSourceLocation:a,checksum:new c,source:o,base64Encoder:g});return}let d=await $Q(o,{checksumAlgorithmFn:c,base64Encoder:g});if(d===A)break;throw new Error(`Checksum mismatch: expected "${d}" but received "${A}" in response header "${a}".`)}}};var tw={name:"flexibleChecksumsResponseMiddleware",toMiddleware:"deserializerMiddleware",relation:"after",tags:["BODY_CHECKSUM"],override:!0},rw=(e,t)=>(r,n)=>async o=>{if(!ee.isInstance(o.request))return r(o);let i=o.input,s=await r(o),a=s.response,A,{requestValidationModeMember:c,responseAlgorithms:g}=t;if(c&&i[c]==="ENABLED"){let{clientName:d,commandName:l}=n;if(d==="S3Client"&&l==="GetObjectCommand"&&eA(g).every(m=>{let p=No(m),C=a.headers[p];return!C||ZQ(C)}))return s;let u=To(a.body);u&&(A=await e.streamCollector(a.body),a.body=kd(A)),await ew(s.response,{config:e,responseAlgorithms:g}),u&&A&&(a.body=kd(A))}return s};var nw=(e,t)=>({applyToStack:r=>{r.add(XQ(e,t),jQ),r.addRelativeTo(rw(e,t),tw)}});var ow=e=>({...e,requestChecksumCalculation:We(e.requestChecksumCalculation??ql),responseChecksumValidation:We(e.responseChecksumValidation??Ll)});var zq=e=>t=>async r=>{if(!ee.isInstance(r.request))return t(r);let{request:n}=r,{handlerProtocol:o=""}=e.requestHandler.metadata||{};if(o.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let i=n.hostname;n.port!=null&&(i+=`:${n.port}`),n.headers.host=i}return t(r)},Yq={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},iw=e=>({applyToStack:t=>{t.add(zq(e),Yq)}});var Wq=()=>(e,t)=>async r=>{try{let n=await e(r),{clientName:o,commandName:i,logger:s,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:A,overrideOutputFilterSensitiveLog:c}=a,g=A??t.inputFilterSensitiveLog,d=c??t.outputFilterSensitiveLog,{$metadata:l,...f}=n.output;return s?.info?.({clientName:o,commandName:i,input:g(r.input),output:d(f),metadata:l}),n}catch(n){let{clientName:o,commandName:i,logger:s,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:A}=a,c=A??t.inputFilterSensitiveLog;throw s?.error?.({clientName:o,commandName:i,input:c(r.input),error:n,metadata:n.$metadata}),n}},jq={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},sw=e=>({applyToStack:t=>{t.add(Wq(),jq)}});var aw="X-Amzn-Trace-Id",Xq="AWS_LAMBDA_FUNCTION_NAME",Zq="_X_AMZN_TRACE_ID",$q=e=>t=>async r=>{let{request:n}=r;if(!ee.isInstance(n)||e.runtime!=="node"||n.headers.hasOwnProperty(aw))return t(r);let o=process.env[Xq],i=process.env[Zq],s=a=>typeof a=="string"&&a.length>0;return s(o)&&s(i)&&(n.headers[aw]=i),t({...r,request:n})},eL={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},Aw=e=>({applyToStack:t=>{t.add($q(e),eL)}});var tL="content-length";function rL(){return(e,t)=>async r=>{let{request:n}=r;return ee.isInstance(n)&&(tL in n.headers||typeof t?.logger?.warn=="function"&&!(t.logger instanceof An)&&t.logger.warn("Are you using a Stream of unknown length as the Body of a PutObject request? Consider using Upload instead from @aws-sdk/lib-storage.")),e({...r})}}var nL={step:"finalizeRequest",tags:["CHECK_CONTENT_LENGTH_HEADER"],name:"getCheckContentLengthHeaderPlugin",override:!0},cw=e=>({applyToStack:t=>{t.add(rL(),nL)}});var gw=e=>(t,r)=>async n=>{let o=await e.region(),i=e.region,s=()=>{};r.__s3RegionRedirect&&(Object.defineProperty(e,"region",{writable:!1,value:async()=>r.__s3RegionRedirect}),s=()=>Object.defineProperty(e,"region",{writable:!0,value:i}));try{let a=await t(n);if(r.__s3RegionRedirect){s();let A=await e.region();if(o!==A)throw new Error("Region was not restored following S3 region redirect.")}return a}catch(a){throw s(),a}},lw={tags:["REGION_REDIRECT","S3"],name:"regionRedirectEndpointMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"};function oL(e){return(t,r)=>async n=>{try{return await t(n)}catch(o){if(e.followRegionRedirects&&(o?.$metadata?.httpStatusCode===301||o?.$metadata?.httpStatusCode===400&&o?.name==="IllegalLocationConstraintException")){try{let i=o.$response.headers["x-amz-bucket-region"];r.logger?.debug(`Redirecting from ${await e.region()} to ${i}`),r.__s3RegionRedirect=i}catch(i){throw new Error("Region redirect failed: "+i)}return t(n)}throw o}}}var iL={step:"initialize",tags:["REGION_REDIRECT","S3"],name:"regionRedirectMiddleware",override:!0},dw=e=>({applyToStack:t=>{t.add(oL(e),iL),t.addRelativeTo(gw(e),lw)}});var Mo=class e{constructor(t={}){this.data=t,this.lastPurgeTime=Date.now()}get(t){let r=this.data[t];if(r)return r}set(t,r){return this.data[t]=r,r}delete(t){delete this.data[t]}async purgeExpired(){let t=Date.now();if(!(this.lastPurgeTime+e.EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS>t))for(let r in this.data){let n=this.data[r];if(!n.isRefreshing){let o=await n.identity;o.expiration&&o.expiration.getTime()<t&&delete this.data[r]}}}};Mo.EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS=3e4;var Un=class{constructor(t,r=!1,n=Date.now()){this._identity=t,this.isRefreshing=r,this.accessed=n}get identity(){return this.accessed=Date.now(),this._identity}};var Uo=class e{constructor(t,r=new Mo){this.createSessionFn=t,this.cache=r}async getS3ExpressIdentity(t,r){let n=r.Bucket,{cache:o}=this,i=o.get(n);return i?i.identity.then(s=>(s.expiration?.getTime()??0)<Date.now()?o.set(n,new Un(this.getIdentity(n))).identity:((s.expiration?.getTime()??0)<Date.now()+e.REFRESH_WINDOW_MS&&!i.isRefreshing&&(i.isRefreshing=!0,this.getIdentity(n).then(c=>{o.set(n,new Un(Promise.resolve(c)))})),s)):o.set(n,new Un(this.getIdentity(n))).identity}async getIdentity(t){await this.cache.purgeExpired().catch(o=>{});let r=await this.createSessionFn(t);if(!r.Credentials?.AccessKeyId||!r.Credentials?.SecretAccessKey)throw new Error("s3#createSession response credential missing AccessKeyId or SecretAccessKey.");return{accessKeyId:r.Credentials.AccessKeyId,secretAccessKey:r.Credentials.SecretAccessKey,sessionToken:r.Credentials.SessionToken,expiration:r.Credentials.Expiration?new Date(r.Credentials.Expiration):void 0}}};Uo.REFRESH_WINDOW_MS=6e4;var Ki;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(Ki||(Ki={}));var uw="Directory",Iw="S3Express",pw="sigv4-s3express",tA="X-Amz-S3session-Token",Ji=tA.toLowerCase();var Vi=class extends vn{async signWithCredentials(t,r,n){let o=mw(r);t.headers[Ji]=r.sessionToken;let i=this;return hw(i,o),i.signRequest(t,n??{})}async presignWithCredentials(t,r,n){let o=mw(r);return delete t.headers[Ji],t.headers[tA]=r.sessionToken,t.query=t.query??{},t.query[tA]=r.sessionToken,hw(this,o),this.presign(t,n)}};function mw(e){return{accessKeyId:e.accessKeyId,secretAccessKey:e.secretAccessKey,expiration:e.expiration}}function hw(e,t){let r=setTimeout(()=>{throw new Error("SignatureV4S3Express credential override was created but not called.")},10),n=e.credentialProvider,o=()=>(clearTimeout(r),e.credentialProvider=n,Promise.resolve(t));e.credentialProvider=o}var Cw=e=>(t,r)=>async n=>{if(r.endpointV2){let o=r.endpointV2,i=o.properties?.authSchemes?.[0]?.name===pw;if((o.properties?.backend===Iw||o.properties?.bucketType===uw)&&(He(r,"S3_EXPRESS_BUCKET","J"),r.isS3ExpressBucket=!0),i){let a=n.input.Bucket;if(a){let A=await e.s3ExpressIdentityProvider.getS3ExpressIdentity(await e.credentials(),{Bucket:a});r.s3ExpressIdentity=A,ee.isInstance(n.request)&&A.sessionToken&&(n.request.headers[Ji]=A.sessionToken)}}}return t(n)},Bw={name:"s3ExpressMiddleware",step:"build",tags:["S3","S3_EXPRESS"],override:!0},Fd=e=>({applyToStack:t=>{t.add(Cw(e),Bw)}});var Ew=async(e,t,r,n)=>{let o=await n.signWithCredentials(r,e,{});if(o.headers["X-Amz-Security-Token"]||o.headers["x-amz-security-token"])throw new Error("X-Amz-Security-Token must not be set for s3-express requests.");return o};var aL=e=>t=>{throw t},AL=(e,t)=>{};var yw=e=>(t,r)=>async n=>{if(!ee.isInstance(n.request))return t(n);let i=Vt(r).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:s={}},identity:a,signer:A}=i,c;r.s3ExpressIdentity?c=await Ew(r.s3ExpressIdentity,s,n.request,await e.signer()):c=await A.sign(n.request,a,s);let g=await t({...n,request:c}).catch((A.errorHandler||aL)(s));return(A.successHandler||AL)(g.response,s),g},_d=e=>({applyToStack:t=>{t.addRelativeTo(yw(e),zl)}});var Qw=(e,{session:t})=>{let[r,n]=t;return{...e,forcePathStyle:e.forcePathStyle??!1,useAccelerateEndpoint:e.useAccelerateEndpoint??!1,disableMultiregionAccessPoints:e.disableMultiregionAccessPoints??!1,followRegionRedirects:e.followRegionRedirects??!1,s3ExpressIdentityProvider:e.s3ExpressIdentityProvider??new Uo(async o=>r().send(new n({Bucket:o,SessionMode:"ReadWrite"}))),bucketEndpoint:e.bucketEndpoint??!1}};var cL={CopyObjectCommand:!0,UploadPartCopyCommand:!0,CompleteMultipartUploadCommand:!0},gL=3e3,lL=e=>(t,r)=>async n=>{let o=await t(n),{response:i}=o;if(!yt.isInstance(i))return o;let{statusCode:s,body:a}=i;if(s<200||s>=300||!(typeof a?.stream=="function"||typeof a?.pipe=="function"||typeof a?.tee=="function"))return o;let c=a,g=a;a&&typeof a=="object"&&!(a instanceof Uint8Array)&&([c,g]=await Ay(a)),i.body=g;let d=await dL(c,{streamCollector:async f=>cy(f,gL)});typeof c?.destroy=="function"&&c.destroy();let l=e.utf8Encoder(d.subarray(d.length-16));if(d.length===0&&cL[r.commandName]){let f=new Error("S3 aborted request");throw f.name="InternalError",f}return l&&l.endsWith("</Error>")&&(i.statusCode=400),o},dL=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),fL={relation:"after",toMiddleware:"deserializerMiddleware",tags:["THROW_200_EXCEPTIONS","S3"],name:"throw200ExceptionsMiddleware",override:!0},rA=e=>({applyToStack:t=>{t.addRelativeTo(lL(e),fL)}});var ww=e=>typeof e=="string"&&e.indexOf("arn:")===0&&e.split(":").length>=6;function Sw(e){return(t,r)=>async n=>{if(e.bucketEndpoint){let o=r.endpointV2;if(o){let i=n.input.Bucket;if(typeof i=="string")try{let s=new URL(i);r.endpointV2={...o,url:s}}catch(s){let a=`@aws-sdk/middleware-sdk-s3: bucketEndpoint=true was set but Bucket=${i} could not be parsed as URL.`;throw r.logger?.constructor?.name==="NoOpLogger"||r.logger?.warn?.(a),s}}}return t(n)}}var xw={name:"bucketEndpointMiddleware",override:!0,relation:"after",toMiddleware:"endpointV2Middleware"};function uL({bucketEndpoint:e}){return t=>async r=>{let{input:{Bucket:n}}=r;if(!e&&typeof n=="string"&&!ww(n)&&n.indexOf("/")>=0){let o=new Error(`Bucket name shouldn't contain '/', received '${n}'`);throw o.name="InvalidBucketName",o}return t({...r})}}var IL={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},bw=e=>({applyToStack:t=>{t.add(uL(e),IL),t.addRelativeTo(Sw(e),xw)}});var pL=void 0;function mL(e){return e===void 0?!0:typeof e=="string"&&e.length<=50}function Dw(e){let t=kr(e.userAgentAppId??pL);return{...e,customUserAgent:typeof e.customUserAgent=="string"?[[e.customUserAgent]]:e.customUserAgent,userAgentAppId:async()=>{let r=await t();if(!mL(r)){let n=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?console:e.logger;typeof r!="string"?n?.warn("userAgentAppId must be a string or undefined."):r.length>50&&n?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return r}}}var nA=class{constructor({size:t,params:r}){this.data=new Map,this.parameters=[],this.capacity=t??50,r&&(this.parameters=r)}get(t,r){let n=this.hash(t);if(n===!1)return r();if(!this.data.has(n)){if(this.data.size>this.capacity+10){let o=this.data.keys(),i=0;for(;;){let{value:s,done:a}=o.next();if(this.data.delete(s),a||++i>10)break}}this.data.set(n,r())}return this.data.get(n)}size(){return this.data.size}hash(t){let r="",{parameters:n}=this;if(n.length===0)return!1;for(let o of n){let i=String(t[o]??"");if(i.includes("|;"))return!1;r+=i+"|;"}return r}};var hL=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),zi=e=>hL.test(e)||e.startsWith("[")&&e.endsWith("]");var CL=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),Yi=(e,t=!1)=>{if(!t)return CL.test(e);let r=e.split(".");for(let n of r)if(!Yi(n))return!1;return!0};var On={};var Nr="endpoints";function Rt(e){return typeof e!="object"||e==null?e:"ref"in e?`$${Rt(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(Rt).join(", ")})`:JSON.stringify(e,null,2)}var Ce=class extends Error{constructor(t){super(t),this.name="EndpointError"}};var kw=(e,t)=>e===t;var Fw=e=>{let t=e.split("."),r=[];for(let n of t){let o=n.indexOf("[");if(o!==-1){if(n.indexOf("]")!==n.length-1)throw new Ce(`Path: '${e}' does not end with ']'`);let i=n.slice(o+1,-1);if(Number.isNaN(parseInt(i)))throw new Ce(`Invalid array index: '${i}' in path: '${e}'`);o!==0&&r.push(n.slice(0,o)),r.push(i)}else r.push(n)}return r};var oA=(e,t)=>Fw(t).reduce((r,n)=>{if(typeof r!="object")throw new Ce(`Index '${n}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},e);var _w=e=>e!=null;var vw=e=>!e;var vd={[xo.HTTP]:80,[xo.HTTPS]:443},Rw=e=>{let t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){let{hostname:l,port:f,protocol:u="",path:m="",query:p={}}=e,C=new URL(`${u}//${l}${f?`:${f}`:""}${m}`);return C.search=Object.entries(p).map(([Q,R])=>`${Q}=${R}`).join("&"),C}return new URL(e)}catch{return null}})();if(!t)return null;let r=t.href,{host:n,hostname:o,pathname:i,protocol:s,search:a}=t;if(a)return null;let A=s.slice(0,-1);if(!Object.values(xo).includes(A))return null;let c=zi(o),g=r.includes(`${n}:${vd[A]}`)||typeof e=="string"&&e.includes(`${n}:${vd[A]}`),d=`${n}${g?`:${vd[A]}`:""}`;return{scheme:A,authority:d,path:i,normalizedPath:i.endsWith("/")?i:`${i}/`,isIp:c}};var Nw=(e,t)=>e===t;var Tw=(e,t,r,n)=>t>=r||e.length<r?null:n?e.substring(e.length-r,e.length-t):e.substring(t,r);var Mw=e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`);var Uw={booleanEquals:kw,getAttr:oA,isSet:_w,isValidHostLabel:Yi,not:vw,parseURL:Rw,stringEquals:Nw,substring:Tw,uriEncode:Mw};var iA=(e,t)=>{let r=[],n={...t.endpointParams,...t.referenceRecord},o=0;for(;o<e.length;){let i=e.indexOf("{",o);if(i===-1){r.push(e.slice(o));break}r.push(e.slice(o,i));let s=e.indexOf("}",i);if(s===-1){r.push(e.slice(i));break}e[i+1]==="{"&&e[s+1]==="}"&&(r.push(e.slice(i+1,s)),o=s+2);let a=e.substring(i+1,s);if(a.includes("#")){let[A,c]=a.split("#");r.push(oA(n[A],c))}else r.push(n[a]);o=s+1}return r.join("")};var Ow=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e];var gn=(e,t,r)=>{if(typeof e=="string")return iA(e,r);if(e.fn)return sA(e,r);if(e.ref)return Ow(e,r);throw new Ce(`'${t}': ${String(e)} is not a string, function or reference.`)};var sA=({fn:e,argv:t},r)=>{let n=t.map(i=>["boolean","number"].includes(typeof i)?i:gn(i,"arg",r)),o=e.split(".");return o[0]in On&&o[1]!=null?On[o[0]][o[1]](...n):Uw[e](...n)};var Pw=({assign:e,...t},r)=>{if(e&&e in r.referenceRecord)throw new Ce(`'${e}' is already defined in Reference Record.`);let n=sA(t,r);return r.logger?.debug?.(`${Nr} evaluateCondition: ${Rt(t)} = ${Rt(n)}`),{result:n===""?!0:!!n,...e!=null&&{toAssign:{name:e,value:n}}}};var Oo=(e=[],t)=>{let r={};for(let n of e){let{result:o,toAssign:i}=Pw(n,{...t,referenceRecord:{...t.referenceRecord,...r}});if(!o)return{result:o};i&&(r[i.name]=i.value,t.logger?.debug?.(`${Nr} assign: ${i.name} := ${Rt(i.value)}`))}return{result:!0,referenceRecord:r}};var Gw=(e,t)=>Object.entries(e).reduce((r,[n,o])=>({...r,[n]:o.map(i=>{let s=gn(i,"Header value entry",t);if(typeof s!="string")throw new Ce(`Header '${n}' value '${s}' is not a string`);return s})}),{});var Rd=(e,t)=>{if(Array.isArray(e))return e.map(r=>Rd(r,t));switch(typeof e){case"string":return iA(e,t);case"object":if(e===null)throw new Ce(`Unexpected endpoint property: ${e}`);return aA(e,t);case"boolean":return e;default:throw new Ce(`Unexpected endpoint property type: ${typeof e}`)}};var aA=(e,t)=>Object.entries(e).reduce((r,[n,o])=>({...r,[n]:Rd(o,t)}),{});var Hw=(e,t)=>{let r=gn(e,"Endpoint URL",t);if(typeof r=="string")try{return new URL(r)}catch(n){throw n}throw new Ce(`Endpoint URL must be a string, got ${typeof r}`)};var qw=(e,t)=>{let{conditions:r,endpoint:n}=e,{result:o,referenceRecord:i}=Oo(r,t);if(!o)return;let s={...t,referenceRecord:{...t.referenceRecord,...i}},{url:a,properties:A,headers:c}=n;return t.logger?.debug?.(`${Nr} Resolving endpoint from template: ${Rt(n)}`),{...c!=null&&{headers:Gw(c,s)},...A!=null&&{properties:aA(A,s)},url:Hw(a,s)}};var Lw=(e,t)=>{let{conditions:r,error:n}=e,{result:o,referenceRecord:i}=Oo(r,t);if(o)throw new Ce(gn(n,"Error",{...t,referenceRecord:{...t.referenceRecord,...i}}))};var Kw=(e,t)=>{let{conditions:r,rules:n}=e,{result:o,referenceRecord:i}=Oo(r,t);if(o)return AA(n,{...t,referenceRecord:{...t.referenceRecord,...i}})};var AA=(e,t)=>{for(let r of e)if(r.type==="endpoint"){let n=qw(r,t);if(n)return n}else if(r.type==="error")Lw(r,t);else if(r.type==="tree"){let n=Kw(r,t);if(n)return n}else throw new Ce(`Unknown endpoint rule: ${r}`);throw new Ce("Rules evaluation failed")};var Nd=(e,t)=>{let{endpointParams:r,logger:n}=t,{parameters:o,rules:i}=e;t.logger?.debug?.(`${Nr} Initial EndpointParams: ${Rt(r)}`);let s=Object.entries(o).filter(([,c])=>c.default!=null).map(([c,g])=>[c,g.default]);if(s.length>0)for(let[c,g]of s)r[c]=r[c]??g;let a=Object.entries(o).filter(([,c])=>c.required).map(([c])=>c);for(let c of a)if(r[c]==null)throw new Ce(`Missing required parameter: '${c}'`);let A=AA(i,{endpointParams:r,logger:n,referenceRecord:{}});return t.logger?.debug?.(`${Nr} Resolved endpoint: ${Rt(A)}`),A};var Td=(e,t=!1)=>{if(t){for(let r of e.split("."))if(!Td(r))return!1;return!0}return!(!Yi(e)||e.length<3||e.length>63||e!==e.toLowerCase()||zi(e))};var Jw=":",BL="/",Vw=e=>{let t=e.split(Jw);if(t.length<6)return null;let[r,n,o,i,s,...a]=t;if(r!=="arn"||n===""||o===""||a.join(Jw)==="")return null;let A=a.map(c=>c.split(BL)).flat();return{partition:n,service:o,region:i,accountId:s,resourceId:A}};var zw={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{}}],version:"1.1"};var yL=zw,QL="",Yw=e=>{let{partitions:t}=yL;for(let n of t){let{regions:o,outputs:i}=n;for(let[s,a]of Object.entries(o))if(s===e)return{...i,...a}}for(let n of t){let{regionRegex:o,outputs:i}=n;if(new RegExp(o).test(e))return{...i}}let r=t.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}};var Ww=()=>QL;var Md={isVirtualHostableS3Bucket:Td,parseArn:Vw,partition:Yw};On.aws=Md;var wL=/\d{12}\.ddb/;async function jw(e,t,r){if(r.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&He(e,"PROTOCOL_RPC_V2_CBOR","M"),typeof t.retryStrategy=="function"){let i=await t.retryStrategy();typeof i.acquireInitialRetryToken=="function"?i.constructor?.name?.includes("Adaptive")?He(e,"RETRY_MODE_ADAPTIVE","F"):He(e,"RETRY_MODE_STANDARD","E"):He(e,"RETRY_MODE_LEGACY","D")}if(typeof t.accountIdEndpointMode=="function"){let i=e.endpointV2;switch(String(i?.url?.hostname).match(wL)&&He(e,"ACCOUNT_ID_ENDPOINT","O"),await t.accountIdEndpointMode?.()){case"disabled":He(e,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":He(e,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":He(e,"ACCOUNT_ID_MODE_REQUIRED","R");break}}let o=e.__smithy_context?.selectedHttpAuthScheme?.identity;if(o?.$source){let i=o;i.accountId&&He(e,"RESOLVED_ACCOUNT_ID","T");for(let[s,a]of Object.entries(i.$source??{}))He(e,s,a)}}var Ud="user-agent",cA="x-amz-user-agent",Od=" ",gA="/",Xw=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,Zw=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,Pd="-";function $w(e){let t="";for(let r in e){let n=e[r];if(t.length+n.length+1<=1024){t.length?t+=","+n:t+=n;continue}break}return t}var SL=e=>(t,r)=>async n=>{let{request:o}=n;if(!ee.isInstance(o))return t(n);let{headers:i}=o,s=r?.userAgent?.map(lA)||[],a=(await e.defaultUserAgentProvider()).map(lA);await jw(r,e,n);let A=r;a.push(`m/${$w(Object.assign({},r.__smithy_context?.features,A.__aws_sdk_context?.features))}`);let c=e?.customUserAgent?.map(lA)||[],g=await e.userAgentAppId();g&&a.push(lA([`app/${g}`]));let d=Ww(),l=(d?[d]:[]).concat([...a,...s,...c]).join(Od),f=[...a.filter(u=>u.startsWith("aws-sdk-")),...c].join(Od);return e.runtime!=="browser"?(f&&(i[cA]=i[cA]?`${i[Ud]} ${f}`:f),i[Ud]=l):i[cA]=l,t({...n,request:o})},lA=e=>{let t=e[0].split(gA).map(s=>s.replace(Xw,Pd)).join(gA),r=e[1]?.replace(Zw,Pd),n=t.indexOf(gA),o=t.substring(0,n),i=t.substring(n+1);return o==="api"&&(i=i.toLowerCase()),[o,i,r].filter(s=>s&&s.length>0).reduce((s,a,A)=>{switch(A){case 0:return a;case 1:return`${s}/${a}`;default:return`${s}#${a}`}},"")},xL={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},eS=e=>({applyToStack:t=>{t.add(SL(e),xL)}});var tS=!1;var rS=!1;var dA=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips"));var Gd=e=>dA(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e;var nS=e=>{let{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return{...e,region:async()=>{if(typeof t=="string")return Gd(t);let n=await t();return Gd(n)},useFipsEndpoint:async()=>{let n=typeof t=="string"?t:await t();return dA(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}}};var oS=e=>({...e,eventStreamMarshaller:e.eventStreamSerdeProvider(e)});var iS="content-length";function bL(e){return t=>async r=>{let n=r.request;if(ee.isInstance(n)){let{body:o,headers:i}=n;if(o&&Object.keys(i).map(s=>s.toLowerCase()).indexOf(iS)===-1)try{let s=e(o);n.headers={...n.headers,[iS]:String(s)}}catch{}}return t({...r,request:n})}}var DL={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},sS=e=>({applyToStack:t=>{t.add(bL(e.bodyLengthChecker),DL)}});var aS=async e=>{let t=e?.Bucket||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),RL(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!vL(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},kL=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,FL=/(\d+\.){3}\d+/,_L=/\.\./;var vL=e=>kL.test(e)&&!FL.test(e)&&!_L.test(e),RL=e=>{let[t,r,n,,,o]=e.split(":"),i=t==="arn"&&e.split(":").length>=6,s=!!(i&&r&&n&&o);if(i&&!s)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return s};var AS=(e,t,r)=>{let n=async()=>{let o=r[e]??r[t];return typeof o=="function"?o():o};return e==="credentialScope"||t==="CredentialScope"?async()=>{let o=typeof r.credentials=="function"?await r.credentials():r.credentials;return o?.credentialScope??o?.CredentialScope}:e==="accountId"||t==="AccountId"?async()=>{let o=typeof r.credentials=="function"?await r.credentials():r.credentials;return o?.accountId??o?.AccountId}:e==="endpoint"||t==="endpoint"?async()=>{let o=await n();if(o&&typeof o=="object"){if("url"in o)return o.url.href;if("hostname"in o){let{protocol:i,hostname:s,port:a,path:A}=o;return`${i}//${s}${a?":"+a:""}${A}`}}return o}:n};var fA=async e=>{};function cS(e){let t={};if(e=e.replace(/^\?/,""),e)for(let r of e.split("&")){let[n,o=null]=r.split("=");n=decodeURIComponent(n),o&&(o=decodeURIComponent(o)),n in t?Array.isArray(t[n])?t[n].push(o):t[n]=[t[n],o]:t[n]=o}return t}var Po=e=>{if(typeof e=="string")return Po(new URL(e));let{hostname:t,pathname:r,port:n,protocol:o,search:i}=e,s;return i&&(s=cS(i)),{hostname:t,port:n?parseInt(n):void 0,protocol:o,path:r,query:s}};var uA=e=>typeof e=="object"?"url"in e?Po(e.url):e:Po(e);var gS=async(e,t,r,n)=>{if(!r.endpoint){let s;r.serviceConfiguredEndpoint?s=await r.serviceConfiguredEndpoint():s=await fA(r.serviceId),s&&(r.endpoint=()=>Promise.resolve(uA(s)))}let o=await Hd(e,t,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(o,n)},Hd=async(e,t,r)=>{let n={},o=t?.getEndpointParameterInstructions?.()||{};for(let[i,s]of Object.entries(o))switch(s.type){case"staticContextParams":n[i]=s.value;break;case"contextParams":n[i]=e[s.name];break;case"clientContextParams":case"builtInParams":n[i]=await AS(s.name,i,r)();break;case"operationContextParams":n[i]=s.get(e);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(s))}return Object.keys(o).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await aS(n),n};var lS=({config:e,instructions:t})=>(r,n)=>async o=>{e.endpoint&&ly(n,"ENDPOINT_OVERRIDE","N");let i=await gS(o.input,{getEndpointParameterInstructions(){return t}},{...e},n);n.endpointV2=i,n.authSchemes=i.properties?.authSchemes;let s=n.authSchemes?.[0];if(s){n.signing_region=s.signingRegion,n.signing_service=s.signingName;let A=Vt(n)?.selectedHttpAuthScheme?.httpAuthOption;A&&(A.signingProperties=Object.assign(A.signingProperties||{},{signing_region:s.signingRegion,signingRegion:s.signingRegion,signing_service:s.signingName,signingName:s.signingName,signingRegionSet:s.signingRegionSet},s.properties))}return r({...o})};var NL={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:Ri.name},IA=(e,t)=>({applyToStack:r=>{r.addRelativeTo(lS({config:e,instructions:t}),NL)}});var dS=e=>{let t=e.tls??!0,{endpoint:r}=e,n=r!=null?async()=>uA(await We(r)()):void 0,i={...e,endpoint:n,tls:t,isCustomEndpoint:!!r,useDualstackEndpoint:We(e.useDualstackEndpoint??!1),useFipsEndpoint:We(e.useFipsEndpoint??!1)},s;return i.serviceConfiguredEndpoint=async()=>(e.serviceId&&!s&&(s=fA(e.serviceId)),s),i};var Yt;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(Yt||(Yt={}));var Pn=3,qd=Yt.STANDARD;var fS=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],uS=["TimeoutError","RequestTimeout","RequestTimeoutException"],IS=[500,502,503,504],pS=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"];var TL=e=>e.$metadata?.clockSkewCorrected,Go=e=>e.$metadata?.httpStatusCode===429||fS.includes(e.name)||e.$retryable?.throttling==!0,Wi=(e,t=0)=>TL(e)||uS.includes(e.name)||pS.includes(e?.code||"")||IS.includes(e.$metadata?.httpStatusCode||0)||e.cause!==void 0&&t<=10&&Wi(e.cause,t+1),mS=e=>{if(e.$metadata?.httpStatusCode!==void 0){let t=e.$metadata.httpStatusCode;return 500<=t&&t<=599&&!Wi(e)}return!1};var Ho=class e{constructor(t){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=t?.beta??.7,this.minCapacity=t?.minCapacity??1,this.minFillRate=t?.minFillRate??.5,this.scaleConstant=t?.scaleConstant??.4,this.smooth=t?.smooth??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){let r=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>e.setTimeoutFn(n,r))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){let t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}let r=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=t}updateClientSendingRate(t){let r;if(this.updateMeasuredRate(),Go(t)){let o=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=o,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(o),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let t=this.getCurrentTimeInSeconds(),r=Math.floor(t*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(t){return parseFloat(t.toFixed(8))}};Ho.setTimeoutFn=setTimeout;var pA="amz-sdk-invocation-id",mA="amz-sdk-request";var hS=()=>{let e=100;return{computeNextBackoffDelay:n=>Math.floor(Math.min(2e4,Math.random()*2**n*e)),setDelayBase:n=>{e=n}}};var Ld=({retryDelay:e,retryCount:t,retryCost:r})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(2e4,e),getRetryCost:()=>r});var Gn=class{constructor(t){this.maxAttempts=t,this.mode=Yt.STANDARD,this.capacity=500,this.retryBackoffStrategy=hS(),this.maxAttemptsProvider=typeof t=="function"?t:async()=>t}async acquireInitialRetryToken(t){return Ld({retryDelay:100,retryCount:0})}async refreshRetryTokenForRetry(t,r){let n=await this.getMaxAttempts();if(this.shouldRetry(t,r,n)){let o=r.errorType;this.retryBackoffStrategy.setDelayBase(o==="THROTTLING"?500:100);let i=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),s=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,i):i,a=this.getCapacityCost(o);return this.capacity-=a,Ld({retryDelay:s,retryCount:t.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(t){this.capacity=Math.max(500,this.capacity+(t.getRetryCost()??1))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return Pn}}shouldRetry(t,r,n){return t.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(t){return t==="TRANSIENT"?10:5}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}};var CA=class{constructor(t,r){this.maxAttemptsProvider=t,this.mode=Yt.ADAPTIVE;let{rateLimiter:n}=r??{};this.rateLimiter=n??new Ho,this.standardRetryStrategy=new Gn(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(t,r)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}};var Jd=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`);var QS=e=>{let{retryStrategy:t}=e,r=We(e.maxAttempts??Pn);return{...e,maxAttempts:r,retryStrategy:async()=>t||(await We(e.retryMode)()===Yt.ADAPTIVE?new CA(r):new Gn(r))}};var wS=e=>e?.body instanceof ReadableStream;var ML=e=>(t,r)=>async n=>{let o=await e.retryStrategy(),i=await e.maxAttempts();if(UL(o)){o=o;let s=await o.acquireInitialRetryToken(r.partition_id),a=new Error,A=0,c=0,{request:g}=n,d=ee.isInstance(g);for(d&&(g.headers[pA]=me());;)try{d&&(g.headers[mA]=`attempt=${A+1}; max=${i}`);let{response:l,output:f}=await t(n);return o.recordSuccess(s),f.$metadata.attempts=A+1,f.$metadata.totalRetryDelay=c,{response:l,output:f}}catch(l){let f=OL(l);if(a=Jd(l),d&&wS(g))throw(r.logger instanceof An?console:r.logger)?.warn("An error was encountered in a non-retryable streaming request."),a;try{s=await o.refreshRetryTokenForRetry(s,f)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=A+1,a.$metadata.totalRetryDelay=c,a}A=s.getRetryCount();let u=s.getRetryDelay();c+=u,await new Promise(m=>setTimeout(m,u))}}else return o=o,o?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",o.mode]]),o.retry(t,n)},UL=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",OL=e=>{let t={error:e,errorType:PL(e)},r=HL(e.$response);return r&&(t.retryAfterHint=r),t},PL=e=>Go(e)?"THROTTLING":Wi(e)?"TRANSIENT":mS(e)?"SERVER_ERROR":"CLIENT_ERROR",GL={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},SS=e=>({applyToStack:t=>{t.add(ML(e),GL)}}),HL=e=>{if(!yt.isInstance(e))return;let t=Object.keys(e.headers).find(i=>i.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)};var BA={CrtSignerV4:null};var EA=class{constructor(t){this.sigv4Signer=new Vi(t),this.signerOptions=t}async sign(t,r={}){if(r.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().sign(t,r)}return this.sigv4Signer.sign(t,r)}async signWithCredentials(t,r,n={}){if(n.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().signWithCredentials(t,r,n)}return this.sigv4Signer.signWithCredentials(t,r,n)}async presign(t,r={}){if(r.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().presign(t,r)}return this.sigv4Signer.presign(t,r)}async presignWithCredentials(t,r,n={}){if(n.signingRegion==="*")throw new Error("Method presignWithCredentials is not supported for [signingRegion=*].");return this.sigv4Signer.presignWithCredentials(t,r,n)}getSigv4aSigner(){if(!this.sigv4aSigner){let t=null;try{if(t=BA.CrtSignerV4,typeof t!="function")throw new Error}catch(r){throw r.message=`${r.message}
Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. 
You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. 
For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`,r}this.sigv4aSigner=new t({...this.signerOptions,signingAlgorithm:1})}return this.sigv4aSigner}};var hf="required",I="type",h="conditions",S="fn",x="argv",K="ref",fe="assign",O="url",P="properties",bx="backend",jt="authSchemes",St="disableDoubleEncoding",xt="signingName",ur="signingRegion",G="headers",Cf="signingRegionSet";var Nt="isSet",Je="booleanEquals",H="error",DA="aws.partition",de="stringEquals",Fe="getAttr",et="name",$e="substring",xS="bucketSuffix",Dx="parseURL",bS="{url#scheme}://{url#authority}/{uri_encoded_bucket}{url#path}",v="endpoint",_="tree",kx="aws.isVirtualHostableS3Bucket",SA="{url#scheme}://{Bucket}.{url#authority}{url#path}",fr="not",xA="{url#scheme}://{url#authority}{url#path}",Fx="hardwareType",_x="regionPrefix",DS="bucketAliasSuffix",pf="outpostId",qn="isValidHostLabel",Bf="sigv4a",es="s3-outposts",Vo="s3",vx="{url#scheme}://{url#authority}{url#normalizedPath}{Bucket}",Rx="https://{Bucket}.s3-accelerate.{partitionResult#dnsSuffix}",kS="https://{Bucket}.s3.{partitionResult#dnsSuffix}",Nx="aws.parseArn",Tx="bucketArn",Mx="arnType",kA="",Ef="s3-object-lambda",Ux="accesspoint",yf="accessPointName",FS="{url#scheme}://{accessPointName}-{bucketArn#accountId}.{url#authority}{url#path}",_S="mrapPartition",vS="outpostType",RS="arnPrefix",Ox="{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",NS="https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",TS="https://s3.{partitionResult#dnsSuffix}",Lo={[hf]:!1,[I]:"String"},Ko={[hf]:!0,default:!1,[I]:"Boolean"},ji={[hf]:!1,[I]:"Boolean"},Wt={[S]:Je,[x]:[{[K]:"Accelerate"},!0]},Ee={[S]:Je,[x]:[{[K]:"UseFIPS"},!0]},Be={[S]:Je,[x]:[{[K]:"UseDualStack"},!0]},Re={[S]:Nt,[x]:[{[K]:"Endpoint"}]},Px={[S]:DA,[x]:[{[K]:"Region"}],[fe]:"partitionResult"},MS={[S]:de,[x]:[{[S]:Fe,[x]:[{[K]:"partitionResult"},et]},"aws-cn"]},FA={[S]:Nt,[x]:[{[K]:"Bucket"}]},_e={[K]:"Bucket"},gt={[S]:Dx,[x]:[{[K]:"Endpoint"}],[fe]:"url"},bA={[S]:Je,[x]:[{[S]:Fe,[x]:[{[K]:"url"},"isIp"]},!0]},Gx={[K]:"url"},Hx={[S]:"uriEncode",[x]:[_e],[fe]:"uri_encoded_bucket"},Tr={[bx]:"S3Express",[jt]:[{[St]:!0,[et]:"sigv4",[xt]:"s3express",[ur]:"{Region}"}]},V={},qx={[S]:kx,[x]:[_e,!1]},Vd={[H]:"S3Express bucket name is not a valid virtual hostable name.",[I]:H},_A={[bx]:"S3Express",[jt]:[{[St]:!0,[et]:"sigv4-s3express",[xt]:"s3express",[ur]:"{Region}"}]},US={[S]:Nt,[x]:[{[K]:"UseS3ExpressControlEndpoint"}]},OS={[S]:Je,[x]:[{[K]:"UseS3ExpressControlEndpoint"},!0]},X={[S]:fr,[x]:[Re]},PS={[H]:"Unrecognized S3Express bucket name format.",[I]:H},GS={[S]:fr,[x]:[FA]},HS={[K]:Fx},qS={[h]:[X],[H]:"Expected a endpoint to be specified but no endpoint was found",[I]:H},yA={[jt]:[{[St]:!0,[et]:Bf,[xt]:es,[Cf]:["*"]},{[St]:!0,[et]:"sigv4",[xt]:es,[ur]:"{Region}"}]},zd={[S]:Je,[x]:[{[K]:"ForcePathStyle"},!1]},qL={[K]:"ForcePathStyle"},ve={[S]:Je,[x]:[{[K]:"Accelerate"},!1]},Oe={[S]:de,[x]:[{[K]:"Region"},"aws-global"]},qe={[jt]:[{[St]:!0,[et]:"sigv4",[xt]:Vo,[ur]:"us-east-1"}]},se={[S]:fr,[x]:[Oe]},Le={[S]:Je,[x]:[{[K]:"UseGlobalEndpoint"},!0]},LS={[O]:"https://{Bucket}.s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[P]:{[jt]:[{[St]:!0,[et]:"sigv4",[xt]:Vo,[ur]:"{Region}"}]},[G]:{}},Ne={[jt]:[{[St]:!0,[et]:"sigv4",[xt]:Vo,[ur]:"{Region}"}]},Ke={[S]:Je,[x]:[{[K]:"UseGlobalEndpoint"},!1]},oe={[S]:Je,[x]:[{[K]:"UseDualStack"},!1]},KS={[O]:"https://{Bucket}.s3-fips.{Region}.{partitionResult#dnsSuffix}",[P]:Ne,[G]:{}},te={[S]:Je,[x]:[{[K]:"UseFIPS"},!1]},JS={[O]:"https://{Bucket}.s3-accelerate.dualstack.{partitionResult#dnsSuffix}",[P]:Ne,[G]:{}},VS={[O]:"https://{Bucket}.s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[P]:Ne,[G]:{}},Yd={[S]:Je,[x]:[{[S]:Fe,[x]:[Gx,"isIp"]},!1]},Wd={[O]:vx,[P]:Ne,[G]:{}},mf={[O]:SA,[P]:Ne,[G]:{}},zS={[v]:mf,[I]:v},jd={[O]:Rx,[P]:Ne,[G]:{}},YS={[O]:"https://{Bucket}.s3.{Region}.{partitionResult#dnsSuffix}",[P]:Ne,[G]:{}},QA={[H]:"Invalid region: region was not a valid DNS name.",[I]:H},It={[K]:Tx},Lx={[K]:Mx},Xd={[S]:Fe,[x]:[It,"service"]},Qf={[K]:yf},WS={[h]:[Be],[H]:"S3 Object Lambda does not support Dual-stack",[I]:H},jS={[h]:[Wt],[H]:"S3 Object Lambda does not support S3 Accelerate",[I]:H},XS={[h]:[{[S]:Nt,[x]:[{[K]:"DisableAccessPoints"}]},{[S]:Je,[x]:[{[K]:"DisableAccessPoints"},!0]}],[H]:"Access points are not supported for this operation",[I]:H},Zd={[h]:[{[S]:Nt,[x]:[{[K]:"UseArnRegion"}]},{[S]:Je,[x]:[{[K]:"UseArnRegion"},!1]},{[S]:fr,[x]:[{[S]:de,[x]:[{[S]:Fe,[x]:[It,"region"]},"{Region}"]}]}],[H]:"Invalid configuration: region from ARN `{bucketArn#region}` does not match client region `{Region}` and UseArnRegion is `false`",[I]:H},Kx={[S]:Fe,[x]:[{[K]:"bucketPartition"},et]},Jx={[S]:Fe,[x]:[It,"accountId"]},$d={[jt]:[{[St]:!0,[et]:"sigv4",[xt]:Ef,[ur]:"{bucketArn#region}"}]},ZS={[H]:"Invalid ARN: The access point name may only contain a-z, A-Z, 0-9 and `-`. Found: `{accessPointName}`",[I]:H},ef={[H]:"Invalid ARN: The account id may only contain a-z, A-Z, 0-9 and `-`. Found: `{bucketArn#accountId}`",[I]:H},tf={[H]:"Invalid region in ARN: `{bucketArn#region}` (invalid DNS name)",[I]:H},rf={[H]:"Client was configured for partition `{partitionResult#name}` but ARN (`{Bucket}`) has `{bucketPartition#name}`",[I]:H},$S={[H]:"Invalid ARN: The ARN may only contain a single resource component after `accesspoint`.",[I]:H},ex={[H]:"Invalid ARN: Expected a resource of the format `accesspoint:<accesspoint name>` but no name was provided",[I]:H},Xi={[jt]:[{[St]:!0,[et]:"sigv4",[xt]:Vo,[ur]:"{bucketArn#region}"}]},tx={[jt]:[{[St]:!0,[et]:Bf,[xt]:es,[Cf]:["*"]},{[St]:!0,[et]:"sigv4",[xt]:es,[ur]:"{bucketArn#region}"}]},rx={[S]:Nx,[x]:[_e]},nx={[O]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[P]:Ne,[G]:{}},ox={[O]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[P]:Ne,[G]:{}},ix={[O]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[P]:Ne,[G]:{}},nf={[O]:Ox,[P]:Ne,[G]:{}},sx={[O]:"https://s3.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[P]:Ne,[G]:{}},ax={[K]:"UseObjectLambdaEndpoint"},of={[jt]:[{[St]:!0,[et]:"sigv4",[xt]:Ef,[ur]:"{Region}"}]},Ax={[O]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[P]:Ne,[G]:{}},cx={[O]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}",[P]:Ne,[G]:{}},gx={[O]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[P]:Ne,[G]:{}},sf={[O]:xA,[P]:Ne,[G]:{}},lx={[O]:"https://s3.{Region}.{partitionResult#dnsSuffix}",[P]:Ne,[G]:{}},af=[{[K]:"Region"}],LL=[{[K]:"Endpoint"}],KL=[_e],Af=[Be],wA=[Wt],Hn=[Re,gt],dx=[{[S]:Nt,[x]:[{[K]:"DisableS3ExpressSessionAuth"}]},{[S]:Je,[x]:[{[K]:"DisableS3ExpressSessionAuth"},!0]}],fx=[bA],cf=[Hx],gf=[qx],Jo=[Ee],ux=[{[S]:$e,[x]:[_e,6,14,!0],[fe]:"s3expressAvailabilityZoneId"},{[S]:$e,[x]:[_e,14,16,!0],[fe]:"s3expressAvailabilityZoneDelim"},{[S]:de,[x]:[{[K]:"s3expressAvailabilityZoneDelim"},"--"]}],Zi=[{[h]:[Ee],[v]:{[O]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com",[P]:Tr,[G]:{}},[I]:v},{[v]:{[O]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com",[P]:Tr,[G]:{}},[I]:v}],Ix=[{[S]:$e,[x]:[_e,6,15,!0],[fe]:"s3expressAvailabilityZoneId"},{[S]:$e,[x]:[_e,15,17,!0],[fe]:"s3expressAvailabilityZoneDelim"},{[S]:de,[x]:[{[K]:"s3expressAvailabilityZoneDelim"},"--"]}],px=[{[S]:$e,[x]:[_e,6,19,!0],[fe]:"s3expressAvailabilityZoneId"},{[S]:$e,[x]:[_e,19,21,!0],[fe]:"s3expressAvailabilityZoneDelim"},{[S]:de,[x]:[{[K]:"s3expressAvailabilityZoneDelim"},"--"]}],mx=[{[S]:$e,[x]:[_e,6,20,!0],[fe]:"s3expressAvailabilityZoneId"},{[S]:$e,[x]:[_e,20,22,!0],[fe]:"s3expressAvailabilityZoneDelim"},{[S]:de,[x]:[{[K]:"s3expressAvailabilityZoneDelim"},"--"]}],hx=[{[S]:$e,[x]:[_e,6,26,!0],[fe]:"s3expressAvailabilityZoneId"},{[S]:$e,[x]:[_e,26,28,!0],[fe]:"s3expressAvailabilityZoneDelim"},{[S]:de,[x]:[{[K]:"s3expressAvailabilityZoneDelim"},"--"]}],$i=[{[h]:[Ee],[v]:{[O]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com",[P]:_A,[G]:{}},[I]:v},{[v]:{[O]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com",[P]:_A,[G]:{}},[I]:v}],JL=[FA],Cx=[{[S]:qn,[x]:[{[K]:pf},!1]}],Bx=[{[S]:de,[x]:[{[K]:_x},"beta"]}],VL=["*"],ln=[Px],Ex=[{[S]:qn,[x]:[{[K]:"Region"},!1]}],dn=[{[S]:de,[x]:[{[K]:"Region"},"us-east-1"]}],lf=[{[S]:de,[x]:[Lx,Ux]}],yx=[{[S]:Fe,[x]:[It,"resourceId[1]"],[fe]:yf},{[S]:fr,[x]:[{[S]:de,[x]:[Qf,kA]}]}],zL=[It,"resourceId[1]"],df=[{[S]:fr,[x]:[{[S]:de,[x]:[{[S]:Fe,[x]:[It,"region"]},kA]}]}],Qx=[{[S]:fr,[x]:[{[S]:Nt,[x]:[{[S]:Fe,[x]:[It,"resourceId[2]"]}]}]}],YL=[It,"resourceId[2]"],ff=[{[S]:DA,[x]:[{[S]:Fe,[x]:[It,"region"]}],[fe]:"bucketPartition"}],wx=[{[S]:de,[x]:[Kx,{[S]:Fe,[x]:[{[K]:"partitionResult"},et]}]}],uf=[{[S]:qn,[x]:[{[S]:Fe,[x]:[It,"region"]},!0]}],If=[{[S]:qn,[x]:[Jx,!1]}],Sx=[{[S]:qn,[x]:[Qf,!1]}],xx=[{[S]:qn,[x]:[{[K]:"Region"},!0]}],WL={version:"1.0",parameters:{Bucket:Lo,Region:Lo,UseFIPS:Ko,UseDualStack:Ko,Endpoint:Lo,ForcePathStyle:Ko,Accelerate:Ko,UseGlobalEndpoint:Ko,UseObjectLambdaEndpoint:ji,Key:Lo,Prefix:Lo,CopySource:Lo,DisableAccessPoints:ji,DisableMultiRegionAccessPoints:Ko,UseArnRegion:ji,UseS3ExpressControlEndpoint:ji,DisableS3ExpressSessionAuth:ji},rules:[{[h]:[{[S]:Nt,[x]:af}],rules:[{[h]:[Wt,Ee],error:"Accelerate cannot be used with FIPS",[I]:H},{[h]:[Be,Re],error:"Cannot set dual-stack in combination with a custom endpoint.",[I]:H},{[h]:[Re,Ee],error:"A custom endpoint cannot be combined with FIPS",[I]:H},{[h]:[Re,Wt],error:"A custom endpoint cannot be combined with S3 Accelerate",[I]:H},{[h]:[Ee,Px,MS],error:"Partition does not support FIPS",[I]:H},{[h]:[FA,{[S]:$e,[x]:[_e,0,6,!0],[fe]:xS},{[S]:de,[x]:[{[K]:xS},"--x-s3"]}],rules:[{[h]:Af,error:"S3Express does not support Dual-stack.",[I]:H},{[h]:wA,error:"S3Express does not support S3 Accelerate.",[I]:H},{[h]:Hn,rules:[{[h]:dx,rules:[{[h]:fx,rules:[{[h]:cf,rules:[{endpoint:{[O]:bS,[P]:Tr,[G]:V},[I]:v}],[I]:_}],[I]:_},{[h]:gf,rules:[{endpoint:{[O]:SA,[P]:Tr,[G]:V},[I]:v}],[I]:_},Vd],[I]:_},{[h]:fx,rules:[{[h]:cf,rules:[{endpoint:{[O]:bS,[P]:_A,[G]:V},[I]:v}],[I]:_}],[I]:_},{[h]:gf,rules:[{endpoint:{[O]:SA,[P]:_A,[G]:V},[I]:v}],[I]:_},Vd],[I]:_},{[h]:[US,OS],rules:[{[h]:[Hx,X],rules:[{[h]:Jo,endpoint:{[O]:"https://s3express-control-fips.{Region}.amazonaws.com/{uri_encoded_bucket}",[P]:Tr,[G]:V},[I]:v},{endpoint:{[O]:"https://s3express-control.{Region}.amazonaws.com/{uri_encoded_bucket}",[P]:Tr,[G]:V},[I]:v}],[I]:_}],[I]:_},{[h]:gf,rules:[{[h]:dx,rules:[{[h]:ux,rules:Zi,[I]:_},{[h]:Ix,rules:Zi,[I]:_},{[h]:px,rules:Zi,[I]:_},{[h]:mx,rules:Zi,[I]:_},{[h]:hx,rules:Zi,[I]:_},PS],[I]:_},{[h]:ux,rules:$i,[I]:_},{[h]:Ix,rules:$i,[I]:_},{[h]:px,rules:$i,[I]:_},{[h]:mx,rules:$i,[I]:_},{[h]:hx,rules:$i,[I]:_},PS],[I]:_},Vd],[I]:_},{[h]:[GS,US,OS],rules:[{[h]:Hn,endpoint:{[O]:xA,[P]:Tr,[G]:V},[I]:v},{[h]:Jo,endpoint:{[O]:"https://s3express-control-fips.{Region}.amazonaws.com",[P]:Tr,[G]:V},[I]:v},{endpoint:{[O]:"https://s3express-control.{Region}.amazonaws.com",[P]:Tr,[G]:V},[I]:v}],[I]:_},{[h]:[FA,{[S]:$e,[x]:[_e,49,50,!0],[fe]:Fx},{[S]:$e,[x]:[_e,8,12,!0],[fe]:_x},{[S]:$e,[x]:[_e,0,7,!0],[fe]:DS},{[S]:$e,[x]:[_e,32,49,!0],[fe]:pf},{[S]:DA,[x]:af,[fe]:"regionPartition"},{[S]:de,[x]:[{[K]:DS},"--op-s3"]}],rules:[{[h]:Cx,rules:[{[h]:[{[S]:de,[x]:[HS,"e"]}],rules:[{[h]:Bx,rules:[qS,{[h]:Hn,endpoint:{[O]:"https://{Bucket}.ec2.{url#authority}",[P]:yA,[G]:V},[I]:v}],[I]:_},{endpoint:{[O]:"https://{Bucket}.ec2.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[P]:yA,[G]:V},[I]:v}],[I]:_},{[h]:[{[S]:de,[x]:[HS,"o"]}],rules:[{[h]:Bx,rules:[qS,{[h]:Hn,endpoint:{[O]:"https://{Bucket}.op-{outpostId}.{url#authority}",[P]:yA,[G]:V},[I]:v}],[I]:_},{endpoint:{[O]:"https://{Bucket}.op-{outpostId}.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[P]:yA,[G]:V},[I]:v}],[I]:_},{error:'Unrecognized hardware type: "Expected hardware type o or e but got {hardwareType}"',[I]:H}],[I]:_},{error:"Invalid ARN: The outpost Id must only contain a-z, A-Z, 0-9 and `-`.",[I]:H}],[I]:_},{[h]:JL,rules:[{[h]:[Re,{[S]:fr,[x]:[{[S]:Nt,[x]:[{[S]:Dx,[x]:LL}]}]}],error:"Custom endpoint `{Endpoint}` was not a valid URI",[I]:H},{[h]:[zd,qx],rules:[{[h]:ln,rules:[{[h]:Ex,rules:[{[h]:[Wt,MS],error:"S3 Accelerate cannot be used in this region",[I]:H},{[h]:[Be,Ee,ve,X,Oe],endpoint:{[O]:"https://{Bucket}.s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[P]:qe,[G]:V},[I]:v},{[h]:[Be,Ee,ve,X,se,Le],rules:[{endpoint:LS,[I]:v}],[I]:_},{[h]:[Be,Ee,ve,X,se,Ke],endpoint:LS,[I]:v},{[h]:[oe,Ee,ve,X,Oe],endpoint:{[O]:"https://{Bucket}.s3-fips.us-east-1.{partitionResult#dnsSuffix}",[P]:qe,[G]:V},[I]:v},{[h]:[oe,Ee,ve,X,se,Le],rules:[{endpoint:KS,[I]:v}],[I]:_},{[h]:[oe,Ee,ve,X,se,Ke],endpoint:KS,[I]:v},{[h]:[Be,te,Wt,X,Oe],endpoint:{[O]:"https://{Bucket}.s3-accelerate.dualstack.us-east-1.{partitionResult#dnsSuffix}",[P]:qe,[G]:V},[I]:v},{[h]:[Be,te,Wt,X,se,Le],rules:[{endpoint:JS,[I]:v}],[I]:_},{[h]:[Be,te,Wt,X,se,Ke],endpoint:JS,[I]:v},{[h]:[Be,te,ve,X,Oe],endpoint:{[O]:"https://{Bucket}.s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[P]:qe,[G]:V},[I]:v},{[h]:[Be,te,ve,X,se,Le],rules:[{endpoint:VS,[I]:v}],[I]:_},{[h]:[Be,te,ve,X,se,Ke],endpoint:VS,[I]:v},{[h]:[oe,te,ve,Re,gt,bA,Oe],endpoint:{[O]:vx,[P]:qe,[G]:V},[I]:v},{[h]:[oe,te,ve,Re,gt,Yd,Oe],endpoint:{[O]:SA,[P]:qe,[G]:V},[I]:v},{[h]:[oe,te,ve,Re,gt,bA,se,Le],rules:[{[h]:dn,endpoint:Wd,[I]:v},{endpoint:Wd,[I]:v}],[I]:_},{[h]:[oe,te,ve,Re,gt,Yd,se,Le],rules:[{[h]:dn,endpoint:mf,[I]:v},zS],[I]:_},{[h]:[oe,te,ve,Re,gt,bA,se,Ke],endpoint:Wd,[I]:v},{[h]:[oe,te,ve,Re,gt,Yd,se,Ke],endpoint:mf,[I]:v},{[h]:[oe,te,Wt,X,Oe],endpoint:{[O]:Rx,[P]:qe,[G]:V},[I]:v},{[h]:[oe,te,Wt,X,se,Le],rules:[{[h]:dn,endpoint:jd,[I]:v},{endpoint:jd,[I]:v}],[I]:_},{[h]:[oe,te,Wt,X,se,Ke],endpoint:jd,[I]:v},{[h]:[oe,te,ve,X,Oe],endpoint:{[O]:kS,[P]:qe,[G]:V},[I]:v},{[h]:[oe,te,ve,X,se,Le],rules:[{[h]:dn,endpoint:{[O]:kS,[P]:Ne,[G]:V},[I]:v},{endpoint:YS,[I]:v}],[I]:_},{[h]:[oe,te,ve,X,se,Ke],endpoint:YS,[I]:v}],[I]:_},QA],[I]:_}],[I]:_},{[h]:[Re,gt,{[S]:de,[x]:[{[S]:Fe,[x]:[Gx,"scheme"]},"http"]},{[S]:kx,[x]:[_e,!0]},zd,te,oe,ve],rules:[{[h]:ln,rules:[{[h]:Ex,rules:[zS],[I]:_},QA],[I]:_}],[I]:_},{[h]:[zd,{[S]:Nx,[x]:KL,[fe]:Tx}],rules:[{[h]:[{[S]:Fe,[x]:[It,"resourceId[0]"],[fe]:Mx},{[S]:fr,[x]:[{[S]:de,[x]:[Lx,kA]}]}],rules:[{[h]:[{[S]:de,[x]:[Xd,Ef]}],rules:[{[h]:lf,rules:[{[h]:yx,rules:[WS,jS,{[h]:df,rules:[XS,{[h]:Qx,rules:[Zd,{[h]:ff,rules:[{[h]:ln,rules:[{[h]:wx,rules:[{[h]:uf,rules:[{[h]:[{[S]:de,[x]:[Jx,kA]}],error:"Invalid ARN: Missing account id",[I]:H},{[h]:If,rules:[{[h]:Sx,rules:[{[h]:Hn,endpoint:{[O]:FS,[P]:$d,[G]:V},[I]:v},{[h]:Jo,endpoint:{[O]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[P]:$d,[G]:V},[I]:v},{endpoint:{[O]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda.{bucketArn#region}.{bucketPartition#dnsSuffix}",[P]:$d,[G]:V},[I]:v}],[I]:_},ZS],[I]:_},ef],[I]:_},tf],[I]:_},rf],[I]:_}],[I]:_}],[I]:_},$S],[I]:_},{error:"Invalid ARN: bucket ARN is missing a region",[I]:H}],[I]:_},ex],[I]:_},{error:"Invalid ARN: Object Lambda ARNs only support `accesspoint` arn types, but found: `{arnType}`",[I]:H}],[I]:_},{[h]:lf,rules:[{[h]:yx,rules:[{[h]:df,rules:[{[h]:lf,rules:[{[h]:df,rules:[XS,{[h]:Qx,rules:[Zd,{[h]:ff,rules:[{[h]:ln,rules:[{[h]:[{[S]:de,[x]:[Kx,"{partitionResult#name}"]}],rules:[{[h]:uf,rules:[{[h]:[{[S]:de,[x]:[Xd,Vo]}],rules:[{[h]:If,rules:[{[h]:Sx,rules:[{[h]:wA,error:"Access Points do not support S3 Accelerate",[I]:H},{[h]:[Ee,Be],endpoint:{[O]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[P]:Xi,[G]:V},[I]:v},{[h]:[Ee,oe],endpoint:{[O]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[P]:Xi,[G]:V},[I]:v},{[h]:[te,Be],endpoint:{[O]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[P]:Xi,[G]:V},[I]:v},{[h]:[te,oe,Re,gt],endpoint:{[O]:FS,[P]:Xi,[G]:V},[I]:v},{[h]:[te,oe],endpoint:{[O]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.{bucketArn#region}.{bucketPartition#dnsSuffix}",[P]:Xi,[G]:V},[I]:v}],[I]:_},ZS],[I]:_},ef],[I]:_},{error:"Invalid ARN: The ARN was not for the S3 service, found: {bucketArn#service}",[I]:H}],[I]:_},tf],[I]:_},rf],[I]:_}],[I]:_}],[I]:_},$S],[I]:_}],[I]:_}],[I]:_},{[h]:[{[S]:qn,[x]:[Qf,!0]}],rules:[{[h]:Af,error:"S3 MRAP does not support dual-stack",[I]:H},{[h]:Jo,error:"S3 MRAP does not support FIPS",[I]:H},{[h]:wA,error:"S3 MRAP does not support S3 Accelerate",[I]:H},{[h]:[{[S]:Je,[x]:[{[K]:"DisableMultiRegionAccessPoints"},!0]}],error:"Invalid configuration: Multi-Region Access Point ARNs are disabled.",[I]:H},{[h]:[{[S]:DA,[x]:af,[fe]:_S}],rules:[{[h]:[{[S]:de,[x]:[{[S]:Fe,[x]:[{[K]:_S},et]},{[S]:Fe,[x]:[It,"partition"]}]}],rules:[{endpoint:{[O]:"https://{accessPointName}.accesspoint.s3-global.{mrapPartition#dnsSuffix}",[P]:{[jt]:[{[St]:!0,name:Bf,[xt]:Vo,[Cf]:VL}]},[G]:V},[I]:v}],[I]:_},{error:"Client was configured for partition `{mrapPartition#name}` but bucket referred to partition `{bucketArn#partition}`",[I]:H}],[I]:_}],[I]:_},{error:"Invalid Access Point Name",[I]:H}],[I]:_},ex],[I]:_},{[h]:[{[S]:de,[x]:[Xd,es]}],rules:[{[h]:Af,error:"S3 Outposts does not support Dual-stack",[I]:H},{[h]:Jo,error:"S3 Outposts does not support FIPS",[I]:H},{[h]:wA,error:"S3 Outposts does not support S3 Accelerate",[I]:H},{[h]:[{[S]:Nt,[x]:[{[S]:Fe,[x]:[It,"resourceId[4]"]}]}],error:"Invalid Arn: Outpost Access Point ARN contains sub resources",[I]:H},{[h]:[{[S]:Fe,[x]:zL,[fe]:pf}],rules:[{[h]:Cx,rules:[Zd,{[h]:ff,rules:[{[h]:ln,rules:[{[h]:wx,rules:[{[h]:uf,rules:[{[h]:If,rules:[{[h]:[{[S]:Fe,[x]:YL,[fe]:vS}],rules:[{[h]:[{[S]:Fe,[x]:[It,"resourceId[3]"],[fe]:yf}],rules:[{[h]:[{[S]:de,[x]:[{[K]:vS},Ux]}],rules:[{[h]:Hn,endpoint:{[O]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.{url#authority}",[P]:tx,[G]:V},[I]:v},{endpoint:{[O]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.s3-outposts.{bucketArn#region}.{bucketPartition#dnsSuffix}",[P]:tx,[G]:V},[I]:v}],[I]:_},{error:"Expected an outpost type `accesspoint`, found {outpostType}",[I]:H}],[I]:_},{error:"Invalid ARN: expected an access point name",[I]:H}],[I]:_},{error:"Invalid ARN: Expected a 4-component resource",[I]:H}],[I]:_},ef],[I]:_},tf],[I]:_},rf],[I]:_}],[I]:_}],[I]:_},{error:"Invalid ARN: The outpost Id may only contain a-z, A-Z, 0-9 and `-`. Found: `{outpostId}`",[I]:H}],[I]:_},{error:"Invalid ARN: The Outpost Id was not set",[I]:H}],[I]:_},{error:"Invalid ARN: Unrecognized format: {Bucket} (type: {arnType})",[I]:H}],[I]:_},{error:"Invalid ARN: No ARN type specified",[I]:H}],[I]:_},{[h]:[{[S]:$e,[x]:[_e,0,4,!1],[fe]:RS},{[S]:de,[x]:[{[K]:RS},"arn:"]},{[S]:fr,[x]:[{[S]:Nt,[x]:[rx]}]}],error:"Invalid ARN: `{Bucket}` was not a valid ARN",[I]:H},{[h]:[{[S]:Je,[x]:[qL,!0]},rx],error:"Path-style addressing cannot be used with ARN buckets",[I]:H},{[h]:cf,rules:[{[h]:ln,rules:[{[h]:[ve],rules:[{[h]:[Be,X,Ee,Oe],endpoint:{[O]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[P]:qe,[G]:V},[I]:v},{[h]:[Be,X,Ee,se,Le],rules:[{endpoint:nx,[I]:v}],[I]:_},{[h]:[Be,X,Ee,se,Ke],endpoint:nx,[I]:v},{[h]:[oe,X,Ee,Oe],endpoint:{[O]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[P]:qe,[G]:V},[I]:v},{[h]:[oe,X,Ee,se,Le],rules:[{endpoint:ox,[I]:v}],[I]:_},{[h]:[oe,X,Ee,se,Ke],endpoint:ox,[I]:v},{[h]:[Be,X,te,Oe],endpoint:{[O]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[P]:qe,[G]:V},[I]:v},{[h]:[Be,X,te,se,Le],rules:[{endpoint:ix,[I]:v}],[I]:_},{[h]:[Be,X,te,se,Ke],endpoint:ix,[I]:v},{[h]:[oe,Re,gt,te,Oe],endpoint:{[O]:Ox,[P]:qe,[G]:V},[I]:v},{[h]:[oe,Re,gt,te,se,Le],rules:[{[h]:dn,endpoint:nf,[I]:v},{endpoint:nf,[I]:v}],[I]:_},{[h]:[oe,Re,gt,te,se,Ke],endpoint:nf,[I]:v},{[h]:[oe,X,te,Oe],endpoint:{[O]:NS,[P]:qe,[G]:V},[I]:v},{[h]:[oe,X,te,se,Le],rules:[{[h]:dn,endpoint:{[O]:NS,[P]:Ne,[G]:V},[I]:v},{endpoint:sx,[I]:v}],[I]:_},{[h]:[oe,X,te,se,Ke],endpoint:sx,[I]:v}],[I]:_},{error:"Path-style addressing cannot be used with S3 Accelerate",[I]:H}],[I]:_}],[I]:_}],[I]:_},{[h]:[{[S]:Nt,[x]:[ax]},{[S]:Je,[x]:[ax,!0]}],rules:[{[h]:ln,rules:[{[h]:xx,rules:[WS,jS,{[h]:Hn,endpoint:{[O]:xA,[P]:of,[G]:V},[I]:v},{[h]:Jo,endpoint:{[O]:"https://s3-object-lambda-fips.{Region}.{partitionResult#dnsSuffix}",[P]:of,[G]:V},[I]:v},{endpoint:{[O]:"https://s3-object-lambda.{Region}.{partitionResult#dnsSuffix}",[P]:of,[G]:V},[I]:v}],[I]:_},QA],[I]:_}],[I]:_},{[h]:[GS],rules:[{[h]:ln,rules:[{[h]:xx,rules:[{[h]:[Ee,Be,X,Oe],endpoint:{[O]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[P]:qe,[G]:V},[I]:v},{[h]:[Ee,Be,X,se,Le],rules:[{endpoint:Ax,[I]:v}],[I]:_},{[h]:[Ee,Be,X,se,Ke],endpoint:Ax,[I]:v},{[h]:[Ee,oe,X,Oe],endpoint:{[O]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}",[P]:qe,[G]:V},[I]:v},{[h]:[Ee,oe,X,se,Le],rules:[{endpoint:cx,[I]:v}],[I]:_},{[h]:[Ee,oe,X,se,Ke],endpoint:cx,[I]:v},{[h]:[te,Be,X,Oe],endpoint:{[O]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[P]:qe,[G]:V},[I]:v},{[h]:[te,Be,X,se,Le],rules:[{endpoint:gx,[I]:v}],[I]:_},{[h]:[te,Be,X,se,Ke],endpoint:gx,[I]:v},{[h]:[te,oe,Re,gt,Oe],endpoint:{[O]:xA,[P]:qe,[G]:V},[I]:v},{[h]:[te,oe,Re,gt,se,Le],rules:[{[h]:dn,endpoint:sf,[I]:v},{endpoint:sf,[I]:v}],[I]:_},{[h]:[te,oe,Re,gt,se,Ke],endpoint:sf,[I]:v},{[h]:[te,oe,X,Oe],endpoint:{[O]:TS,[P]:qe,[G]:V},[I]:v},{[h]:[te,oe,X,se,Le],rules:[{[h]:dn,endpoint:{[O]:TS,[P]:Ne,[G]:V},[I]:v},{endpoint:lx,[I]:v}],[I]:_},{[h]:[te,oe,X,se,Ke],endpoint:lx,[I]:v}],[I]:_},QA],[I]:_}],[I]:_}],[I]:_},{error:"A region must be set when sending requests to S3.",[I]:H}]},Vx=WL;var jL=new nA({size:50,params:["Accelerate","Bucket","DisableAccessPoints","DisableMultiRegionAccessPoints","DisableS3ExpressSessionAuth","Endpoint","ForcePathStyle","Region","UseArnRegion","UseDualStack","UseFIPS","UseGlobalEndpoint","UseObjectLambdaEndpoint","UseS3ExpressControlEndpoint"]}),vA=(e,t={})=>jL.get(e,()=>Nd(Vx,{endpointParams:e,logger:t.logger}));On.aws=Md;var XL=e=>async(t,r,n)=>{if(!n)throw new Error("Could not find `input` for `defaultEndpointRuleSetHttpAuthSchemeParametersProvider`");let o=await e(t,r,n),i=Vt(r)?.commandInstance?.constructor?.getEndpointParameterInstructions;if(!i)throw new Error(`getEndpointParameterInstructions() is not defined on \`${r.commandName}\``);let s=await Hd(n,{getEndpointParameterInstructions:i},t);return Object.assign(o,s)},ZL=async(e,t,r)=>({operation:Vt(t).operation,region:await We(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),zx=XL(ZL);function Yx(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"s3",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function Wx(e){return{schemeId:"aws.auth#sigv4a",signingProperties:{name:"s3",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}var $L=(e,t,r)=>o=>{let s=e(o).properties?.authSchemes;if(!s)return t(o);let a=[];for(let A of s){let{name:c,properties:g={},...d}=A,l=c.toLowerCase(),f;if(l==="sigv4a"){f="aws.auth#sigv4a";let p=s.find(C=>{let Q=C.name.toLowerCase();return Q!=="sigv4a"&&Q.startsWith("sigv4")});if(!BA.CrtSignerV4&&p)continue}else if(l.startsWith("sigv4"))f="aws.auth#sigv4";else throw new Error(`Unknown HttpAuthScheme found in \`@smithy.rules#endpointRuleSet\`: \`${l}\``);let u=r[f];if(!u)throw new Error(`Could not find HttpAuthOption create function for \`${f}\``);let m=u(o);m.schemeId=f,m.signingProperties={...m.signingProperties||{},...d,...g},a.push(m)}return a},e1=e=>{let t=[];switch(e.operation){default:t.push(Yx(e)),t.push(Wx(e))}return t},jx=$L(vA,e1,{"aws.auth#sigv4":Yx,"aws.auth#sigv4a":Wx}),Xx=e=>{let t=Uy(e);return{...Iy(t)}};var Zx=e=>({...e,useFipsEndpoint:e.useFipsEndpoint??!1,useDualstackEndpoint:e.useDualstackEndpoint??!1,forcePathStyle:e.forcePathStyle??!1,useAccelerateEndpoint:e.useAccelerateEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,disableMultiregionAccessPoints:e.disableMultiregionAccessPoints??!1,defaultSigningName:"s3"}),RA={ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},DisableS3ExpressSessionAuth:{type:"clientContextParams",name:"disableS3ExpressSessionAuth"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};var Pe=class e extends ja{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}};var NA=class e extends Pe{constructor(t){super({name:"NoSuchUpload",$fault:"client",...t}),this.name="NoSuchUpload",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};var TA=class e extends Pe{constructor(t){super({name:"ObjectNotInActiveTierError",$fault:"client",...t}),this.name="ObjectNotInActiveTierError",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},MA=class e extends Pe{constructor(t){super({name:"BucketAlreadyExists",$fault:"client",...t}),this.name="BucketAlreadyExists",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},UA=class e extends Pe{constructor(t){super({name:"BucketAlreadyOwnedByYou",$fault:"client",...t}),this.name="BucketAlreadyOwnedByYou",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};var OA=class e extends Pe{constructor(t){super({name:"NoSuchBucket",$fault:"client",...t}),this.name="NoSuchBucket",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},wf;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(wf||(wf={}));var Sf;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.AccessPointArn!==void 0?r.AccessPointArn(t.AccessPointArn):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(Sf||(Sf={}));var PA=class e extends Pe{constructor(t){super({name:"InvalidObjectState",$fault:"client",...t}),this.name="InvalidObjectState",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.StorageClass=t.StorageClass,this.AccessTier=t.AccessTier}},GA=class e extends Pe{constructor(t){super({name:"NoSuchKey",$fault:"client",...t}),this.name="NoSuchKey",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};var HA=class e extends Pe{constructor(t){super({name:"NotFound",$fault:"client",...t}),this.name="NotFound",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};var t1=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:wt},...e.SessionToken&&{SessionToken:wt}}),$x=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:wt},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:wt},...e.Credentials&&{Credentials:t1(e.Credentials)}}),eb=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:wt},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:wt}});var qA=class e extends Pe{constructor(t){super({name:"EncryptionTypeMismatch",$fault:"client",...t}),this.name="EncryptionTypeMismatch",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},LA=class e extends Pe{constructor(t){super({name:"InvalidRequest",$fault:"client",...t}),this.name="InvalidRequest",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},KA=class e extends Pe{constructor(t){super({name:"InvalidWriteOffset",$fault:"client",...t}),this.name="InvalidWriteOffset",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},JA=class e extends Pe{constructor(t){super({name:"TooManyParts",$fault:"client",...t}),this.name="TooManyParts",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},VA=class e extends Pe{constructor(t){super({name:"ObjectAlreadyInActiveTierError",$fault:"client",...t}),this.name="ObjectAlreadyInActiveTierError",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};var tb;(function(e){e.visit=(t,r)=>t.Records!==void 0?r.Records(t.Records):t.Stats!==void 0?r.Stats(t.Stats):t.Progress!==void 0?r.Progress(t.Progress):t.Cont!==void 0?r.Cont(t.Cont):t.End!==void 0?r.End(t.End):r._(t.$unknown[0],t.$unknown[1])})(tb||(tb={}));var rb=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:wt},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:wt}}),nb=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:wt},...e.SSEKMSKeyId&&{SSEKMSKeyId:wt},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:wt}});var cb=async(e,t)=>{let r=Oa(e,t),n=De({},vr,{[n2]:e[O1],[ZA]:e[WA],[$A]:e[XA],[ec]:e[jA],[Yo]:[()=>vr(e[zo]),()=>e[zo].toString()]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let o=De({[t2]:[,""]});return r.m("GET").h(n).q(o).b(void 0),r.build()};var gb=async(e,t)=>{let r=Oa(e,t),n=De({},vr,{[j1]:e[S1]||"application/octet-stream",[r2]:e[h1],[K1]:e[B1],[J1]:e[E1],[V1]:e[y1],[z1]:e[Q1],[Y1]:[()=>vr(e[ob]),()=>e[ob].toString()],[W1]:e[w1],[p2]:e[C1],[Bb]:e[ub],[Eb]:e[Ib],[yb]:e[pb],[Qb]:e[mb],[X1]:[()=>vr(e[ib]),()=>Zy(e[ib]).toString()],[$1]:e[v1],[e2]:e[R1],[s2]:e[D1],[a2]:e[k1],[A2]:e[F1],[c2]:e[_1],[B2]:[()=>vr(e[ab]),()=>e[ab].toString()],[ZA]:e[WA],[I2]:e[YA],[E2]:e[L1],[wb]:e[hb],[m2]:e[P1],[Sb]:e[Cb],[$A]:e[XA],[ec]:e[jA],[Yo]:[()=>vr(e[zo]),()=>e[zo].toString()],[u2]:e[U1],[h2]:e[H1],[l2]:e[T1],[d2]:[()=>vr(e[sb]),()=>cQ(e[sb]).toString()],[g2]:e[N1],[i2]:e[x1],...e.Metadata!==void 0&&Object.keys(e.Metadata).reduce((a,A)=>(a[`x-amz-meta-${A.toLowerCase()}`]=e.Metadata[A],a),{})});r.bp("/{Key+}"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1),r.p("Key",()=>e.Key,"{Key+}",!0);let o=De({[y2]:[,"PutObject"]}),i,s;return e.Body!==void 0&&(s=e.Body,i=s),r.m("PUT").h(n).q(o).b(i),r.build()};var lb=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return fb(e,t);let r=De({$metadata:lt(e),[WA]:[,e.headers[ZA]],[XA]:[,e.headers[$A]],[jA]:[,e.headers[ec]],[zo]:[()=>e.headers[Yo]!==void 0,()=>fd(e.headers[Yo])]}),n=ud(Ky(await wd(e.body,t)),"body");return n[Df]!=null&&(r[Df]=m1(n[Df],t)),r};var db=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return fb(e,t);let r=De({$metadata:lt(e),[zA]:[,e.headers[o2]],[b1]:[,e.headers[Z1]],[ub]:[,e.headers[Bb]],[Ib]:[,e.headers[Eb]],[pb]:[,e.headers[yb]],[mb]:[,e.headers[Qb]],[WA]:[,e.headers[ZA]],[q1]:[,e.headers[C2]],[hb]:[,e.headers[wb]],[Cb]:[,e.headers[Sb]],[XA]:[,e.headers[$A]],[jA]:[,e.headers[ec]],[zo]:[()=>e.headers[Yo]!==void 0,()=>fd(e.headers[Yo])],[G1]:[()=>e.headers[Ab]!==void 0,()=>Vy(e.headers[Ab])],[M1]:[,e.headers[f2]]});return await Ti(e.body,t),r};var fb=async(e,t)=>{let r={...e,body:await KQ(e.body,t)},n=JQ(e,r.body);switch(n){case"NoSuchUpload":case"com.amazonaws.s3#NoSuchUpload":throw await d1(r,t);case"ObjectNotInActiveTierError":case"com.amazonaws.s3#ObjectNotInActiveTierError":throw await I1(r,t);case"BucketAlreadyExists":case"com.amazonaws.s3#BucketAlreadyExists":throw await o1(r,t);case"BucketAlreadyOwnedByYou":case"com.amazonaws.s3#BucketAlreadyOwnedByYou":throw await i1(r,t);case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":throw await g1(r,t);case"InvalidObjectState":case"com.amazonaws.s3#InvalidObjectState":throw await a1(r,t);case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":throw await l1(r,t);case"NotFound":case"com.amazonaws.s3#NotFound":throw await f1(r,t);case"EncryptionTypeMismatch":case"com.amazonaws.s3#EncryptionTypeMismatch":throw await s1(r,t);case"InvalidRequest":case"com.amazonaws.s3#InvalidRequest":throw await A1(r,t);case"InvalidWriteOffset":case"com.amazonaws.s3#InvalidWriteOffset":throw await c1(r,t);case"TooManyParts":case"com.amazonaws.s3#TooManyParts":throw await p1(r,t);case"ObjectAlreadyInActiveTierError":case"com.amazonaws.s3#ObjectAlreadyInActiveTierError":throw await u1(r,t);default:let o=r.body;return n1({output:e,parsedBody:o,errorCode:n})}},n1=tQ(Pe),o1=async(e,t)=>{let r=De({}),n=e.body,o=new MA({$metadata:lt(e),...r});return Ze(o,e.body)},i1=async(e,t)=>{let r=De({}),n=e.body,o=new UA({$metadata:lt(e),...r});return Ze(o,e.body)},s1=async(e,t)=>{let r=De({}),n=e.body,o=new qA({$metadata:lt(e),...r});return Ze(o,e.body)},a1=async(e,t)=>{let r=De({}),n=e.body;n[bf]!=null&&(r[bf]=vo(n[bf])),n[YA]!=null&&(r[YA]=vo(n[YA]));let o=new PA({$metadata:lt(e),...r});return Ze(o,e.body)},A1=async(e,t)=>{let r=De({}),n=e.body,o=new LA({$metadata:lt(e),...r});return Ze(o,e.body)},c1=async(e,t)=>{let r=De({}),n=e.body,o=new KA({$metadata:lt(e),...r});return Ze(o,e.body)},g1=async(e,t)=>{let r=De({}),n=e.body,o=new OA({$metadata:lt(e),...r});return Ze(o,e.body)},l1=async(e,t)=>{let r=De({}),n=e.body,o=new GA({$metadata:lt(e),...r});return Ze(o,e.body)},d1=async(e,t)=>{let r=De({}),n=e.body,o=new NA({$metadata:lt(e),...r});return Ze(o,e.body)},f1=async(e,t)=>{let r=De({}),n=e.body,o=new HA({$metadata:lt(e),...r});return Ze(o,e.body)},u1=async(e,t)=>{let r=De({}),n=e.body,o=new VA({$metadata:lt(e),...r});return Ze(o,e.body)},I1=async(e,t)=>{let r=De({}),n=e.body,o=new TA({$metadata:lt(e),...r});return Ze(o,e.body)},p1=async(e,t)=>{let r=De({}),n=e.body,o=new JA({$metadata:lt(e),...r});return Ze(o,e.body)};var m1=(e,t)=>{let r={};return e[xf]!=null&&(r[xf]=vo(e[xf])),e[kf]!=null&&(r[kf]=vo(e[kf])),e[Ff]!=null&&(r[Ff]=vo(e[Ff])),e[zA]!=null&&(r[zA]=ud($y(e[zA]))),r};var lt=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]});var h1="ACL";var xf="AccessKeyId";var bf="AccessTier";var zo="BucketKeyEnabled";var Df="Credentials",C1="ChecksumAlgorithm";var B1="CacheControl",ub="ChecksumCRC32",Ib="ChecksumCRC32C",E1="ContentDisposition";var y1="ContentEncoding";var Q1="ContentLanguage",ob="ContentLength";var w1="ContentMD5";var pb="ChecksumSHA1",mb="ChecksumSHA256";var S1="ContentType";var ib="Expires";var x1="ExpectedBucketOwner";var b1="ETag";var zA="Expiration";var D1="GrantFullControl";var k1="GrantRead",F1="GrantReadACP";var _1="GrantWriteACP";var v1="IfMatch";var R1="IfNoneMatch";var N1="ObjectLockLegalHoldStatus",T1="ObjectLockMode";var sb="ObjectLockRetainUntilDate";var M1="RequestCharged";var U1="RequestPayer";var kf="SecretAccessKey";var YA="StorageClass";var O1="SessionMode";var WA="ServerSideEncryption";var hb="SSECustomerAlgorithm",P1="SSECustomerKey",Cb="SSECustomerKeyMD5";var jA="SSEKMSEncryptionContext",XA="SSEKMSKeyId";var Ff="SessionToken";var G1="Size";var H1="Tagging";var q1="VersionId";var ab="WriteOffsetBytes",L1="WebsiteRedirectLocation";var K1="cache-control",J1="content-disposition",V1="content-encoding",z1="content-language",Y1="content-length",W1="content-md5";var j1="content-type";var X1="expires";var Z1="etag";var $1="if-match";var e2="if-none-match";var t2="session";var r2="x-amz-acl";var Bb="x-amz-checksum-crc32",Eb="x-amz-checksum-crc32c";var yb="x-amz-checksum-sha1",Qb="x-amz-checksum-sha256";var n2="x-amz-create-session-mode";var o2="x-amz-expiration",i2="x-amz-expected-bucket-owner";var s2="x-amz-grant-full-control",a2="x-amz-grant-read",A2="x-amz-grant-read-acp";var c2="x-amz-grant-write-acp";var g2="x-amz-object-lock-legal-hold",l2="x-amz-object-lock-mode",d2="x-amz-object-lock-retain-until-date";var Ab="x-amz-object-size";var f2="x-amz-request-charged";var u2="x-amz-request-payer";var I2="x-amz-storage-class",p2="x-amz-sdk-checksum-algorithm";var ZA="x-amz-server-side-encryption",$A="x-amz-server-side-encryption-aws-kms-key-id",Yo="x-amz-server-side-encryption-bucket-key-enabled",ec="x-amz-server-side-encryption-context",wb="x-amz-server-side-encryption-customer-algorithm",m2="x-amz-server-side-encryption-customer-key",Sb="x-amz-server-side-encryption-customer-key-md5",h2="x-amz-tagging";var C2="x-amz-version-id",B2="x-amz-write-offset-bytes",E2="x-amz-website-redirect-location",y2="x-id";var tc=class extends Nn.classBuilder().ep({...RA,DisableS3ExpressSessionAuth:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,o){return[_a(n,this.serialize,this.deserialize),IA(n,t.getEndpointParameterInstructions()),rA(n)]}).s("AmazonS3","CreateSession",{}).n("S3Client","CreateSessionCommand").f(eb,$x).ser(cb).de(lb).build(){};var xb={name:"@aws-sdk/client-s3",description:"AWS SDK for JavaScript S3 Client for Node.js, Browser and React Native",version:"3.705.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-s3","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo s3",test:"yarn g:vitest run","test:browser":"node ./test/browser-build/esbuild && vitest run -c vitest.config.browser.ts --mode development","test:browser:watch":"node ./test/browser-build/esbuild && yarn g:vitest watch -c vitest.config.browser.ts","test:e2e":"yarn g:vitest run -c vitest.config.e2e.ts --mode development && yarn test:browser","test:e2e:watch":"yarn g:vitest watch -c vitest.config.e2e.ts","test:watch":"yarn g:vitest watch"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha1-browser":"5.2.0","@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/client-sso-oidc":"3.699.0","@aws-sdk/client-sts":"3.699.0","@aws-sdk/core":"3.696.0","@aws-sdk/credential-provider-node":"3.699.0","@aws-sdk/middleware-bucket-endpoint":"3.696.0","@aws-sdk/middleware-expect-continue":"3.696.0","@aws-sdk/middleware-flexible-checksums":"3.701.0","@aws-sdk/middleware-host-header":"3.696.0","@aws-sdk/middleware-location-constraint":"3.696.0","@aws-sdk/middleware-logger":"3.696.0","@aws-sdk/middleware-recursion-detection":"3.696.0","@aws-sdk/middleware-sdk-s3":"3.696.0","@aws-sdk/middleware-ssec":"3.696.0","@aws-sdk/middleware-user-agent":"3.696.0","@aws-sdk/region-config-resolver":"3.696.0","@aws-sdk/signature-v4-multi-region":"3.696.0","@aws-sdk/types":"3.696.0","@aws-sdk/util-endpoints":"3.696.0","@aws-sdk/util-user-agent-browser":"3.696.0","@aws-sdk/util-user-agent-node":"3.696.0","@aws-sdk/xml-builder":"3.696.0","@smithy/config-resolver":"^3.0.12","@smithy/core":"^2.5.3","@smithy/eventstream-serde-browser":"^3.0.13","@smithy/eventstream-serde-config-resolver":"^3.0.10","@smithy/eventstream-serde-node":"^3.0.12","@smithy/fetch-http-handler":"^4.1.1","@smithy/hash-blob-browser":"^3.1.9","@smithy/hash-node":"^3.0.10","@smithy/hash-stream-node":"^3.1.9","@smithy/invalid-dependency":"^3.0.10","@smithy/md5-js":"^3.0.10","@smithy/middleware-content-length":"^3.0.12","@smithy/middleware-endpoint":"^3.2.3","@smithy/middleware-retry":"^3.0.27","@smithy/middleware-serde":"^3.0.10","@smithy/middleware-stack":"^3.0.10","@smithy/node-config-provider":"^3.1.11","@smithy/node-http-handler":"^3.3.1","@smithy/protocol-http":"^4.1.7","@smithy/smithy-client":"^3.4.4","@smithy/types":"^3.7.1","@smithy/url-parser":"^3.0.10","@smithy/util-base64":"^3.0.0","@smithy/util-body-length-browser":"^3.0.0","@smithy/util-body-length-node":"^3.0.0","@smithy/util-defaults-mode-browser":"^3.0.27","@smithy/util-defaults-mode-node":"^3.0.27","@smithy/util-endpoints":"^2.1.6","@smithy/util-middleware":"^3.0.10","@smithy/util-retry":"^3.0.10","@smithy/util-stream":"^3.3.1","@smithy/util-utf8":"^3.0.0","@smithy/util-waiter":"^3.1.9",tslib:"^2.6.2"},devDependencies:{"@aws-sdk/signature-v4-crt":"3.696.0","@tsconfig/node16":"16.1.3","@types/node":"^16.18.96",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~4.9.5"},engines:{node:">=16.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-s3",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-s3"}};var _f=e=>new TextEncoder().encode(e);function vf(e){return typeof e=="string"?e.length===0:e.byteLength===0}var Rf={name:"SHA-1"},Nf={name:"HMAC",hash:Rf},bb=new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]);var w2={};function Tt(){return typeof window<"u"?window:typeof self<"u"?self:w2}var Tf=function(){function e(t){this.toHash=new Uint8Array(0),t!==void 0&&(this.key=new Promise(function(r,n){Tt().crypto.subtle.importKey("raw",Db(t),Nf,!1,["sign"]).then(r,n)}),this.key.catch(function(){}))}return e.prototype.update=function(t){if(!vf(t)){var r=Db(t),n=new Uint8Array(this.toHash.byteLength+r.byteLength);n.set(this.toHash,0),n.set(r,this.toHash.byteLength),this.toHash=n}},e.prototype.digest=function(){var t=this;return this.key?this.key.then(function(r){return Tt().crypto.subtle.sign(Nf,r,t.toHash).then(function(n){return new Uint8Array(n)})}):vf(this.toHash)?Promise.resolve(bb):Promise.resolve().then(function(){return Tt().crypto.subtle.digest(Rf,t.toHash)}).then(function(r){return Promise.resolve(new Uint8Array(r))})},e.prototype.reset=function(){this.toHash=new Uint8Array(0)},e}();function Db(e){return typeof e=="string"?_f(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}var S2=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function rc(e){if(x2(e)&&typeof e.crypto.subtle=="object"){var t=e.crypto.subtle;return b2(t)}return!1}function x2(e){if(typeof e=="object"&&typeof e.crypto=="object"){var t=e.crypto.getRandomValues;return typeof t=="function"}return!1}function b2(e){return e&&S2.every(function(t){return typeof e[t]=="function"})}var kb=function(){function e(t){if(rc(Tt()))this.hash=new Tf(t);else throw new Error("SHA1 not supported")}return e.prototype.update=function(t,r){this.hash.update(ct(t))},e.prototype.digest=function(){return this.hash.digest()},e.prototype.reset=function(){this.hash.reset()},e}();var Mf={name:"SHA-256"},Uf={name:"HMAC",hash:Mf},Fb=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85]);var Of=function(){function e(t){this.toHash=new Uint8Array(0),this.secret=t,this.reset()}return e.prototype.update=function(t){if(!dr(t)){var r=ct(t),n=new Uint8Array(this.toHash.byteLength+r.byteLength);n.set(this.toHash,0),n.set(r,this.toHash.byteLength),this.toHash=n}},e.prototype.digest=function(){var t=this;return this.key?this.key.then(function(r){return Tt().crypto.subtle.sign(Uf,r,t.toHash).then(function(n){return new Uint8Array(n)})}):dr(this.toHash)?Promise.resolve(Fb):Promise.resolve().then(function(){return Tt().crypto.subtle.digest(Mf,t.toHash)}).then(function(r){return Promise.resolve(new Uint8Array(r))})},e.prototype.reset=function(){var t=this;this.toHash=new Uint8Array(0),this.secret&&this.secret!==void 0&&(this.key=new Promise(function(r,n){Tt().crypto.subtle.importKey("raw",ct(t.secret),Uf,!1,["sign"]).then(r,n)}),this.key.catch(function(){}))},e}();var pt=64,_b=32,vb=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Rb=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],Nb=Math.pow(2,53)-1;var ts=function(){function e(){this.state=Int32Array.from(Rb),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(t){if(this.finished)throw new Error("Attempted to update an already finished hash.");var r=0,n=t.byteLength;if(this.bytesHashed+=n,this.bytesHashed*8>Nb)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=t[r++],n--,this.bufferLength===pt&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var t=this.bytesHashed*8,r=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(r.setUint8(this.bufferLength++,128),n%pt>=pt-8){for(var o=this.bufferLength;o<pt;o++)r.setUint8(o,0);this.hashBuffer(),this.bufferLength=0}for(var o=this.bufferLength;o<pt-8;o++)r.setUint8(o,0);r.setUint32(pt-8,Math.floor(t/4294967296),!0),r.setUint32(pt-4,t),this.hashBuffer(),this.finished=!0}for(var i=new Uint8Array(_b),o=0;o<8;o++)i[o*4]=this.state[o]>>>24&255,i[o*4+1]=this.state[o]>>>16&255,i[o*4+2]=this.state[o]>>>8&255,i[o*4+3]=this.state[o]>>>0&255;return i},e.prototype.hashBuffer=function(){for(var t=this,r=t.buffer,n=t.state,o=n[0],i=n[1],s=n[2],a=n[3],A=n[4],c=n[5],g=n[6],d=n[7],l=0;l<pt;l++){if(l<16)this.temp[l]=(r[l*4]&255)<<24|(r[l*4+1]&255)<<16|(r[l*4+2]&255)<<8|r[l*4+3]&255;else{var f=this.temp[l-2],u=(f>>>17|f<<15)^(f>>>19|f<<13)^f>>>10;f=this.temp[l-15];var m=(f>>>7|f<<25)^(f>>>18|f<<14)^f>>>3;this.temp[l]=(u+this.temp[l-7]|0)+(m+this.temp[l-16]|0)}var p=(((A>>>6|A<<26)^(A>>>11|A<<21)^(A>>>25|A<<7))+(A&c^~A&g)|0)+(d+(vb[l]+this.temp[l]|0)|0)|0,C=((o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10))+(o&i^o&s^i&s)|0;d=g,g=c,c=A,A=a+p|0,a=s,s=i,i=o,o=p+C|0}n[0]+=o,n[1]+=i,n[2]+=s,n[3]+=a,n[4]+=A,n[5]+=c,n[6]+=g,n[7]+=d},e}();var Tb=function(){function e(t){this.secret=t,this.hash=new ts,this.reset()}return e.prototype.update=function(t){if(!(dr(t)||this.error))try{this.hash.update(ct(t))}catch(r){this.error=r}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return $r(this,void 0,void 0,function(){return sr(this,function(t){return[2,this.digestSync()]})})},e.prototype.reset=function(){if(this.hash=new ts,this.secret){this.outer=new ts;var t=D2(this.secret),r=new Uint8Array(pt);r.set(t);for(var n=0;n<pt;n++)t[n]^=54,r[n]^=92;this.hash.update(t),this.outer.update(r);for(var n=0;n<t.byteLength;n++)t[n]=0}},e}();function D2(e){var t=ct(e);if(t.byteLength>pt){var r=new ts;r.update(t),t=r.digest()}var n=new Uint8Array(pt);return n.set(t),n}var Mb=function(){function e(t){rc(Tt())?this.hash=new Of(t):this.hash=new Tb(t)}return e.prototype.update=function(t,r){this.hash.update(ct(t))},e.prototype.digest=function(){return this.hash.digest()},e.prototype.reset=function(){this.hash.reset()},e}();var Ub=J(Gf()),Ob=({serviceId:e,clientVersion:t})=>async r=>{let n=typeof window<"u"&&window?.navigator?.userAgent?Ub.default.parse(window.navigator.userAgent):void 0,o=[["aws-sdk-js",t],["ua","2.1"],[`os/${n?.os?.name||"other"}`,n?.os?.version],["lang/js"],["md/browser",`${n?.browser?.name??"unknown"}_${n?.browser?.version??"unknown"}`]];e&&o.push([`api/${e}`,t]);let i=await r?.userAgentAppId?.();return i&&o.push([`app/${i}`]),o};var Wo=class e{constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,o=Math.abs(Math.round(t));n>-1&&o>0;n--,o/=256)r[n]=o;return t<0&&Pb(r),new e(r)}valueOf(){let t=this.bytes.slice(0),r=t[0]&128;return r&&Pb(t),parseInt(be(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function Pb(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}var nc=class{constructor(t,r){this.toUtf8=t,this.fromUtf8=r}format(t){let r=[];for(let i of Object.keys(t)){let s=this.fromUtf8(i);r.push(Uint8Array.from([s.byteLength]),s,this.formatHeaderValue(t[i]))}let n=new Uint8Array(r.reduce((i,s)=>i+s.byteLength,0)),o=0;for(let i of r)n.set(i,o),o+=i.byteLength;return n}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,t.value,!1),new Uint8Array(n.buffer);case"long":let o=new Uint8Array(9);return o[0]=5,o.set(t.value.bytes,1),o;case"binary":let i=new DataView(new ArrayBuffer(3+t.value.byteLength));i.setUint8(0,6),i.setUint16(1,t.value.byteLength,!1);let s=new Uint8Array(i.buffer);return s.set(t.value,3),s;case"string":let a=this.fromUtf8(t.value),A=new DataView(new ArrayBuffer(3+a.byteLength));A.setUint8(0,7),A.setUint16(1,a.byteLength,!1);let c=new Uint8Array(A.buffer);return c.set(a,3),c;case"timestamp":let g=new Uint8Array(9);return g[0]=8,g.set(Wo.fromNumber(t.value.valueOf()).bytes,1),g;case"uuid":if(!U2.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);let d=new Uint8Array(17);return d[0]=9,d.set(Ta(t.value.replace(/\-/g,"")),1),d}}parse(t){let r={},n=0;for(;n<t.byteLength;){let o=t.getUint8(n++),i=this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,o));switch(n+=o,t.getUint8(n++)){case 0:r[i]={type:Hb,value:!0};break;case 1:r[i]={type:Hb,value:!1};break;case 2:r[i]={type:k2,value:t.getInt8(n++)};break;case 3:r[i]={type:F2,value:t.getInt16(n,!1)},n+=2;break;case 4:r[i]={type:_2,value:t.getInt32(n,!1)},n+=4;break;case 5:r[i]={type:v2,value:new Wo(new Uint8Array(t.buffer,t.byteOffset+n,8))},n+=8;break;case 6:let s=t.getUint16(n,!1);n+=2,r[i]={type:R2,value:new Uint8Array(t.buffer,t.byteOffset+n,s)},n+=s;break;case 7:let a=t.getUint16(n,!1);n+=2,r[i]={type:N2,value:this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,a))},n+=a;break;case 8:r[i]={type:T2,value:new Date(new Wo(new Uint8Array(t.buffer,t.byteOffset+n,8)).valueOf())},n+=8;break;case 9:let A=new Uint8Array(t.buffer,t.byteOffset+n,16);n+=16,r[i]={type:M2,value:`${be(A.subarray(0,4))}-${be(A.subarray(4,6))}-${be(A.subarray(6,8))}-${be(A.subarray(8,10))}-${be(A.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return r}},Gb;(function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"})(Gb||(Gb={}));var Hb="boolean",k2="byte",F2="short",_2="integer",v2="long",R2="binary",N2="string",T2="timestamp",M2="uuid",U2=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;var qb=4,fn=qb*2,Ln=4,O2=fn+Ln*2;function Lb({byteLength:e,byteOffset:t,buffer:r}){if(e<O2)throw new Error("Provided message too short to accommodate event stream message overhead");let n=new DataView(r,t,e),o=n.getUint32(0,!1);if(e!==o)throw new Error("Reported message length does not match received message length");let i=n.getUint32(qb,!1),s=n.getUint32(fn,!1),a=n.getUint32(e-Ln,!1),A=new Mn().update(new Uint8Array(r,t,fn));if(s!==A.digest())throw new Error(`The prelude checksum specified in the message (${s}) does not match the calculated CRC32 checksum (${A.digest()})`);if(A.update(new Uint8Array(r,t+fn,e-(fn+Ln))),a!==A.digest())throw new Error(`The message checksum (${A.digest()}) did not match the expected value of ${a}`);return{headers:new DataView(r,t+fn+Ln,i),body:new Uint8Array(r,t+fn+Ln+i,o-i-(fn+Ln+Ln))}}var oc=class{constructor(t,r){this.headerMarshaller=new nc(t,r),this.messageBuffer=[],this.isEndOfStream=!1}feed(t){this.messageBuffer.push(this.decode(t))}endOfStream(){this.isEndOfStream=!0}getMessage(){let t=this.messageBuffer.pop(),r=this.isEndOfStream;return{getMessage(){return t},isEndOfStream(){return r}}}getAvailableMessages(){let t=this.messageBuffer;this.messageBuffer=[];let r=this.isEndOfStream;return{getMessages(){return t},isEndOfStream(){return r}}}encode({headers:t,body:r}){let n=this.headerMarshaller.format(t),o=n.byteLength+r.byteLength+16,i=new Uint8Array(o),s=new DataView(i.buffer,i.byteOffset,i.byteLength),a=new Mn;return s.setUint32(0,o,!1),s.setUint32(4,n.byteLength,!1),s.setUint32(8,a.update(i.subarray(0,8)).digest(),!1),i.set(n,12),i.set(r,n.byteLength+12),s.setUint32(o-4,a.update(i.subarray(8,o-4)).digest(),!1),i}decode(t){let{headers:r,body:n}=Lb(t);return{headers:this.headerMarshaller.parse(r),body:n}}formatHeaders(t){return this.headerMarshaller.format(t)}};var ic=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.inputStream)yield this.options.decoder.decode(t)}};var sc=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.messageStream)yield this.options.encoder.encode(t);this.options.includeEndFrame&&(yield new Uint8Array(0))}};var ac=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.messageStream){let r=await this.options.deserializer(t);r!==void 0&&(yield r)}}};var Ac=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.inputStream)yield this.options.serializer(t)}};function Kb(e){let t=0,r=0,n=null,o=null,i=a=>{if(typeof a!="number")throw new Error("Attempted to allocate an event message where size was not a number: "+a);t=a,r=4,n=new Uint8Array(a),new DataView(n.buffer).setUint32(0,a,!1)},s=async function*(){let a=e[Symbol.asyncIterator]();for(;;){let{value:A,done:c}=await a.next();if(c){if(t)if(t===r)yield n;else throw new Error("Truncated event message received.");else return;return}let g=A.length,d=0;for(;d<g;){if(!n){let f=g-d;o||(o=new Uint8Array(4));let u=Math.min(4-r,f);if(o.set(A.slice(d,d+u),r),r+=u,d+=u,r<4)break;i(new DataView(o.buffer).getUint32(0,!1)),o=null}let l=Math.min(t-r,g-d);n.set(A.slice(d,d+l),r),r+=l,d+=l,t&&t===r&&(yield n,n=null,t=0,r=0)}}};return{[Symbol.asyncIterator]:s}}function Jb(e,t){return async function(r){let{value:n}=r.headers[":message-type"];if(n==="error"){let o=new Error(r.headers[":error-message"].value||"UnknownError");throw o.name=r.headers[":error-code"].value,o}else if(n==="exception"){let o=r.headers[":exception-type"].value,i={[o]:r},s=await e(i);if(s.$unknown){let a=new Error(t(r.body));throw a.name=o,a}throw s[o]}else if(n==="event"){let o={[r.headers[":event-type"].value]:r},i=await e(o);return i.$unknown?void 0:i}else throw Error(`Unrecognizable event type: ${r.headers[":event-type"].value}`)}}var ns=class{constructor({utf8Encoder:t,utf8Decoder:r}){this.eventStreamCodec=new oc(t,r),this.utfEncoder=t}deserialize(t,r){let n=Kb(t);return new ac({messageStream:new ic({inputStream:n,decoder:this.eventStreamCodec}),deserializer:Jb(r,this.utfEncoder)})}serialize(t,r){return new sc({messageStream:new Ac({inputStream:t,serializer:r}),encoder:this.eventStreamCodec,includeEndFrame:!0})}};var Vb=e=>({[Symbol.asyncIterator]:async function*(){let t=e.getReader();try{for(;;){let{done:r,value:n}=await t.read();if(r)return;yield n}}finally{t.releaseLock()}}}),zb=e=>{let t=e[Symbol.asyncIterator]();return new ReadableStream({async pull(r){let{done:n,value:o}=await t.next();if(n)return r.close();r.enqueue(o)}})};var cc=class{constructor({utf8Encoder:t,utf8Decoder:r}){this.universalMarshaller=new ns({utf8Decoder:r,utf8Encoder:t})}deserialize(t,r){let n=P2(t)?Vb(t):t;return this.universalMarshaller.deserialize(n,r)}serialize(t,r){let n=this.universalMarshaller.serialize(t,r);return typeof ReadableStream=="function"?zb(n):n}},P2=e=>typeof ReadableStream=="function"&&e instanceof ReadableStream;var Yb=e=>new cc(e);async function Wb(e,t,r=1024*1024){let n=e.size,o=0;for(;o<n;){let i=e.slice(o,Math.min(n,o+r));t(new Uint8Array(await i.arrayBuffer())),o+=i.size}}var jb=async function(t,r){let n=new t;return await Wb(r,o=>{n.update(o)}),n.digest()};var Xb=e=>()=>Promise.reject(e);var Zb=[1732584193,4023233417,2562383102,271733878];var gc=class{constructor(){this.reset()}update(t){if(H2(t))return;if(this.finished)throw new Error("Attempted to update an already finished hash.");let r=q2(t),n=0,{byteLength:o}=r;for(this.bytesHashed+=o;o>0;)this.buffer.setUint8(this.bufferLength++,r[n++]),o--,this.bufferLength===64&&(this.hashBuffer(),this.bufferLength=0)}async digest(){if(!this.finished){let{buffer:r,bufferLength:n,bytesHashed:o}=this,i=o*8;if(r.setUint8(this.bufferLength++,128),n%64>=56){for(let s=this.bufferLength;s<64;s++)r.setUint8(s,0);this.hashBuffer(),this.bufferLength=0}for(let s=this.bufferLength;s<56;s++)r.setUint8(s,0);r.setUint32(56,i>>>0,!0),r.setUint32(60,Math.floor(i/4294967296),!0),this.hashBuffer(),this.finished=!0}let t=new DataView(new ArrayBuffer(16));for(let r=0;r<4;r++)t.setUint32(r*4,this.state[r],!0);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}hashBuffer(){let{buffer:t,state:r}=this,n=r[0],o=r[1],i=r[2],s=r[3];n=tt(n,o,i,s,t.getUint32(0,!0),7,3614090360),s=tt(s,n,o,i,t.getUint32(4,!0),12,3905402710),i=tt(i,s,n,o,t.getUint32(8,!0),17,606105819),o=tt(o,i,s,n,t.getUint32(12,!0),22,3250441966),n=tt(n,o,i,s,t.getUint32(16,!0),7,4118548399),s=tt(s,n,o,i,t.getUint32(20,!0),12,1200080426),i=tt(i,s,n,o,t.getUint32(24,!0),17,2821735955),o=tt(o,i,s,n,t.getUint32(28,!0),22,4249261313),n=tt(n,o,i,s,t.getUint32(32,!0),7,1770035416),s=tt(s,n,o,i,t.getUint32(36,!0),12,2336552879),i=tt(i,s,n,o,t.getUint32(40,!0),17,4294925233),o=tt(o,i,s,n,t.getUint32(44,!0),22,2304563134),n=tt(n,o,i,s,t.getUint32(48,!0),7,1804603682),s=tt(s,n,o,i,t.getUint32(52,!0),12,4254626195),i=tt(i,s,n,o,t.getUint32(56,!0),17,2792965006),o=tt(o,i,s,n,t.getUint32(60,!0),22,1236535329),n=rt(n,o,i,s,t.getUint32(4,!0),5,4129170786),s=rt(s,n,o,i,t.getUint32(24,!0),9,3225465664),i=rt(i,s,n,o,t.getUint32(44,!0),14,643717713),o=rt(o,i,s,n,t.getUint32(0,!0),20,3921069994),n=rt(n,o,i,s,t.getUint32(20,!0),5,3593408605),s=rt(s,n,o,i,t.getUint32(40,!0),9,38016083),i=rt(i,s,n,o,t.getUint32(60,!0),14,3634488961),o=rt(o,i,s,n,t.getUint32(16,!0),20,3889429448),n=rt(n,o,i,s,t.getUint32(36,!0),5,568446438),s=rt(s,n,o,i,t.getUint32(56,!0),9,3275163606),i=rt(i,s,n,o,t.getUint32(12,!0),14,4107603335),o=rt(o,i,s,n,t.getUint32(32,!0),20,1163531501),n=rt(n,o,i,s,t.getUint32(52,!0),5,2850285829),s=rt(s,n,o,i,t.getUint32(8,!0),9,4243563512),i=rt(i,s,n,o,t.getUint32(28,!0),14,1735328473),o=rt(o,i,s,n,t.getUint32(48,!0),20,2368359562),n=nt(n,o,i,s,t.getUint32(20,!0),4,4294588738),s=nt(s,n,o,i,t.getUint32(32,!0),11,2272392833),i=nt(i,s,n,o,t.getUint32(44,!0),16,1839030562),o=nt(o,i,s,n,t.getUint32(56,!0),23,4259657740),n=nt(n,o,i,s,t.getUint32(4,!0),4,2763975236),s=nt(s,n,o,i,t.getUint32(16,!0),11,1272893353),i=nt(i,s,n,o,t.getUint32(28,!0),16,4139469664),o=nt(o,i,s,n,t.getUint32(40,!0),23,3200236656),n=nt(n,o,i,s,t.getUint32(52,!0),4,681279174),s=nt(s,n,o,i,t.getUint32(0,!0),11,3936430074),i=nt(i,s,n,o,t.getUint32(12,!0),16,3572445317),o=nt(o,i,s,n,t.getUint32(24,!0),23,76029189),n=nt(n,o,i,s,t.getUint32(36,!0),4,3654602809),s=nt(s,n,o,i,t.getUint32(48,!0),11,3873151461),i=nt(i,s,n,o,t.getUint32(60,!0),16,530742520),o=nt(o,i,s,n,t.getUint32(8,!0),23,3299628645),n=ot(n,o,i,s,t.getUint32(0,!0),6,4096336452),s=ot(s,n,o,i,t.getUint32(28,!0),10,1126891415),i=ot(i,s,n,o,t.getUint32(56,!0),15,2878612391),o=ot(o,i,s,n,t.getUint32(20,!0),21,4237533241),n=ot(n,o,i,s,t.getUint32(48,!0),6,1700485571),s=ot(s,n,o,i,t.getUint32(12,!0),10,2399980690),i=ot(i,s,n,o,t.getUint32(40,!0),15,4293915773),o=ot(o,i,s,n,t.getUint32(4,!0),21,2240044497),n=ot(n,o,i,s,t.getUint32(32,!0),6,1873313359),s=ot(s,n,o,i,t.getUint32(60,!0),10,4264355552),i=ot(i,s,n,o,t.getUint32(24,!0),15,2734768916),o=ot(o,i,s,n,t.getUint32(52,!0),21,1309151649),n=ot(n,o,i,s,t.getUint32(16,!0),6,4149444226),s=ot(s,n,o,i,t.getUint32(44,!0),10,3174756917),i=ot(i,s,n,o,t.getUint32(8,!0),15,718787259),o=ot(o,i,s,n,t.getUint32(36,!0),21,3951481745),r[0]=n+r[0]&4294967295,r[1]=o+r[1]&4294967295,r[2]=i+r[2]&4294967295,r[3]=s+r[3]&4294967295}reset(){this.state=Uint32Array.from(Zb),this.buffer=new DataView(new ArrayBuffer(64)),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}};function lc(e,t,r,n,o,i){return t=(t+e&4294967295)+(n+i&4294967295)&4294967295,(t<<o|t>>>32-o)+r&4294967295}function tt(e,t,r,n,o,i,s){return lc(t&r|~t&n,e,t,o,i,s)}function rt(e,t,r,n,o,i,s){return lc(t&n|r&~n,e,t,o,i,s)}function nt(e,t,r,n,o,i,s){return lc(t^r^n,e,t,o,i,s)}function ot(e,t,r,n,o,i,s){return lc(r^(t|~n),e,t,o,i,s)}function H2(e){return typeof e=="string"?e.length===0:e.byteLength===0}function q2(e){return typeof e=="string"?Qt(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}var $b=typeof TextEncoder=="function"?new TextEncoder:null,e0=e=>{if(typeof e=="string"){if($b)return $b.encode(e).byteLength;let t=e.length;for(let r=t-1;r>=0;r--){let n=e.charCodeAt(r);n>127&&n<=2047?t++:n>2047&&n<=65535&&(t+=2),n>=56320&&n<=57343&&r--}return t}else{if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size}throw new Error(`Body Length computation failed for ${e}`)};var t0=e=>({apiVersion:"2006-03-01",base64Decoder:e?.base64Decoder??va,base64Encoder:e?.base64Encoder??sn,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??vA,extensions:e?.extensions??[],getAwsChunkedEncodingStream:e?.getAwsChunkedEncodingStream??ty,httpAuthSchemeProvider:e?.httpAuthSchemeProvider??jx,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new kn},{schemeId:"aws.auth#sigv4a",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4a"),signer:new vi}],logger:e?.logger??new An,sdkStreamMixin:e?.sdkStreamMixin??ay,serviceId:e?.serviceId??"S3",signerConstructor:e?.signerConstructor??EA,signingEscapePath:e?.signingEscapePath??!1,urlParser:e?.urlParser??Po,useArnRegion:e?.useArnRegion??!1,utf8Decoder:e?.utf8Decoder??Qt,utf8Encoder:e?.utf8Encoder??Fo});var n0=J(Gf());var r0=["in-region","cross-region","mobile","standard","legacy"];var o0=({defaultsMode:e}={})=>uy(async()=>{let t=typeof e=="function"?await e():e;switch(t?.toLowerCase()){case"auto":return Promise.resolve(L2()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(t?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${r0.join(", ")}, got ${t}`)}}),L2=()=>{let t=(typeof window<"u"&&window?.navigator?.userAgent?n0.default.parse(window.navigator.userAgent):void 0)?.platform?.type;return t==="tablet"||t==="mobile"};var i0=e=>{let t=o0(e),r=()=>t().then(rQ),n=t0(e);return{...n,...e,runtime:"browser",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??e0,credentialDefaultProvider:e?.credentialDefaultProvider??(o=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:e?.defaultUserAgentProvider??Ob({serviceId:n.serviceId,clientVersion:xb.version}),eventStreamSerdeProvider:e?.eventStreamSerdeProvider??Yb,maxAttempts:e?.maxAttempts??Pn,md5:e?.md5??gc,region:e?.region??Xb("Region is missing"),requestHandler:Ra.create(e?.requestHandler??r),retryMode:e?.retryMode??(async()=>(await r()).retryMode||qd),sha1:e?.sha1??kb,sha256:e?.sha256??Mb,streamCollector:e?.streamCollector??Na,streamHasher:e?.streamHasher??jb,useDualstackEndpoint:e?.useDualstackEndpoint??(()=>Promise.resolve(tS)),useFipsEndpoint:e?.useFipsEndpoint??(()=>Promise.resolve(rS))}};var s0=e=>{let t=async()=>{if(e.region===void 0)throw new Error("Region is missing from runtimeConfig");let r=e.region;return typeof r=="string"?r:r()};return{setRegion(r){t=r},region(){return t}}},a0=e=>({region:e.region()});var A0=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(o){let i=t.findIndex(s=>s.schemeId===o.schemeId);i===-1?t.push(o):t.splice(i,1,o)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(o){r=o},httpAuthSchemeProvider(){return r},setCredentials(o){n=o},credentials(){return n}}},c0=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()});var dc=e=>e,g0=(e,t)=>{let r={...dc(s0(e)),...dc(aQ(e)),...dc(ME(e)),...dc(A0(e))};return t.forEach(n=>n.configure(r)),{...e,...a0(r),...AQ(r),...UE(r),...c0(r)}};var fc=class extends Ya{constructor(...[t]){let r=i0(t||{}),n=Zx(r),o=Dw(n),i=ow(o),s=QS(i),a=nS(s),A=a,c=dS(A),g=oS(c),d=Xx(g),l=Qw(d,{session:[()=>this,tc]}),f=g0(l,t?.extensions||[]);super(f),this.config=f,this.middlewareStack.use(eS(this.config)),this.middlewareStack.use(SS(this.config)),this.middlewareStack.use(sS(this.config)),this.middlewareStack.use(iw(this.config)),this.middlewareStack.use(sw(this.config)),this.middlewareStack.use(Aw(this.config)),this.middlewareStack.use(zE(this.config,{httpAuthSchemeParametersProvider:zx,identityProviderConfigProvider:async u=>new Pa({"aws.auth#sigv4":u.credentials,"aws.auth#sigv4a":u.credentials})})),this.middlewareStack.use(XE(this.config)),this.middlewareStack.use(bw(this.config)),this.middlewareStack.use(HE(this.config)),this.middlewareStack.use(dw(this.config)),this.middlewareStack.use(Fd(this.config)),this.middlewareStack.use(_d(this.config))}destroy(){super.destroy()}};function J2(e){return t=>async r=>{let n={...r.input},o=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}];for(let i of o){let s=n[i.target];if(s){let a;typeof s=="string"?z2(s,e)?a=e.base64Decoder(s):(a=e.utf8Decoder(s),n[i.target]=e.base64Encoder(a)):(a=ArrayBuffer.isView(s)?new Uint8Array(s.buffer,s.byteOffset,s.byteLength):new Uint8Array(s),n[i.target]=e.base64Encoder(a));let A=new e.md5;A.update(a),n[i.hash]=e.base64Encoder(await A.digest())}}return t({...r,input:n})}}var V2={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},l0=e=>({applyToStack:t=>{t.add(J2(e),V2)}});function z2(e,t){if(!/^(?:[A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e))return!1;try{return t.base64Decoder(e).length===32}catch{return!1}}var uc=class extends Nn.classBuilder().ep({...RA,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(t,r,n,o){return[_a(n,this.serialize,this.deserialize),IA(n,t.getEndpointParameterInstructions()),nw(n,{requestAlgorithmMember:"ChecksumAlgorithm",requestAlgorithmMemberHttpHeader:"x-amz-sdk-checksum-algorithm",requestChecksumRequired:!1}),cw(n),rA(n),l0(n)]}).s("AmazonS3","PutObject",{}).n("S3Client","PutObjectCommand").f(nb,rb).ser(gb).de(db).build(){};async function Ic(e,t){if(!e)return;let r=new fc({region:t.region,credentials:{accessKeyId:t.accessKeyId,secretAccessKey:t.secretAccessKey,sessionToken:t.sessionToken}}),n=new uc({Bucket:t.bucket,Key:t.s3Key,Body:e,ContentType:e.type}),o=await r.send(n);return{success:o.$metadata.httpStatusCode===200,etag:o.ETag,versionId:o.VersionId,...t}}var Ir="/library",d0="/uploader";async function f0(){let t=await E0(async n=>{let o=await ue(`${Ir}/v1/user/urls?${bt}&pageSize=100&pageCount=${n}`);return await N({wisebaseAllSavedUrlsSyncTime:o.syncTime}),{total:o.total,data:o?.datas||[]}}),r=t.reduce((n,o)=>{let i=o.url;return n[i]={fileId:o.fileId,wisebaseId:o.wisebaseId},n},{});return await N({wisebaseAllSavedUrlMap:r}),t}async function pc(){let{wisebaseAllSavedUrlsSyncTime:e}=await W({wisebaseAllSavedUrlsSyncTime:""});if(!e)return;let t=await j(`${Ir}/v1/highlights/sync-batch?${bt}`,{lastSyncTime:e});await N({wisebaseAllSavedUrlsSyncTime:t.syncTime});let{wisebaseAllSavedUrlMap:r}=await W({wisebaseAllSavedUrlMap:{}});t.urlList?.length>0&&t.urlList.forEach(n=>{n.isDeleted?delete r[n.url]:r[n.url]={fileId:n.fileId,wisebaseId:n.wisebaseId||"inbox"}}),await N({wisebaseAllSavedUrlMap:{...r}})}async function Y2(e,t){let r=await j(`${d0}/v1/file/upload-permission?${bt}`,{type:e.type.includes("html")?"webpage":"file",name:e.name,mime:e.type,hash:await Tl(e.size>0||!t?e:t),size:e.size,subFiles:t?[{id:t.type.includes("html")?"readable":"subtitle",name:t.name,mime:t.type,size:t.size}]:void 0}),n=!r.fileExists;return[r,...r.subCredentials||[]].map(i=>{let s=i.credentials;return{needUpload:n,fileId:i.fileId,id:i.id,sessionToken:s?.session_token,accessKeyId:s?.access_key_id,secretAccessKey:s?.secret_access_key,bucket:s?.bucket,s3Key:s?.s3_key,region:s?.region}})}async function W2(e){return await j(`${d0}/v1/file/complete?${bt}`,{id:e.id,meta:e.meta,tasks:e.tasks})}async function u0(e){if(!e.mainFile)throw new Error("main File is empty");let t=e.type==="video",r=e.mainFile,n=t?e.subtitleFile:e.readableFile,[o,i]=await Y2(r,n),s=await TE(`${Ir}/v1/files?${bt}`,{url:e.url,wisebaseId:e.wisebaseId,siderFileId:o.fileId,logicFileType:r.type.includes("html")?"webpage":"file",fileName:e.title||r.name,fileType:r.type||"text/html",fileSize:r.size});return Promise.all([o.needUpload?Ic(r,o):Promise.resolve(),i?.needUpload?Ic(n,i):Promise.resolve()]).then(()=>{r&&o.needUpload&&o.fileId&&W2({id:o.fileId,meta:{url:e.url,fileName:e.title||r.name,fileType:r.type||"text/html",fileSize:r.size},tasks:[{type:"RAG"}]})}),s?.libraryFileId}function I0(e,t){return Da(`${Ir}/v1/files/${e}?${bt}&wisebaseId=${t}`)}async function p0(e,t,r,n){let o=await j(`${Ir}/v1/files/actions/move?${bt}`,{id:e,sourceId:t,targetId:r},{signal:n?.signal}),{wisebaseAllSavedUrlMap:i}=await W({wisebaseAllSavedUrlMap:{}});for(let s of Object.values(i))if(s.fileId===e){s.wisebaseId=r;break}return await N({wisebaseAllSavedUrlMap:{...i}}),o}async function m0(e){return(await j(`${Ir}/v1/highlight?${bt}`,e))?.id}function h0(e,t,r){return j(`${Ir}/v1/highlights/delete-batch?${bt}`,{ids:e,fileId:t,wisebaseId:r})}async function C0(e){try{return(await j(`${Ir}/v1/highlights/list-by-url?${bt}`,{url:e}))?.data||[]}catch(t){if(t.reason==="GET_LIST_FAILED"){let{wisebaseAllSavedUrlMap:r}=await W({wisebaseAllSavedUrlMap:{}});delete r[e],await N({wisebaseAllSavedUrlMap:{...r}})}throw t}}async function B0(e){return(await j(`${Ir}/v1/wisebase?${bt}`,{icon:{type:"format",color:"--color-text-primary-3"},name:e}))?.wisebaseId}async function jo(){let t=await E0(async i=>{let s=await ue(`${Ir}/v1/wisebases?${bt}&pageSize=100&pageCount=${i}`);return{total:s.total,data:s?.data||[]}}),r=t.map(i=>({name:i.name,wisebaseId:i.wisebaseId}));await N({wisebaseAllWisebases:r});let{wisebaseDefaultWisebaseId:n}=await W({wisebaseDefaultWisebaseId:"inbox"});n!=="inbox"&&!r.find(i=>i.wisebaseId===n)&&await N({wisebaseDefaultWisebaseId:"inbox"});let{wisebaseAllSavedUrlMap:o}=await W({wisebaseAllSavedUrlMap:{}});for(let[i,s]of Object.entries(o))s.wisebaseId&&s.wisebaseId!=="inbox"&&!r.find(a=>a.wisebaseId===s.wisebaseId)&&delete o[i];return await N({wisebaseAllSavedUrlMap:{...o}}),t}async function E0(e){let t=[],r=1,n=0,o=await e(r);for(n=+o.total,t.push(...o.data);t.length<n;){let i=await e(++r);if(i.data?.length>0)t.push(...i.data);else break}return t}var Hf=J(ie());async function y0(){let{wisebaseAllSavedUrlMap:e}=await W({wisebaseAllSavedUrlMap:{}});return e}async function j2(){let e=(await Kt()).id;if(typeof window<"u")return Hf.default.runtime.sendMessage({type:"GET_READABILITY_TEXT_FROM_TAB",tabId:e});if(e)return Hf.default.tabs.sendMessage(e,{type:"get-readability-text"})}async function Q0(){let e=await j2();if(!e)return null;if(e.type==="webpage")return{type:e.type,title:e.title,description:e.description,mainFile:new File([new Blob([e.html||""])],e.title,{type:"text/html"}),readableFile:new File([new Blob([e.readableHtml||""])],e.title,{type:"text/html"}),subtitleFile:null};if(e.type==="video")return{type:e.type,title:e.title,description:e.description,mainFile:new File([new Blob([e.html||""])],e.title,{type:"text/html"}),readableFile:null,subtitleFile:e.subTitle?new File([new Blob([JSON.stringify(e.subTitle)])],e.title,{type:"application/json"}):null};if(e.type==="pdf")return{type:e.type,title:e.title,description:"",mainFile:await X2(e.pdfUrl),readableFile:null,subtitleFile:null}}async function X2(e){let r=await(await fetch(e)).blob();return new File([r],e,{type:"application/pdf"})}var w0=async e=>{let t=(await W({wisebaseDefaultWisebaseId:"inbox"})).wisebaseDefaultWisebaseId,r=await Q0(),n=r?.title||"",o=r?.description||"",i=r?.readableFile||null,s=r?.mainFile||null,a=r?.subtitleFile||null,A={type:r?.type||"",wisebaseId:t,url:e,title:n,description:o,mainFile:s,readableFile:i,subtitleFile:a},c="",g=1e8;if(s&&s.size>g||a&&a.size>g)throw new Error("FILE_TOO_LARGE");try{c=await u0(A)}catch(l){if(l.reason==="URL_WAS_REPEATED"||l.reason==="FILE_ALREADY_EXIST")c=l.metadata.file_id,t=l.metadata.wisebase_id||l.metadata.project_id;else throw(l.reason==="WISEBASE_NOT_EXIST"||l.reason==="PROJECT_NOT_EXIST")&&jo(),l}let d=await y0();return N({wisebaseAllSavedUrlMap:{...d,[e]:{fileId:c,wisebaseId:t}}}),{fileId:c,wisebaseId:t}};var eK={apiSyncWisebaseAllSavedUrls:pc,apiSaveWisebaseItem:w0,apiUnsaveWisebaseItem:I0,apiCreateHighlight:m0,apiGetHighlights:C0,apiRemoveHighlights:h0,apiCreateWisebase:B0,apiGetWisebases:jo,apiMoveWisebaseItem:p0},S0={};function x0(e){if(e.abort){S0[e.type]?.abort();return}let t=e.data||[],r=eK[e.type],n=new AbortController;if(S0[e.type]=n,r)return tK(r)(...t,n)}function tK(e){return async(...t)=>{let r,n;try{r=await e(...t)}catch(o){n=bn(o)}return{error:n,data:r}}}var ss=J(ie());var os=J(ie());function is(e){return os.default.tabs.sendMessage(e,{type:"check"}).catch(t=>{if(os.default.scripting?.executeScript)return Promise.all([os.default.scripting.executeScript({target:{tabId:e},files:["content-all.js"]}),os.default.scripting.executeScript({target:{tabId:e,allFrames:!0},files:["all-frames.js"]})]).then(r=>r).catch(r=>{if(!(r instanceof Error&&r.message.startsWith("Cannot access a chrome")))throw new Error("Failed to inject content script")})})}var mc=class{constructor(){this.queue=[];this.isRunning=!1}async run(t){if(this.queue.push(t),!this.isRunning){for(this.isRunning=!0;this.queue.length;){let r=this.queue.shift();r&&await r()}this.isRunning=!1}}};async function*b0(e=200,t=15){let r=0;for(;r++<t;)yield ss.default.runtime.sendMessage({type:"is-sidepanel-open"}).catch(()=>!1),await xn(e)}async function D0(e,t=!1){let{siderModelsLastUpdateTime:r}=await z({siderModelsLastUpdateTime:0});if(!r||Date.now()-r>60*60*1e3||t)return Z.loadSiderModels(e).then(n=>{n&&n.length&&nK(n)&&(N({siderModels:n.map(o=>({name:o.name,displayName:o.display_name,cost:o.cost,level:o.level,category:o.category,creator:o.creator,icon:o.logo,desc:o.desc,enable:o.enable,replaceBy:o.replace_by})),siderModelsLastUpdateTime:Date.now()}),z({"provider:siderApi":{model:"sider"},siderGrammarKey:{model:"sider"},"quickAction:provider:siderApi":"sider"}).then(o=>{let i=o["provider:siderApi"]?.model,s=o.siderGrammarKey?.model,a=o["quickAction:provider:siderApi"];if(i){let A=n.find(c=>c.name===i);A&&A.replace_by&&ss.default.storage.local.set({"provider:siderApi":{model:A.replace_by}})}if(s){let A=n.find(c=>c.name===s);A&&A.replace_by&&ss.default.storage.local.set({siderGrammarKey:{model:A.replace_by}})}if(a){let A=n.find(c=>c.name===a);A&&A.replace_by&&ss.default.storage.local.set({"quickAction:provider:siderApi":{model:A.replace_by}})}}))})}async function k0(e,t=!1){let{websiteToolsLastUpdateTime:r}=await z({websiteToolsLastUpdateTime:0});if(!r||Date.now()-r>60*60*1e3||t)return Z.loadWebsiteTools(e).then(n=>{if(n&&n.categories&&n.categories.length){let o=n.categories;N({websiteTools:o,websiteToolsLastUpdateTime:Date.now()})}})}function nK(e){return Array.isArray(e)?e.every(t=>typeof t!="object"||t===null?!1:typeof t.name=="string"&&typeof t.display_name=="string"&&typeof t.creator=="string"&&typeof t.logo=="string"&&typeof t.desc=="string"&&typeof t.category=="number"&&typeof t.enable=="boolean"&&typeof t.replace_by=="string"&&typeof t.cost=="object"&&t.cost!==null&&typeof t.cost.type=="string"&&typeof t.cost.count=="number"):!1}var F0=J(ie());async function as(){let{generatedRandomId:e}=await z({generatedRandomId:""});if(!e){let t=await oK();return t||(t=me(),iK(t)),F0.default.storage.local.set({generatedRandomId:t}),t}return e}var _0=le.origin.replace(/\/\/\w+?\./,"//Y2hhdGdwdC1zaWRlYmFy."),v0="zgv2awnlswq";async function oK(){try{return await ul({url:_0,name:v0})}catch{return""}}async function iK(e){let t=Math.round(Date.now()/1e3)+31104e3;try{return await Il({url:_0,name:v0,value:e,expirationDate:t,secure:!0})}catch{}}var uK=J(ie());var U0=J(ie());var qf=J(ie());var pr={installSuccess(){return Z.googleAnalytics(`${ze?"edge_":""}sider_install_success`,{id:"install"})},report(e,t){let n=(ze?"edge_":"chrome_")+e;Z.googleAnalytics(n,{...t}).catch(()=>{})},async tts(e={}){let t=e.id||(await z({lastTab:""})).lastTab,r=e.voice||(await z({lastVoiceRole:""})).lastVoiceRole;pr.report(`tts_${t}_${r}`)}};async function sK(){let e=await W("sider_event_device_id");if(!e){let t=me();return await N({sider_event_device_id:t}),t}return e}async function aK(){let e=await W("sider_event_unique_id");if(!e){let t=me();return await N({sider_event_unique_id:t}),t}return e}function AK(){let e={Win:"Windows",Mac:"MacOS",X11:"UNIX",Linux:"Linux",Android:"Android",iPhone:"iOS"};for(let[t,r]of Object.entries(e))if(navigator.userAgent.includes(t))return r;return"Unknown"}async function cK(){return(await W("userInfo"))?.id}async function gK(){return(await W("vipInfo"))?.isVIP}function R0(e){let t=typeof e;return t==="string"||t==="number"||t==="boolean"}var N0="sider_extension",lK="https://event.sider.ai/collect",Lf=async(e,t)=>{if(!qf.default.tabs)return qf.default.runtime.sendMessage({type:"SIDER_STAT_API",args:[e,t]});let r=e.replace(/-/gi,"_");r.length>50,t&&Object.entries(t).forEach(([i,s])=>{Array.isArray(s)?t[i]=s.filter(R0).join("&"):R0(s)||delete t[i]});let n=Date.now(),o={app_id:N0,event_type:r,event_id:me(),device_id:await sK(),unique_id:await aK(),timestamp:n,host_name:"sider.ai",locale:await W("language"),system_language:await W("language"),country_code:navigator.language.split("-")[1],zone_offset:-new Date().getTimezoneOffset()*6e4,make:"Node",screen_height:typeof window<"u"?window.screen.height:0,screen_width:typeof window<"u"?window.screen.width:0,viewport_height:typeof window<"u"?window.innerHeight:0,viewport_width:typeof window<"u"?window.innerWidth:0,sdk_name:"aws-solution-clickstream-sdk",sdk_version:"0.12.2",platform:"Extension",app_version:je,app_package_name:`Sider_${ze?"edge":"chrome"}`,attributes:{...t,os:AK(),user_id:await cK(),user_premium:await gK()}};return fetch(`${lK}?appId=${N0}&platform=Ext&event_bundle_sequence_id=1&upload_timestamp=${n}`,{method:"POST",headers:new Headers({"Content-Type":"application/json; charset=utf-8"}),body:JSON.stringify([o])}).catch(i=>{})},T0={report:async(e,t)=>{try{await Lf(e,t)}catch{}}};async function As(e,t,r={},n={}){let o=r.signal;if(o?.aborted)throw new DOMException("Aborted","AbortError");let i=await wo(),s=URL.parse(e)??new URL(`${i}${e}`),a=fK(r.body??t),A=new Headers(r.headers),c=(r.method??"GET").toUpperCase(),g=c==="GET"||c==="HEAD";A.has("Content-Type")||A.set("Content-Type","application/json");let{noAuth:d=!1,timeout:l,noAppInfo:f=!1}=n;if(!d&&!A.has("Authorization")){let Q;try{Q=(await nn()).token}catch(R){throw R instanceof Error?R:dK(R)&&R.msg?new Error(R.msg,{cause:R}):new Error("Failed to get token")}Q&&A.set("Authorization",Q)}if(a instanceof FormData&&A.delete("Content-Type"),!f){let Q=function(R){if(g){let B=s.searchParams;for(let D in R)B.has(D)||B.append(D,R[D])}else if(a instanceof FormData)for(let B in R)a.has(B)||a.append(B,R[B]);else if(go(a))for(let B in R)Object.hasOwn(a,B)||(a[B]=R[B])};var C=Q;Q({app_name:re,tz_name:Se,app_version:je})}let u=Object.assign({},r,{signal:Gm([o,l?Hm(l):null].filter(yl)),headers:A,method:c,body:g?void 0:A.get("Content-Type")==="application/json"?JSON.stringify(a):a}),m=await fetch(s,u).catch(Q=>{throw So(Q,s),Q});if(n.onStream&&m.body&&m.ok){let Q=n.onStream,R=yo(B=>{if(B.type!=="event")return;let D=B.data==="[DONE]";if(D){Q({done:D});return}let E=JSON.parse(B.data);if(E.code!==0)throw new Error(E.msg,{cause:E});Q({data:E.data})});for await(let B of Qo(m.body)){let D=new TextDecoder().decode(B);R.feed(D)}return{}}let p=await m.json().catch(()=>{});if(!m.ok)throw new Error(`${m.status}: ${p?.msg||m.statusText}`,{cause:p});if(!p)throw new Error("Response body is not json");if(p.code!==0)throw(p.code===1003||p.code===1006)&&N({ERR_MUST_LOGIN:!0}),new Error(p.msg,{cause:p});return Ge("ERR_MUST_LOGIN"),p.data}function dK(e){return go(e)&&Object.hasOwn(e,"code")&&Object.hasOwn(e,"data")&&Object.hasOwn(e,"msg")&&typeof e.code=="number"}function fK(e){if(e instanceof FormData){let t=new FormData;for(let[r,n]of e.entries())t.append(r,n);return t}else return jg(e)}async function Mr(e,t,r){let n,o;(e==="gpt-3.5"||e==="gpt-4")&&t&&(n={[e]:Zg({total:t.total,remain:t.remain,extraTotal:t.extra_total,extraRemain:t.extra_quota,period:t.remain_period,used:t.used},yl)}),r&&(o={videoSummary:{total:r.total.video_summary,used:r.used.video_summary,remain:r.total.video_summary-r.used.video_summary},chatFile:{total:r.total.chat_file,used:r.used.chat_file,remain:r.total.chat_file-r.used.chat_file},painter:{total:r.total.painter,used:r.used.painter,remain:r.total.painter-r.used.painter},tts:{total:r.total.tts,used:r.used.tts,remain:r.total.tts-r.used.tts},artifacts:{total:r.total.artifacts,used:r.used.artifacts,remain:r.total.artifacts-r.used.artifacts},thinking_mode:{total:r.total.thinking_mode,used:r.used.thinking_mode,remain:r.total.thinking_mode-r.used.thinking_mode},data_analysis:{total:r.total.data_analysis,used:r.used.data_analysis,remain:r.total.data_analysis-r.used.data_analysis},text_to_image:{total:r.total.text_to_image,used:r.used.text_to_image,remain:r.total.text_to_image-r.used.text_to_image},search:{total:r.total.search,used:r.used.search,remain:r.total.search-r.used.search},...r.total.short_video?{shortVideo:{total:r.total.short_video,used:r.used.short_video,remain:r.total.short_video-r.used.short_video}}:{}}),await Ur({...n&&n,...o&&{trial:o}})}async function M0(e,t=5e3){return As("/v1/image/manage/sync",{cids:e},{method:"POST"},{timeout:t})}function hc(e){return tn(le.origin,e)}async function O0(){cr({url:hc("/login")})}async function P0(){cr({url:hc("/invite")})}async function Jf({openerTabId:e,subRoute:t="painter",hasDataToSend:r=!1}={}){if(!await W("painterMigrated",!1)){e:{let{"sider-image-creator:conversations":o}=await z({"sider-image-creator:conversations":[]});if(!o.length)break e;let i=o.map(A=>`sider-image-creator:messages:${A.id}`),s=await U0.default.storage.local.get(i),a=Object.values(s).map(A=>A.cid).filter(A=>!!A);if(!a.length)break e;await M0(a,5e3).catch(yr)}en("painterMigrated",!0)}return cr({url:hc(`/tools/image/${t}${r?"?from=ext":""}`),openerTabId:e})}var Vf={token:"",refresh_token:"","userinfo-type":"","userinfo-avatar":"","userinfo-name":""};async function it(){let e=await Cc("userinfo-type"),t=await Cc("token");return e===null?null:!!(t&&e&&e!=="device")}async function ki(){await N({__manual_logout__:!0}),await Ge(Object.keys(Vf)),await Ge("userInfo"),await N({logged:!1})}async function zf(){let{vipInfo:e}=await z({vipInfo:{isVIP:!1,isTrial:!1,userTypeDetail:"login",resetTimeSec:0,"gpt-3.5":{total:0,remain:0,used:0,extraTotal:0,extraRemain:0,period:"total"},"gpt-4":{total:0,remain:0,used:0,extraTotal:0,extraRemain:0,period:"total"},trial:{chatFile:{total:0,remain:0,used:0},painter:{total:0,remain:0,used:0},videoSummary:{total:0,remain:0,used:0},tts:{total:0,remain:0,used:0},shortVideo:{total:0,remain:0,used:0},artifacts:{total:0,remain:0,used:0},search:{total:0,remain:0,used:0},text_to_image:{total:0,remain:0,used:0},data_analysis:{total:0,remain:0,used:0},thinking_mode:{total:0,remain:0,used:0}},"image-creator":{total:0,remain:0,used:0,extraTotal:0,extraRemain:0,period:"total"},summary:{total:0,remain:0,cost:3,period:"total"},ocr:{cost:1},reader:{total:0,remain:0,used:0,limitSize:104857600,period:"total"}}});return e}async function Ur(e){let t=await zf();return typeof e=="function"&&(e=e(t)),mi(t,e,(r,n)=>{if(Array.isArray(r))return n}),N({vipInfo:t})}async function nn(){let e=await Kn();return e?{...e,anonymous:!1}:{token:"",refreshToken:"",anonymous:!1}}async function Kn(){if(await it()){let e=await Cc("token"),t=await Cc("refresh_token");return e?{token:e,refreshToken:t}:null}return null}async function Cc(e){let{__manual_logout__:t,__force_logout_reason__:r}=await z({__manual_logout__:!1,__force_logout_reason__:""});if(t||r)return"";try{let n=await pa(e);if(!n)throw new Error("");return N({[e]:n}),n}catch{return(await z({[e]:""}))[e]}}var re=fa,ce=je,Se=Intl.DateTimeFormat().resolvedOptions().timeZone,bt=`app_name=${re}&app_version=${ce}&tz_name=${Se}`,Yf="ChitChat_Ext",Wf="ChitChat_Ext_UserStatus",Z={async refreshToken(e){let t=await j("/v1/user/token/refresh",{refresh_token:e},{headers:{Authorization:""}});return{token:t.token.token,refreshToken:t.token.refresh_token}},getSiderAnonymousToken:gr(async()=>{let e=await as();return j("/v1/user/login/device_id",{device_id:e,uuid:e,app_name:re,app_version:ce},{headers:{Authorization:""}})}),getUserInfo:async()=>{let e=await ue(`/v1/user/info?app_name=${re}&app_version=${ce}`);return await N({userInfo:e}),e},getVipInfo:G0,getVipInfoCached:gr(G0,5e3),getVipPeriodInfo:gr(async()=>{let e=await ue(`/v1/completion/limit/static?app_name=${re}&app_version=${ce}&tz_name=${Se}`);return await N({vipPeriodInfo:e}),e},3e3),async getPricingPlan(){let e=await ue("/v1/app/ipinfo",null,{headers:{Authorization:""}}),t=e.region==="CN"||Se==="Asia/Shanghai"&&await W("language","en")==="zh_CN",r=await ue(`/v1/payment/pricing?from=web&location=${t?"CN":e.region}`,null,{headers:{Authorization:""}});N({isCNUser:t,pricingPlan:r.plan.map(n=>({name:n.name,displayName:n.display_name,currency:n.currency,interval:n.interval,originPrice:n.origin_price/100,price:n.price/100,discount:n.discount/100||0,current:n.id==r.current_plan?.id}))})},getClientConfig:async e=>{let t=await ue(`/v1/app/config?app_name=${re}&app_version=${ce}&tz_name=${Se}`);return t&&await N({configByServer:t}),e?t?.[e]:t},getUserSettings:gr(async()=>await it()?(await ue(`/v1/user/settings?app_name=${re}&keys=${Yf}`)).keys?.[Yf]:{},2e3),setUserSettings(e){if(!(!e||Object.keys(e).length===0))return rn(()=>j("/v1/user/settings",{app_name:re,key:Yf,key_setting:e}))},getUserStatus:gr(async()=>{let t=(await ue(`/v1/user/settings?app_name=${re}&keys=${Wf}`)).keys?.[Wf];return t&&Object.keys(t).length&&await N({userStatus:t}),t},2e3),async setUserStatus(e){if(!e||Object.keys(e).length===0)return;await rn(()=>j("/v1/user/settings",{app_name:re,key:Wf,key_setting:e}));let{userStatus:t}=await W({userStatus:{}});N({userStatus:{...t||{},...e}})},getUserPromptList(e){return ue(`/v1/prompt/list?type=${e}&page_size=999`)},getAllPromptList:async()=>{let e=await W({language:"",chatVisiblePromptKeys:null,readVisiblePromptKeys:null,writeVisiblePromptKeys:null}),t=e.language;if(!t)throw new Error("no language");let r=await Z.getUserSettings(),[n,o]=await Promise.all([ue(`/v1/prompt/list_all?app_name=${re}&page_size=999&language=${t}`,null,{headers:{Authorization:(await Kn())?.token||""}}),ue(`/v1/prompt/list?type=special&app_name=${re}&page_size=999&language=${t}`,null,{headers:{Authorization:(await Kn())?.token||""}})]),i=n.List;i.sort((C,Q)=>(C.sort!==0||C.key==="improve_writing")&&(Q.sort!==0||Q.key==="improve_writing")?Q.sort-C.sort:Q.sort===0?1:C.sort===0?-1:0);let s=i.reduce((C,Q)=>(C[Q.key||Q.id]=Q,C),{});function a(C){return{id:String(C.id),key:String(C.key||C.id),isCustom:!C.key||C.key.startsWith("custom"),name:C.display_name||C.name,shortName:C.short_name,content:C.content,icon:C.icon,placeholder:C.placeholder,usedIn:C.use||void 0,children:C.has_child?[]:void 0,parentKey:C.parent_key}}let A=[],c={};for(let C of i){let{key:Q,has_child:R,parent_key:B}=C;if(R){if(!(Q in c)){let E=a(C);c[Q]=E,A.push(E)}continue}if(B){let E=s[B];if(!E)continue;if(!(B in c)){let w=a(E);c[B]=w,A.push(w)}c[B]?.children?.push(a(C));continue}let D=a(C);A.push(D)}let g=new Map(A.map(C=>[C.key,C]));function d(C,Q){let R=g.get(C);if(R){let{usedIn:B}=R;return!B||B.includes(Q)}return!1}function l(C,Q=!1){let R=[];for(let B of A)d(B.key,C)&&(!Q||B.isCustom)&&R.push(B.key);return R}let f=n.Sort,u={chat:["chatVisiblePromptKeys","ChatAsk"],read:["readVisiblePromptKeys","ReadingAssistant"],write:["writeVisiblePromptKeys","WritingAssistant"]},m={};for(let[C,[Q,R]]of Object.entries(u)){let B=f[R].split(",").map(w=>w.trim()).filter(w=>g.has(w)),D=r?.[Q],E=e[Q]||D;if(E?m[Q]=El([...E.filter(w=>g.has(w)),...l(C)]):m[Q]=El([...l(C,!0),...B,...l(C)]),D?.length){let w=D.reduce((y,M,T)=>(y[M]=T,y),{});m[Q].sort((y,M)=>{let T=w[y],U=w[M],L=T===void 0,k=U===void 0;return L&&k?0:L?1:k?-1:T-U})}}let p=o.List.map(C=>a(C));await N({...m,allPromptList:A,specialPromptList:p,__DONT_SYNC__:`visiblePromptKeys${Date.now()}`})},createPrompt(e){return rn(()=>j("/v1/prompt/create",{is_template:!1,type:"sidebar",...e}))},editUserPrompt(e){return rn(()=>j("/v1/prompt/edit",e))},delUserPrompt(e){return rn(()=>j("/v1/prompt/update",{id:e,status:"Deleted"}))},async uploadHistoryMsg(e){let t=Array.from(new Set(e.flatMap(n=>n.files??[]))),r=await j("/v1/conversation/upload",{app_name:re,app_version:ce,messages:e,files:t.length?t:void 0});return{cid:r.cid,lastMsgId:r.messages[e.length-1].id}},uploadConversion(e){return j("/v1/conversation/upload",{share:!0,app_name:re,app_version:ce,messages:e})},saveConversion(e){return j("/v1/conversation/upload",{save_by_user:!0,app_name:re,app_version:ce,messages:e})},async shareConversion(e){return(await ue(`/v1/conversation/share/${e}`)).share_key},saveSiderConversion(e){return ue(`/v1/conversation/save-by-user/${e}`)},unSaveSiderConversion(e){return ue(`/v1/conversation/unsave-by-user/${e}`)},delConversion(e){return Da(`/v1/conversation/delete/${e}`)},checkGrammarError(e){return j("/v1/completion/grammar_check",{content:e,tz_name:Se,app_name:re,app_version:ce})},async improveWriting(e){function t(n){if(n?.total){let i={[e.model]:{total:n.total,remain:n.remain,extraTotal:n.extra_total,extraRemain:n.extra_quota,period:n.remain_period}};Ur(i)}}let r=Bt(t,1e3,{leading:!0});return j("/v1/completion/improve_writing",{content:e.content,model:e.model,tz_name:Se,app_name:re,app_version:ce},{onStreamData({data:n,done:o}){!o&&n&&r(n),e.onStreamData({text:n?.text||"",done:o})},getAbortMethod(){}})},async sendFeedback({title:e,detail:t,email:r}){let n=await Kn();return j("/v1/app/feedback",{title:e,email:r,data:{detail:t},app_name:re,app_version:ce},{headers:{Authorization:n?.token||""}})},async sendFiveStarFeedback(e,t){let r=await Kn(),n=await W("language","en"),o=`[FiveStarRate][${je}][${n}] Feedback by FiveStarRate`;return j("/v1/app/feedback",{title:o,data:{from:t,detail:e},app_name:re,app_version:ce},{headers:{Authorization:r?.token||""}})},async sendSearchAgentDislikeFeedback(e,t,r){let n=await Kn(),o=await W("language","en"),i=`[SearchAgentDislike][${je}][${o}] Feedback by SearchAgentDislike`;return j("/v1/app/feedback",{title:i,data:{from:t,feedbackData:r||{}},app_name:re,app_version:ce},{headers:{Authorization:n?.token||""}})},async getInviteRewardConfig(){let e=await ue("/v1/invite/config",null,{headers:{Authorization:""}});return N({inviteRewardConfig:{"gpt3.5":e.GPT3Dot5Count,gpt4:e.GPT4Count}}),e},createInviteLink(){return j("/v1/invite/create",{type:"link"})},async getInviteRewardCount(e){let t=await ue(`/v1/invite/reward?app_name=${re}&app_version=${ce}&last_req_time=${e}`);return{addedQuery:t.recent_reward_gpt3dot5_count+t.recent_reward_gpt4_count,addedUser:t.recent_invited_count}},inviteFinish:async()=>{let e=await as();return j("/v1/invite/finish",{device_id:e})},async summaryVideo(e){function t(f){if(f?.total)if(e.vip){let u={"gpt-3.5":{total:f.total,remain:f.remain,extraTotal:f.extra_total,extraRemain:f.extra_quota,period:f.remain_period}};Ur(u)}else{let u={summary:{remain:f.remain}};Ur(u)}}let r=Bt(t,1e3,{leading:!0}),n={app_name:re,app_version:ce,tz_name:Se,content:e.text,title:e.title,language:e.lang,source:e.source,source_type:e.sourceType,request_id:me(),cid:""},o=[];e.getAbortMethod(()=>{for(let f of o)f()});let{content:i,cid:s,...a}=n,A=null;try{A=await j("/v1/completion/summarize_init",a,{getAbortMethod(f){o.push(f)}})}catch{}A&&(n.cid=A.cid||"");let c=j("/v1/completion/summarize_all",n,{onStreamData({data:f,done:u}){!u&&f&&r(f),e.onStreamData({text:f?.text||"",done:u})},getAbortMethod(f){o.push(f)}}),g=j("/v1/completion/summarize",n,{getAbortMethod(f){o.push(f)}}),[d,l]=await Promise.all([c,g]);return t(l),{text:l.text,subtitle:l.subtitle}},async summaryVideoByEid(e){function t(i){i?.total&&Mr(i?.chat_model??"gpt-3.5",i,i.feature_info)}let r=Bt(t,1e3,{leading:!0}),n={app_name:re,app_version:ce,tz_name:Se,use_whisper:!!e.useWhisper,eid:e.eid,language:e.language,re_summarize:!!e.reSummarize},o=await j("/v1/completion/video_summarize",n,{onStreamData({data:i,done:s}){!s&&i?(r(i),i.type==="text"?e.onStreamTextData({text:i.text,done:s}):i.type==="text_done"?e.onStreamTextData({text:i.text,done:!0}):i.type==="key_moments"&&e.onKey_momentsData(i.key_moments)):e.onStreamTextData({text:"",done:s})},getAbortMethod:i=>{e.getAbortMethod&&e.getAbortMethod(()=>{i()})}})},async getSummaryCache(e){let{is_creator:t,eid:r,summary:n,key_moments:o,language:i,from_whisper:s}=await j("/v1/completion/video_info",{source:e.source,source_type:e.source_type,title:e.title,app_name:re,app_version:ce,tz_name:Se,language:e.language});return{is_creator:t,eid:r,summary:n,key_moments:o,from_whisper:s,language:i}},async getSummaryCacheRaw(e){let{is_creator:t,eid:r,summary:n,key_moments:o,language:i,task_id:s,subtitle:a,summary_language:A}=await j("/v1/completion/raw_video_info",{source:e.source,source_type:e.source_type,title:e.title,app_name:re,app_version:ce,tz_name:Se,language:e.language});return{is_creator:t,eid:r,summary:n,subtitle:a,task_id:s,key_moments:o,language:i,summary_language:A}},async uploadWhisperSubtitle(e,t){return(await j("/v1/whisper/upload-subtitle",{app_name:re,app_version:ce,tz_name:Se,url:e,summary_language:t})).task_id},async poolingWhisperProgress(e,t){let r=await j("/v1/whisper/progress",{app_name:re,app_version:ce,tz_name:Se,task_id:e,webpage_url:t});return await Mr("gpt-4",r.quota_map),{eid:r.eid,subtitle:r.subtitle_info.subtitle,language:r.subtitle_info.language,progress:r.progress}},statUserStop(e,t){return j("/v1/completion/mark-user-stop",{app_name:re,app_version:ce,cid:e,mid:t})},async OCR(e,t){let r=new FormData;return r.append("file",e),r.append("app_name",re),r.append("app_version",ce),r.append("tz_name",Se),(await j("/v1/ocr/math",r,{getAbortMethod:t}))?.result?.text||""},adStat(e){return j("/v1/lp/action",{...e,meta:{browser:ze?"Edge":"Chrome",ext_version:je}},{headers:{}})},async googleAnalytics(e,t){if(!cs.default.tabs)return cs.default.runtime.sendMessage({type:"GA_API",args:[e,t]});let r=e.replace(/-/gi,"_");return r.length>40,j(`${zB}?measurement_id=${YB}&api_secret=${WB}`,{client_id:await as(),events:[{name:r,params:{...t}}]},{headers:{Authorization:""}})},uploadImage(e){let t=new FormData;return t.append("file",e),j("/v1/imagechat/upload",t,{onProgress:r=>{}})},signImageCookie(){return ue("/v1/user/sign-file-cookies")},loadSiderModels(e){return ue(`/v1/app/load_models?app_name=${re}&app_version=${ce}&lang=${e}`)},loadWebsiteTools(e){return ue(`/v1/app/load_tools?app_name=${re}&app_version=${ce}&lang=${e}`)},uploadFile(e,t,r,n,o){let i=new FormData;return i.append("file",e),i.append("app_name",re),i.append("app_version",ce),i.append("tz_name",Se),r&&i.append("webpage_url",r),n&&i.append("file_for",n),j("/v1/embedding/upload-file",i,{onProgress:t,getAbortMethod:s=>{o&&o(()=>{s()})}}).then(s=>{try{(s?.text_ready||!s.is_embedding)&&Qi([s?.id],!0)}catch{}return s})},getFileStauts(e){return ue(`/v1/embedding/status?ids=${e}`)},async getPromotionCountdown(e){return await ue(`/v2/user/promotion/promotion_info?app_name=${re}&app_version=${ce}&tz_name=${Se}${e?"&event_name="+e:""}`)},async getVoiceRoleList(){let e=VB,{voiceRoleList:t}=await z({voiceRoleList:[]});t?.length===0&&N({voiceRoleList:[e]});let n=(await ue(`/v1/audio/voice/list?app_name=${re}&app_version=${ce}&tz_name=${Se}&page=1&page_size=999`)).list.map(o=>({name:o.name,avatar:o.avatar,gender:o.gender,platform:o.platform,requireVIP:o.need_premium}));N({voiceRoleList:[e,...n]}),Promise.allSettled(n.map(o=>new Promise((i,s)=>{o.avatar?.startsWith("http")?fetch(o.avatar).then(async a=>{o.avatar=await Dr(await a.blob()),i("")}).catch(s):i("")}))).then(()=>{N({voiceRoleList:[e,...n]})})},async getTTSDemoText(){let{language:e}=await z({language:""});if(e){let t=await ue(`/v1/audio/audition/text?language_code=${e}`);return N({systemVoiceDemoText:t.text}),t.text}return""},async ttsPrepay(e,t){let r=await j("/v1/audio/speech/prepaid",{app_name:re,app_version:ce,tz_name:Se,texts:e.texts,voice:e.voice,scene:e.scene,scene_id:e.sceneId},{getAbortMethod:t});return r?.quota&&r?.quota_type&&Mr(r.quota_type==="basic"?"gpt-3.5":"gpt-4",r.quota,r.feature_info),r},tts(e,t){return j("/v1/audio/speech",{app_name:re,app_version:ce,tz_name:Se,input:e.input,voice:e.voice,scene:e.scene,scene_id:e.sceneId,...e.demoLang?{audition_opt:{audition:!0,language_code:e.demoLang}}:null},{returnRawResponse:!0,getAbortMethod:t})},publishArtifact(e){return j("/v1/artifacts_publish",e)},unpublishArtifact(e){return j("/v1/artifacts_unpublish",e)}};async function G0(){let e=await ue(`/v1/completion/limit/user?app_name=${re}&app_version=${ce}&tz_name=${Se}`);if(!e.basic_credit.count)throw N({ERR_MUST_LOGIN:!0}),new Error("wrong_data");let t=e.user_type,r=["device","login","premium"],{vipPeriodInfo:n}=await z({vipPeriodInfo:null});n||(n=await Z.getVipPeriodInfo());let o=n.basic_credit_period_info,i=n.advanced_credit_period_info,s=n.ocr_period_info,a=n.feature_total,A=e.feature_used,c={isVIP:e.user_type==="premium",isTrial:e.is_trial,userTypeDetail:e.user_type_detail,resetTimeSec:e.basic_credit.reset_time,showNewPlan:!!e.show_new_plan,"gpt-3.5":{total:e.basic_credit.count,remain:e.basic_credit.remain,extraTotal:e.basic_credit.extra_total,extraRemain:e.basic_credit.extra_quota,used:e.basic_credit.used,period:e.basic_credit.period,maxToken:o[t]?.prompt_max_token,award:r.reduce((g,d)=>(g[d]={count:o[d].count},g),{})},"gpt-4":{total:e.advanced_credit.count,remain:e.advanced_credit.remain,extraTotal:e.advanced_credit.extra_total,extraRemain:e.advanced_credit.extra_quota,used:e.advanced_credit.used,period:e.advanced_credit.period,maxToken:i[t]?.prompt_max_token,award:r.reduce((g,d)=>(g[d]={count:i[d].count},g),{})},trial:{chatFile:{total:a.chat_file,used:A.chat_file,remain:a.chat_file-A.chat_file},painter:{total:a.painter,used:A.painter,remain:a.painter-A.painter},videoSummary:{total:a.video_summary,used:A.video_summary,remain:a.video_summary-A.video_summary},tts:{total:a.tts,used:A.tts,remain:a.tts-A.tts},data_analysis:{total:a.data_analysis,used:A.data_analysis,remain:a.data_analysis-A.data_analysis},artifacts:{total:a.artifacts,used:A.artifacts,remain:a.artifacts-A.artifacts},text_to_image:{total:a.text_to_image,used:A.text_to_image,remain:a.text_to_image-A.text_to_image},search:{total:a.search,used:A.search,remain:a.search-A.search},thinking_mode:{total:a.thinking_mode,used:A.thinking_mode,remain:a.thinking_mode-A.thinking_mode},...a.short_video?{shortVideo:{total:a.short_video,used:A.short_video,remain:a.short_video-A.short_video}}:{}},summary:{total:e.summarize.count,remain:e.summarize.remain,cost:e.summarize.deduct_count,period:e.summarize.period},ocr:{cost:s?.deduct_count||1},"image-creator":{total:e.image.count,remain:e.image.remain,used:e.image.used,extraTotal:e.image.extra_total,extraRemain:e.image.extra_quota,period:e.image.period},reader:{total:e.embedding.count,remain:e.embedding.remain,used:e.embedding.used,period:e.embedding.period,limitSize:e.embedding.size}};if(Ur(c),c.isVIP){let{autoTools:g,isDoneAutoToolsAction:d}=await cs.default.storage.local.get(["autoTools","isDoneAutoToolsAction"]);(g===void 0||g&&!g.includes("search"))&&!d&&N({autoTools:rE.filter(l=>!l.isExperimental).map(l=>l.name),isDoneAutoToolsAction:!0})}else{let{autoTools:g}=await cs.default.storage.local.get("autoTools");typeof g<"u"&&N({autoTools:[]})}return c}async function H0(e,t){let r=await As("/v1/completion/email_summary",e,{method:"POST",signal:t}),n=r.quota_type?r.quota_type==="basic"?"gpt-3.5":"gpt-4":"gpt-3.5";return Mr(n,r),r}function q0(e,t){return As("/v1/completion/email_reply",e,{method:"POST",signal:t.signal},{onStream:r=>{if(!r.done){let n=r.data.quota_type?r.data.quota_type==="basic"?"gpt-3.5":"gpt-4":"gpt-3.5";Mr(n,r.data)}t.onStream(r)}})}var L0=[{version:"4.37.0",title:"DeepSeek-R1 & V3, AI Translator",features:[{features:["DeepSeek-R1: Matches the performance of OpenAI-o1"]},{features:["DeepSeek-V3: Excels at complex reasoning, math, and coding tasks"]},{features:["AI Translator for Web Page: Delivers natural and accurate translations"]}],videoUrl:"",notifyType:"modal"},{version:"4.36.0",title:"Collect Knowledge in Wisebase",features:[{features:["Save Web Pages and Highlights: Save valuable web content to Wisebase (Al knowledge base) with one click "]},{features:["Al Inbox: Let Al organize your content to Wisebases intelligently"]},{features:["Chat with Multi-files: Get instant answers from your collected files"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_36_0",notifyType:"modal"},{version:"4.35.0",title:"Preview Links: Browse Smarter",logContents:"xxxx",features:[{features:["Instant Previews: Drag links to view content without opening new tabs"]},{features:["Summaries: Gain key insights from pages at a glance"]},{features:["Efficient Browsing: Stay focused with fewer clicks and less distractions"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_35_0",notifyType:"modal"},{version:"4.34.0",title:"Gmail Al Reply, Artifacts and Translate Enhancements",logContents:"xxxx",features:[{features:["Al Reply in Gmail: Support translation and Al model selection for better communication"]},{features:["Artifacts: Export flowcharts as images for easy sharing"]},{features:["Translate: Al dictionary for precise translations of words and phrases"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_34_0",notifyType:"modal"},{version:"4.33.0",title:"O1 & Video Summary Upgrades",logContents:"xxxx",features:[{features:["OpenAI o1\u2060: Faster than \u2018o1-preview\u2019, excels at complex multi-step tasks with advanced accuracy"]},{features:["Summarize Videos Without Subtitles: Get transcripts and summaries for YouTube videos without subtitles"]},{features:["Web Content Summary: Improved for platforms like Reddit and Twitter "]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_33_0",notifyType:"modal"},{version:"4.32.0",title:"Support for Audio Files in Chat",logContents:"xxxx",features:[{features:["Audio to Text: Upload MP3, WAV, M4A, or MPGA file to generate transcripts"]},{features:["View & Listen: Read transcripts while listening to the audio"]},{features:["Summarize with Ease: Create quick summaries with one click"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_32_0",notifyType:"modal"},{version:"4.31.0",title:"Toolbox, Input Translate, Quicker Copy",logContents:"xxxx",features:[{features:["Toolbox: Quickly access AI tools for images, PDFs, video and more from the navigation bar"]},{features:["Input Translate:  Instantly translate input text using a trigger key for faster communication"]},{features:['Copy Text : "Copy" is now a default option in the context menu for quicker text copying']}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_31_0",notifyType:"modal"},{version:"4.30.0",title:"Enhanced GPT-4O, Page Translation and YouTube Subtitles",logContents:"xxxx",features:[{features:["GPT-4O Update: More natural writing and better file handling with deeper insights"]},{features:["View Translation Only: View translations without original text for a cleaner view"]},{features:["Better YouTube Subtitles: Enjoy improved bilingual subtitle translation quality"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_30_0",notifyType:"modal"},{version:"4.29.0",title:"Enhanced Chat Experience",logContents:"xxxx",features:[{features:["Messaging Editing: Edit and resend messages for new answers\u2014no copy-pasting required"]},{features:["Side-by-side Comparison: Mention multiple models in a query and view answers in full-page for easier comparison."]},{features:["Custom Icons: Personalize prompt icons for better organization"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_29_0",notifyType:"modal"},{version:"4.28.0",title:"Claude 3.5 Haiku & Enhanced Options",logContents:"xxxx",features:[{features:["Claude 3.5 Haiku: Delivers performance that surpasses Claude 3 Opus, excelling in coding, tool use, and reasoning"]},{features:["Large Font Size: You can now change the message font size"]},{features:["Streamlined UI: A cleaner, more intuitive Options UI for easy personalization"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_28_0",notifyType:"modal"},{version:"4.27.0",title:"Improved Context Menu and Artifacts",logContents:"xxxx",features:[{features:["Streamlined Context Menu: Cleaner, more intuitive interface for a smoother experience"]},{features:["Enhanced Translation:  Delivers related word meanings with contextual accuracy"]},{features:["Publish & Share Artifacts: Easily share your Artifacts publicly via direct links"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_27_0",notifyType:"modal"},{version:"4.26.0",title:"Gemini models just got smarter and faster!",logContents:"xxxx",features:[{features:["Gemini 1.5 Pro: Supercharged reasoning with enhanced math and visual skills."]},{features:["Gemini 1.5 Flash: 2x faster, 3x lower latency, better at visuals and coding."]},{features:["Gemini 1.5 Flash: 2x faster, 3x lower latency, better at visuals and coding."]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_26_0",notifyType:"modal"},{version:"4.25.0",title:"Gemini models just got smarter and faster!",logContents:"xxxx",features:[{features:["Gemini 1.5 Pro: Supercharged reasoning with enhanced math and visual skills."]},{features:["Gemini 1.5 Flash: 2x faster, 3x lower latency, better at visuals and coding."]},{features:["Gemini 1.5 Flash: 2x faster, 3x lower latency, better at visuals and coding."]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_25_0",notifyType:"modal"},{version:"4.24.0",title:"Gemini models just got smarter and faster!",features:[{features:["Gemini 1.5 Pro: Supercharged reasoning with enhanced math and visual skills."]},{features:["Gemini 1.5 Flash: 2x faster, 3x lower latency, better at visuals and coding."]}],notifyType:"modal"},{version:"4.23.0",title:"OpenAI o1-preview & o1-mini are available now!",features:[{features:["Multi-Model Translation: Use multiple models at once for more accurate translations."]},{features:["Versatile Translation Rewrites: Rewrite translations for different scenarios."]},{features:["Bilingual Subtitles: View YouTube subtitles in both languages simultaneously."]}],notifyType:"modal"},{version:"4.20.0",title:"Translation Features Upgrade",features:[{features:["Multi-Model Translation: Use multiple models at once for more accurate translations."]},{features:["Versatile Translation Rewrites: Rewrite translations for different scenarios."]},{features:["Bilingual Subtitles: View YouTube subtitles in both languages simultaneously."]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_20_0",notifyType:"modal"},{version:"4.19.0",title:"Artifacts: Real-Time Content Preview",features:[{features:["Dedicated Windows: Preview documents, websites or charts in separate windows during chats."]},{features:["Interactive and Editable: Modify content directly using natural language."]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_19_0",notifyType:"modal"},{version:"4.18.0",title:"Chat Sharing is Now Live!",features:[{features:["Multiple Formats: Share your chat as a link or an image."]},{features:["Flexible Selection: Select and share an entire conversation or just part of it."]},{features:["Easy Control: Revoke shared links anytime."]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_18_0",notifyType:"modal"},{version:"4.17.0",title:"Introducing Watch Highlights for YouTube",features:[{features:["Video Highlights: AI-generated narration saves you time by quickly highlighting key video points."]},{features:["Natural Narration: Realistic AI voices enhance your viewing experience."]},{features:["Multi-language Support: Easily understand videos across language barriers."]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_17_0",notifyType:"modal"},{version:"4.16.0",title:"",features:[{features:[""]},{features:[""]},{features:[""]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_16_0",notifyType:"modal"},{version:"4.13.0",title:"",features:[{features:[""]},{features:[""]},{features:[""]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_13_0",notifyType:"modal"},{version:"4.12.0",title:"Deep reader to boost your critical reading skills!",features:[{features:["Increased Speed: Get 2x faster responses than GPT-4"]},{features:["Enhanced Vision: Greatly improved image understanding"]},{features:["Enhanced Vision: Greatly improved image understanding"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_12_0",notifyType:"modal"},{version:"4.11.0",title:"Deep reader to boost your critical reading skills!",features:[{features:["Increased Speed: Get 2x faster responses than GPT-4"]},{features:["Enhanced Vision: Greatly improved image understanding"]},{features:["Expanded Languages: More languages, better quality, and faster performance"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_11_0",notifyType:"modal"},{version:"4.10.0",title:"OpenAI's GPT-4o is now here!",features:[{features:["Increased Speed: Get 2x faster responses than GPT-4"]},{features:["Enhanced Vision: Greatly improved image understanding"]},{features:["Expanded Languages: More languages, better quality, and faster performance"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_10_0",notifyType:"modal"},{version:"4.9.0",title:"Llama 3 Now! The next generation of Meta's state-of-the-art open source LLM.",features:[{features:["<b>New Model:</b> Support Llama 3 now"]}],videoUrl:"",notifyType:"modal"},{version:"4.8.0",title:"In-Chat Video Summary, Subtitle Extraction, Claude 3 Haiku! \u{1F680}",features:[{features:["In-Chat Summary: Get key points of YouTube videos with 'Read this page' in the chat window."]},{features:["Easy Subtitle Extraction: Get subtitles with a single click on YouTube for deeper insights."]}],videoUrl:"",notifyType:"modal"},{version:"4.7.0",title:"In-Chat Video Summary, Subtitle Extraction, Claude 3 Haiku! \u{1F680}",features:[{features:["In-Chat Summary: Get key points of YouTube videos with 'Read this page' in the chat window."]},{features:["Easy Subtitle Extraction: Get subtitles with a single click on YouTube for deeper insights."]},{features:["Claude 3 Haiku: Now available to enrich your chat experience."]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-V4_7",notifyType:"modal"},{version:"4.6.0",features:[{features:['Claude 3 Opus: Claims to have "near-human" abilities and can beat GPT-4.']},{features:["Claude 3 Sonnet: Balances intelligence and speed, ideal for retrieving info or automating sales."]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-V4_6",notifyType:"modal"},{version:"4.5.0",features:[{features:["Search Agent Widget: Experience the future of search with AI automation"]},{features:["Translate webpage: More reader-friendly translation display styles"]},{features:["Supports automatically restoring the last chat on startup"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-V4_5",notifyType:"modal"},{version:"4.4.0",title:"Easy Artistry with Painter Tool & GPT-4 context menu",features:[{features:["New Painter Tool: Create images instantly in chat."]},{features:["Enhanced Context Menu: Use GPT-4 in context menu."]},{features:["Enhanced Context Menu: Use GPT-4 in context menu."]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-V4_4",notifyType:"modal"},{version:"4.3.0",title:"Maximize Your Experience with Full-Screen Mode!",features:[{features:["Dive into an immersive, full-screen view"]},{features:["Enjoy all sidebar features, now in Full-Screen"]},{features:["Seamlessly toggle between modes for the best of both worlds"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-V4_3",notifyType:"modal"},{version:"4.2.0",title:"More Efficient UI & Sidebar GPTs Access (Here is the video tutorial)",features:[{features:["Refreshed Interface: Cleaner and easier to navigate"]},{features:["Collapsible Navigation Bar: Ensures a focused chat experiencewhile keeping essential features within easy reach"]},{features:["Sidebar GPTs Access: For ChatGPT Plus users, direct access toGPTs is now available in the sidebar in web app mode"]}],notifyType:"modal"},{version:"4.1.0",features:[{title:"GPT-4V(ision) Preview! & AI reply for Gmail",features:["Sider Vision is powered by GPT-4V","Better understanding of images","Quickly grasp email intentions","Select from diverse tones and personas","Effortlessly pick reply suggestions"]}],notifyType:"modal"},{version:"4.0.0",features:[{title:"GPT-4 Turbo and Chat web page!",features:["Support GPT-4 Turbo and GPT-3.5 Turbo","Translate whole web page","Chat web page in the Sidebar","Chat PDF in the Sidebar"]}],notifyType:"modal"},{version:"3.6.0",features:[{title:"Translation widget",features:["Customize your translation in a dedicated Translation widget","Improve ChatGPT anwers in Google, Bing, Baidu etc"]}],notifyType:"modal"},{version:"3.5.0",features:[{title:"Sider Vision Became Smarter",features:["GPT-4/Claude 2 + Vision","1-click to answer the same question with different bots"]}],notifyType:"modal"},{version:"3.4.0",features:[{title:"Sider Grammar Widget",features:["Check grammar errors","Fix grammar errors","Improve the writing beyond grammar"]}],notifyType:"modal"},{version:"3.3.0",features:[{title:"Sider Vision \u2014 ChatGPT sidebar with Vision",features:["Extract text from an image","Ask any question about the image","3 ways to send image to Sider Vision<div><ol><li>Take a  screenshot</li><li>Drag & Drop an image to Chat window</li><li>Upload an image</li></ol></div>"]}],notifyType:"modal"},{version:"3.2.0",features:[{title:"New pricing plan with 5x more  GPT-4 queries",features:["Great news! Our updated pricing now gives you even more access to GPT-4 and Claude 2 queries.","If you're already a premium user, you'll be upgraded automatically. Plus, we've got a new 'Unlimited' plan for all you power users!"]}],notifyType:"modal"},{version:"3.1.0",features:[{title:"More bot!",features:["Support Bard now!"]},{title:"OCR: Extract text from any image and send it to ChatGPT",features:["Recognize 10+ major languages of printed materials","Recognize handwritten in English","Recognize math equation in the text"]},{title:"Improve Painter",features:["Replace the whole background","Remove selected area"]}],notifyType:"modal"},{version:"3.0.0",features:[{features:["More Chatbots: Now Supporting Claude-instant, Claude 2, and Bard!"]},{features:["Group Chat: Compare Answers Across Chatbots!"]},{features:["Mention: Tag Chatbots with '@'!"]},{features:["Quick Prompt: Just Type '/' and Go!"]},{features:["Simple Design: Streamlined for Speed!"]}],notifyType:"modal"},{version:"2.9.0",features:[{title:"Enhanced prompt manager for",features:["Reading context menu","Writing context menu"]},{title:"AI image editor",features:["Remove background from any images","Remove text from any images"]}],notifyType:"modal"},{version:"2.8.0",features:["Reading Assistant: Use AI for fast understanding while reading web pages","Writing Assistant: Quickly generate content with AI in the web input box"],notifyType:"modal"},{version:"2.7.0",features:["Draw picture from text","Draw picture from a reference picture"],notifyType:"modal"},{version:"2.6.0",features:["Sider Supports Fixed Sidebar - You can chat between all tabs without overlapping any content (available in Chrome 114 or later)"],notifyType:"modal"},{version:"2.5.0",features:["Youtube Summary! Watch 1 hour of YouTube video in 1 minute","Compare the answers provided by humans and AI on Q&A sites such as Quora, StackOverflow, and Zhihu"],notifyType:"modal"},{version:"2.4.0",features:["Smart web access: Based on your query, the Al will decide if it needs to access the web.","Stability improvement"],notifyType:"modal"},{version:"2.3.0",features:["Support Browsing and Plugins for Plus users!","ChatGPT with internet access for everyone!"],notifyType:"modal"},{version:"2.2.0",features:["Compose any message","Reply email, tweet, comment etc"],notifyType:"modal"},{version:"2.1.0",features:["Shortcut for Quick Lookup","Resize the Quick Lookup window","Bug fixes and other UX improvements"],notifyType:"modal"},{version:"2.0.0",features:["Support GPT-4 for all users!","Invite friends and gain GPT-4 queries for both of you!","Bug fixes and other UX improvements"],notifyType:"modal"},{version:"1.1.0",features:["Full Chat in the new tab!","ChatGPT, Bing, Bard together!","Bug fixes"],notifyType:"modal"},{version:"1.0.13",features:["Continue the chat after asking questions","Switch between GPT-4 and GPT-3.5 for Plus users","Easily access and search chat history"],notifyType:"modal"},{version:"1.0.12",features:["Sync extension settings across computers","Access your prompts from different laptops","Save chats for future use","Share chats via link"],notifyType:"modal"},{version:"1.0.11",features:["Quickly access actions through a pop-up window without opening the sidebar.","Add support for additional languages.","Retain the user's language preference when using the translation feature.","Resolve shortcut conflicts on platforms like GitHub and others."],notifyType:"modal"},{version:"1.0.10",features:["Support 50+ languages now!"],notifyType:"modal"},{version:"1.0.8",features:["Support GPT-4 for Plus users! Check settings page!"],notifyType:"modal"},{version:"1.0.7",features:["Remember prompt used last time","Optimize the position of the chatGPT panel on search pages","Add an option to put the sidebar in-page icon on the left side","Optimize package size","Add dark mode","Support your API url proxy"],notifyType:"modal"},{version:"1.0.6",features:["Improve summarize feature in Youtube page"],notifyType:"modal"},{version:"1.0.5",features:["Remember the location of sidebar in\u2013age icon","Improve shortcuts","Save prompt templates from the sidebar directly"]},{version:"1.0.4",features:["Re-order prompt items in the dropdown list","Archive prompt items you will not use","Support response in 50+ languages"]},{version:"1.0.3",features:["CMD/Ctrl + Enter to do quick \u201CSubmit\u201D","Option to hide panel in the search results page","Support ESC to hide sidebar","Support summarize long article"]},{version:"1.0.2",features:["Add stop button to stop generating response","Change the place of collapse button"]},{version:"1.0.1",features:["Improve summarize feature in Youtube page","Fix some bugs related to copy/paste and print"]}];var K0=J(ie());var mK=864e5;var _Se=mK*30;var hK=6e3;async function CK(e=!1,t){if(Z.setUserStatus({fiveStarRated:!0}),e)pr.report("rate_feedback_total"),pr.report(`rate_feedback_${t}`);else{let{__five_star_rate_from__:r}=await z({__five_star_rate_from__:""});pr.report("rate_total"),pr.report(`rate_${r}`)}Ge(["__five_star_rate_checking__","__five_star_rate_checking_timer__","__five_star_rate_show_at__","__five_star_rate_show_count__","__five_star_rate_less_show__","__five_star_rate_from__"])}async function J0(e){let{__five_star_rate_checking__:t,__five_star_rate_checking_timer__:r,userStatus:n}=await z({__five_star_rate_checking__:!1,__five_star_rate_checking_timer__:0,userStatus:{fiveStarRated:!1}});if(n?.fiveStarRated||!t)return;let o=await K0.default.tabs.get(e),i=o.pendingUrl||o.url;if(i)if(BK(i)){r&&clearTimeout(r);let s=setTimeout(()=>{CK()},hK);N({__five_star_rate_checking_timer__:s})}else r&&clearTimeout(r)}function BK(e){return new RegExp(`^https://.+?/detail/.+?/${Ei}${ze?"":"/reviews"}`,"g").test(e)}var Bc=class e{constructor(t,r,n,o){this.db=null;this.dbName="";this.storeName="";this.dbMapKey="";this.idbMapKey="";if(this.dbMapKey=`${t}_${o||1}`,this.idbMapKey=`${t}_${r}`,e.IDB_MAP[this.idbMapKey])return e.IDB_MAP[this.idbMapKey];e.IDB_MAP[this.idbMapKey]=this,this.dbName=t,this.storeName=r,this.onUpgrade=n.onUpgrade,this.onError=n.onError,this.version=o}static{this.DB_MAP={}}static{this.IDB_MAP={}}async openDB(){let{dbName:t,version:r,onUpgrade:n,onError:o}=this;return e.DB_MAP[this.dbMapKey]?e.DB_MAP[this.dbMapKey]:new Promise((i,s)=>{let a=indexedDB.open(t,r);a.onerror=A=>{s(A)},a.onblocked=A=>{s(A)},a.onupgradeneeded=A=>{n(a.result,A)},a.onsuccess=()=>{let A=a.result;this.db=e.DB_MAP[this.dbMapKey]=A,A.onerror=c=>{o?.(c)},A.onversionchange=()=>{A.close(),this.db=null,delete e.DB_MAP[this.dbMapKey]},i(A)}})}async removeDB(){let t=indexedDB.deleteDatabase(this.dbName);return new Promise((r,n)=>{t.onerror=o=>{n(o)},t.onblocked=o=>{n(o)},t.onsuccess=()=>{r(!0)}})}async transactionAction(t,r){this.db||(this.db=await this.openDB());let n=this.db.transaction(this.storeName,r).objectStore(this.storeName);return new Promise((o,i)=>{let s=t(n);s.onerror=i,s.onsuccess=()=>o(s.result)})}getData(t){return this.transactionAction(r=>r.get(t))}addData(t,r){return this.transactionAction(n=>n.add(t,r),"readwrite")}setData(t,r){return this.transactionAction(n=>n.put(t,r),"readwrite")}deleteData(t){return this.transactionAction(r=>r.delete(t),"readwrite")}clearData(){return this.transactionAction(t=>t.clear(),"readwrite")}};function V0(e){return new Bc("CACHE",e,{onUpgrade(t){try{t.createObjectStore("TRANSLATION_CACHE",{keyPath:"key"})}catch{}try{t.createObjectStore("DEMO_TTS_CACHE",{keyPath:"key"})}catch{}}},2)}function jf(){return V0("TRANSLATION_CACHE")}function z0(){return V0("DEMO_TTS_CACHE")}var ou=J(ru()),Or=J(ie());var sD=J(ru()),MK=J(ie());async function UK(e=Lt.English){let t=await it(),r=navigator.userAgentData?.platform||"Unknown";r=r.replace(" ",""),r=r.slice(0,1).toUpperCase()+r.slice(1);let n=tn(le.api,`/v1/app/promotion/promote_config?app_name=${fa}&app_version=${je}&language=${e}&device_name=${r}`),o={data:[],resources:{}};try{let i=await nn(),s=await fetch(n,{headers:{Authorization:i.token}}).then(a=>a.json());!("resources"in s)&&"resources"in s.data&&(s=s.data),o.data=s.data.map(a=>({...a})),o.resources=s.resources}catch{}return o}function nu(e,t){return!e||typeof e!="string"?e:e.replace(/{{\s*([^{{}}]+)\s*}}/g,(r,n)=>{if(n.includes(",")){let[o,i,s,a]=n.split(/\s*,\s*/);n=t[o]===i?s:a}return n?t[n]||n:""})}function aD(e,t){return e&&Object.fromEntries(Object.entries(e).map(([r,n])=>[r,nu(n,t)]))}function OK(e,t){return t?t.every(r=>e.includes(r)):!0}function PK(e,t){if(e.payload.depOtherCampFilterCond&&e.payload.depOtherCampFilterCond.showAfter){let r=e.payload.depOtherCampFilterCond.showAfter;if(r.depKey&&(!t||!(r.depKey in t)||Date.now()-t[r.depKey]<r.gapTime))return!0}return!1}function GK(e){return(Or.default.storage.session||Or.default.storage.local).get(e)}async function HK(){let e=Or.default.storage.session||Or.default.storage.local,t=await GK({__promote_config__:{config:{data:[],resources:{}},timeStamp:0,maxAge:3e3},__promote_variants__:{}}),r=Date.now(),{__promote_variants__:n,language:o,isCNUser:i,userInfo:s,vipInfo:a,provider:A}=await z({language:Lt.English,__promote_variants__:{},provider:"siderApi",isCNUser:!1,userInfo:{id:"",avatar:"",nickname:"",email:"",phone:""},vipInfo:{userTypeDetail:"login"}}),c=t.__promote_config__,g=c?.maxAge||3e3,d=c.config;if(!d||r-c?.timeStamp>g){d=await UK(o);let E=1e3*60*30;try{e.set({__promote_config__:{config:d,timeStamp:r,maxAge:E}})}catch{}}let l=navigator.userAgentData?.platform,f=a?.userTypeDetail||"login",u={lang:o,browser:ze?"edge":"chrome",__LANG__:o,__BROWSER__:ze?"edge":"chrome",__PLATFORM__:l,__VERSION__:je,__IS_CN_USER__:i?"1":"0",__USER_PLAN__:XB[f],__USER_ID__:s.id,__USER_NAME__:s.nickname,__USER_AVATAR__:s.avatar,__USER_EMAIL__:s.email,__USER_PHONE__:s.phone},m=[l,ze?"edge_ext":"chrome_ext",f,["device","login"].includes(f)?"free":"paid",f=="device"?"unregistered":"registered",o,A],{__promote_off__:p}=await z({__promote_off__:{}}),C={},Q={};for(let E of d.data){let w=E.activityId||E.slot,y=typeof E.startAt=="number"?E.startAt:Date.parse(E.startAt),M=typeof E.stopAt=="number"?E.stopAt:Date.parse(E.stopAt);y>r||M<r||OK(m,E.condition)&&(PK(E,p)||(Q[E.key]={startAt:E.startAt,stopAt:E.stopAt},!(p&&E.key in p)&&(C[w]||(C[w]=[]),C[w].push(E))))}let R={...u,...aD({...d.resources._,...d.resources.en,...d.resources[o]},u)},B={};for(let E of Object.values(C)){if(E.length==0)continue;let w=E[0].key,y=E[0].persistent,M=n[w]||t.__promote_variants__[w];if(!isFinite(M)&&(M=Math.floor(Math.random()*100),y)){let U=y=="session"&&Or.default.storage.session?"session":"local";Or.default.storage[U].set({__promote_variants__:{...U=="session"?t.__promote_variants__:n,[w]:M}})}let T=E.find(U=>M<=U.allocation);E.length==1&&E[0]?.allocation==null&&(T=E[0]),T&&(T.content=nu(T.content,R),T.style=T.style?nu(T.style,R):"",T.payload=aD(T.payload,R),B[T.slot]=T)}let D=Object.fromEntries(Object.entries(B).map(([E,w])=>[E,{key:w.key,startAt:w.startAt,stopAt:w.stopAt}]));return await Or.default.storage.local.set({__promote_schedule__:D}),await Or.default.storage.local.set({__promote_ongoing__:Q}),B}var wc;async function AD(){return wc||(wc=HK().finally(()=>{wc=null}))}function cD(e,t){let r=e.key;r&&z({[r]:null}).then(n=>{let o=n[r]||{},i=e.host,s=e.favicon;try{i=i||new URL(t.url||"").host,s=s||t.tab?.favIconUrl||t.url+"/favicon.ico"}catch{}if(!i||i==="undefined")return;let a=e.enable;return a?delete o[i]:o={...o,[i]:{favicon:s,enable:a,timestamp:Date.now()}},Object.entries(o).forEach(([A,c])=>{(A==="undefined"||c.enable)&&delete o[A]}),N({[r]:o})})}var mr=J(ie());async function gD({prompt:e,windowId:t}){let n=(await mr.default.tabs.query({url:"https://chat.openai.com/chat*",windowId:t}))[0];n||(n=await mr.default.tabs.create({active:!0,url:"https://chat.openai.com",windowId:t}),await new Promise(o=>{let i=(s,a,A)=>{s==n.id&&a.status=="complete"&&(o(),mr.default.tabs.onUpdated.removeListener(i))};mr.default.tabs.onUpdated.addListener(i)})),mr.default.tabs.update(n.id,{active:!0}),mr.default.tabs.sendMessage(n.id,{type:"automate-send-prompt",prompt:e}),await new Promise(o=>{let i=0,s=(a,A)=>{if(A.tab?.id===n.id)switch(a.type){case"loaded":i+=1,i<2&&mr.default.tabs.sendMessage(n.id,{type:"automate-send-prompt",prompt:e});return;case"automate-send-prompt-done":mr.default.runtime.onMessage.removeListener(s),o();return}};mr.default.runtime.onMessage.addListener(s),setTimeout(o,1e3*60)})}var TD=J(su()),Te=J(ie());var QD=J(su());var In=J(ie());var pD=["text/x-java","text/javascript","text/html","text/x-c++","application/msword","text/x-csharp","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/pdf","text/x-script.python","text/x-c","text/x-tex","application/json","text/markdown","application/vnd.openxmlformats-officedocument.presentationml.presentation","text/x-ruby","text/x-sh","text/x-php","application/x-latext","text/x-typescript","text/plain"];var Sc=class{constructor(){this.results=[];this.isBrowsing=!1}parseMessage(t){let r=t.message,n=this.results.findIndex(o=>o.id===r?.id);return r&&(r.author.role==="assistant"?r.recipient!=="bio"&&this.handleAssistantMessage(r,n):r.author.role==="tool"&&(r.author.name==="browser"||r.author.name==="myfiles_browser"?this.handleBrowserMessage(r):this.handlePluginResponseMessage(r))),this.results}handleAssistantMessage(t,r){if(t.recipient!=="all")if(t.recipient!=="browser"&&t.recipient!=="myfiles_browser")if(r===-1){let n=this.results[this.results.length-1];if(n&&n.type==="browsing"){let o=n;o.isLoading=!1,o.actions.push({messageId:"1",command:"finishBrowsing"}),this.isBrowsing=!1}this.results.push({id:t?.id,type:"plugin",pluginName:t?.recipient,isLoading:!0,info:[{type:"request",text:t?.content?.parts?.[0]||t?.content?.text}]})}else{let n=this.results[r];n.info[0].text=t?.content?.parts?.[0]||t?.content?.text}else this.isBrowsing||(this.results.push({id:t?.id,type:"browsing",subType:t?.recipient==="myfiles_browser"?"myfiles":"web",isLoading:!0,actions:[{messageId:"0",command:"startBrowsing",model_slug:t.metadata?.model_slug||""}]}),this.isBrowsing=!0);else if(r===-1)this.handleNewTextMessage(t);else{let n=this.results[r],o=this.getTextWithCitations(t);n.text=o.text,n.searchSnippets=o.searchSnippets}}handleBrowserMessage(t){if(this.isBrowsing){let r=this.results[this.results.length-1];if(r.type==="browsing"){let n=r,o=t.metadata;(n.actions.length===0||o.command!==n.actions[n.actions.length-1].command||n.actions[n.actions.length-1].messageId!==t?.id)&&(o.command!=="quote_lines"||n.actions[n.actions.length-1].command!=="quote_lines")?(o.command==="search"||o.command==="click"||o.command==="quote_lines"&&n.subType==="web")&&n.actions.push({messageId:t?.id,command:o.command,model_slug:o.model_slug,status:o.status,args:o.args,_cite_metadata:o.command==="click"?this.getClickMetadata(o._cite_metadata):{}}):(n.actions[n.actions.length-1].status=o.status,(o.command==="click"||o.command==="quote_lines")&&(n.actions[n.actions.length-1]._cite_metadata=this.getClickMetadata(o._cite_metadata)))}}}handlePluginResponseMessage(t){let r=this.results[this.results.length-1];r&&(r.isLoading=!1);let n=null;if(t?.author?.name==="python"?n=JSON.stringify(t.content):t?.author?.name==="dalle.text2im"?typeof t?.content?.parts?.[0]!="string"&&(n=t?.content?.text):n=t?.content?.parts?.[0],n&&r&&r.info.push({type:"response",text:n}),t?.author?.name==="dalle.text2im"){let o=t?.content?.parts?.[0];typeof o=="object"&&o.asset_pointer&&this.results.push({id:o.asset_pointer.replace("file-service://",""),type:"image",gen_id:o?.metadata?.dalle?.gen_id,prompt:o?.metadata?.dalle?.prompt})}else t?.metadata?.jit_plugin_data?.from_server.type==="confirm_action"&&this.results.push({id:t?.id,type:"pluginConfirm",metadata:t?.metadata?.jit_plugin_data?.from_server.body})}handleNewTextMessage(t){if(this.results.length>0){let r=this.results[this.results.length-1];if(r.type==="browsing"){let n=r;n.isLoading=!1,n.actions.push({messageId:"1",command:"finishBrowsing"}),this.isBrowsing=!1}}t?.content?.parts?.[0]&&this.results.push({id:t?.id,type:"text",text:t?.content?.parts?.[0]})}getClickMetadata(t){return{metadata_list:[{url:t?.metadata_list?.[0]?.url,title:t?.metadata_list?.[0]?.title}]}}getTextWithCitations(t){let r=t?.content?.parts?.[0],n=t?.metadata?.citations,o={};if(n&&n.length>0){let i=r,s=n.length;return n.sort((a,A)=>A.end_ix-a.end_ix).forEach((a,A)=>{let c=a.start_ix,g=a.end_ix,d=a.metadata?.url;d?(i=i.slice(0,c)+`[^${s-A}](${d})`+i.slice(g),o[s-A]={link:d,title:a.metadata.title,snippet:a.metadata.text}):i=i.slice(0,c)+i.slice(g)}),{text:i,searchSnippets:o}}else return{text:r}}};async function Zo(e,t,r=!1,n=!1){let{onMessage:o,...i}=t,a=await(r?$o:fetch)(e,i).catch(c=>{throw So(c,e),c});if(!a.ok){let c=await a.json().catch(()=>({}));throw new Error(hi(c)?`${a.status} ${a.statusText}`:JSON.stringify({...c,responseStatus:a.status}))}let A=yo(c=>{c.type==="event"&&o(c.data)});for await(let c of Qo(a.body)){let g=new TextDecoder().decode(c);if(n)try{if(JSON.parse(g).wss_url){o(g);return}}catch{}A.feed(g)}}var mD=J(ie());async function JK(e,t){return mD.default.runtime.sendMessage({type:"getArkoseToken",target:"offscreen",userType:e,dx:t})}async function hD(e,t){return JK(e,t)}var Xt="ChatGPT Webapp",cu=`${Xt}: error_chatgpt_auth`,Dc="https://chatgpt.com",au="accessToken",Au=new QD.default(10*1e3);async function mt(e,t,r,n){let o={"Content-Type":"application/json"};e&&(o.Authorization=`Bearer ${e}`),o={...o,...await RD()};let i={method:t,headers:o};return n&&(i.body=JSON.stringify(n)),$o(`${Dc}/backend-api${r}`,i)}async function wD(e,t){await mt(e,"POST","/conversation/message_feedback",t)}async function CD(e,t,r){return!0}async function SD(e){let t=await st({isForce:!0});return mt(t,"GET","/models",null).then(r=>r.json())}async function xD(e){let t=await st({isForce:!0});return mt(t,"GET","/gizmos/bootstrap?limit=2",null).then(r=>r.json()).catch(r=>({gizmos:[]}))}async function BD(e,t){let r=await st({isForce:!0});return mt(r,"POST","/conversation/gen_title/"+e,{message_id:t}).then(n=>n.json())}function VK(){return[navigator.hardwareConcurrency+1920+1080,new Date().toString(),4294705152,0,navigator.userAgent,"","",navigator.language,navigator.languages.join(","),0]}async function bD(e,t){let r=performance.now(),n=VK();for(let o=0;o<5e5;o++){n[3]=o,n[9]=Math.round(performance.now()-r);let i=JSON.stringify(n),s=btoa(String.fromCharCode(...new TextEncoder().encode(i)));if((await FE(e+s,512)).slice(0,t.length)<=t)return s}return"wQ8Lk5FbGpA2NcR9dShT6gYjU7VxZ4D"+btoa(String.fromCharCode(...new TextEncoder().encode(JSON.stringify(e+""))))}async function zK(e,t){return"gAAAAAB"+await bD(e,t)}async function YK(){return"gAAAAAC"+await bD(Math.random()+"","0")}async function DD(e,t){let r=await st({isForce:!0});return mt(r,"POST","/files",{file_name:e.name,file_size:e.size,use_case:t?"my_files":"multimodal"}).then(n=>n.json())}async function kD(e){let t=await st({});return mt(t,"POST","/files/"+e+"/uploaded",{}).then(r=>r.json())}async function gu(e){let t=await st({isForce:!0});return mt(t,"GET","/files/"+e+"/download",null).then(r=>r.json())}async function WK(){let e=await st({});return mt(e,"GET","/accounts/check/v4-2023-04-27",null).then(t=>t.json())}async function jK(){let e=await st({});return mt(e,"POST","/sentinel/chat-requirements",{p:await YK()}).then(t=>t.json())}async function ED(){let e=await st({});return mt(e,"POST","/register-websocket",null).then(t=>t.json()).then(t=>t.wss_url)}async function FD({conversationId:e,messageId:t,sandboxPath:r}){let n=await st({isForce:!0});return mt(n,"GET","/conversation/"+e+"/interpreter/download?message_id="+t+"&sandbox_path="+r.replace("sandbox:",""),null).then(o=>o.json())}async function _D(e){e||(e=await st());let t=`${Dc}/backend-api/aip/p?offset=0&limit=250&is_installed=true`;return await(await $o(t,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}})).json()}async function lu(){if(Au.get(au))return Au.get(au);let e=null;try{e=await fetch(xr.openaiApiSession)}catch(n){throw new Error(`${Xt}: ${n.message}`)}let t=cu;if(e?.status===403)throw new Error(t);let r=await e?.json().catch(()=>({}));if(!r.accessToken)throw new Error(t);return Au.set(au,r.accessToken),r.accessToken}async function vD(e){let t=await st();return mt(t,"POST",`/gizmos/${e}/sidebar`,{action:"keep"})}async function RD(){let e="Oai-",t={};return t[e+"Device-Id"]=await XK(),t[e+"Language"]="en-US",t}async function XK(){return(await chrome.cookies.get({url:Dc,name:"oai-did"}))?.value||me()}async function ZK(e){try{return(await In.default.storage.local.get({selectWebAppModel:"gpt-4"})).selectWebAppModel}catch{return null}}async function ND(e){let t="";return t||(t=await st()),new Promise((r,n)=>{let o=setInterval(async()=>{let s=await(await mt(t,"GET","/files/"+e,null)).json();s.retrieval_index_status==="success"&&(clearInterval(o),r(s))},1e3)})}function yD(e){return e.map(t=>{let r={name:t.name,size:t.size,mimeType:t.type,id:t.id};return t.type.startsWith("image")?(r.width=t.width,r.height=t.height):pD.includes(t.type)&&(r.fileTokenSize=t.fileTokenSize),r})}var Pr={};function $K(e){let t=du(e);if(Pr[t])return Pr[t];{let r=new WebSocket(e);return Pr[t]=r,r}}function e8(e){let t=du(e);if(Pr[t]&&Pr[t].readyState===WebSocket.OPEN)return{ws:Pr[t],isNew:!1};{let r=new WebSocket(e);return Pr[t]=r,{ws:r,isNew:!0}}}function du(e){return e.split("?")[0]}function xc(e){let t=du(e);Pr[t]&&delete Pr[t]}async function t8(e){let t=await In.default.storage.local.get("chatRequirements");return jK().then(r=>(In.default.storage.local.set({chatRequirements:{data:r,expireTime:Date.now()+9*60*1e3,token:e}}),r))}var bc=class{constructor(t){this.token=t;this.token=t}async generateAnswer(t){let r,n,o,i=Promise.resolve(),s=!1,a=await t8(this.token);async function A(){if(f.filter(k=>k.type==="image").length>0){let k=f.filter(q=>q.type==="image").map(async q=>{let Y=await gu(q.id);if(Y.download_url)return fetch(Y.download_url).then(ne=>ne.blob()).then(async ne=>{let Ae=await Dr(ne);return N({[ZB+q.id]:Ae})})});await Promise.all(k)}}let c=async()=>{try{await i}catch(k){throw r&&(await A(),await CD(this.token,r,{is_visible:!1}),n&&r&&await BD(r,n),r="",n=""),new Error(`${Xt}: ${k}`)}o&&(o.onmessage=()=>{},o.onerror=()=>{},o.onclose=()=>{}),r&&(await A(),await CD(this.token,r,{is_visible:!1}),n&&r&&await BD(r,n),r="",n="")};t.getCleanupMethod?.(c);function g(k,q){let Y=q&&q.some(ne=>ne.type.startsWith("image"));return{content_type:Y?"multimodal_text":"text",parts:Y?q?.filter(ne=>ne.type.startsWith("image")).map(ne=>({asset_pointer:"file-service://"+ne.id,size_bytes:ne.size,width:ne.width,height:ne.height})).concat([k]):[k]}}let d=Array.isArray(t.prompt)?t.prompt.map((k,q)=>({id:me(),recipient:t.actionData?"all":void 0,author:t.actionData?t.actionData.author:{role:k.role},content:q===t.prompt.length-1?g(k.content,t.chatgptFiles):{content_type:"text",parts:[k.content]},metadata:t.actionData?t.actionData.metaData:q===t.prompt.length-1&&t.chatgptFiles&&t.chatgptFiles.length>0?{attachments:yD(t.chatgptFiles)}:void 0})):[{id:me(),recipient:t.actionData?"all":void 0,author:t.actionData?t.actionData.author:{role:"user"},content:g(t.prompt,t.chatgptFiles),metadata:t.actionData?t.actionData.metaData:t.chatgptFiles?{attachments:yD(t.chatgptFiles)}:void 0}],l=()=>{l=null,t.onEvent({type:"done"}),c()},f=[],u=new Sc,m=t.model||await ZK(this.token)||"text-davinci-002-render-sha",{needArkoseToken:p}=await In.default.storage.local.get("needArkoseToken");function C(k){if(k.error&&In.default.storage.local.set({needArkoseToken:!0}),!k.message?.content?.parts?.[0]&&!k.message?.content?.text&&k.message?.author.role!=="assistant"&&!k.message?.metadata?.command&&!k.message?.metadata?.jit_plugin_data||k.message?.author.role==="system"||k.message?.author.role==="user"||k.message?.content?.content_type==="text"&&k.message?.author.name===null&&k.message?.status==="finished_successfully"&&!k.message?.end_turn&&!k.message_id)return;f=u.parseMessage(k);let q=k.message?.content?.parts?.[0];(q||f.length>0)&&(r=k.conversation_id,t.onEvent({type:"answer",data:{message:k.message,contents:f,text:q,messageId:k.message.id,conversationId:k.conversation_id}}),t.parentMsgId||(n=k.message.id))}function Q(k){try{let q=JSON.parse(k);return q.wss_url?q.wss_url:!1}catch{return!1}}async function R(k){return k||(k=await ED()),B(k)}function B(k){return new Promise((q,Y)=>{let ne=e8(k);o=ne.ws,o.onopen=()=>{ne.isNew&&setTimeout(()=>{q(!0)},500)},o.onclose=()=>{throw xc(k),t.onEvent({type:"error",data:{error:`${Xt}: Websoket error: close`}}),new Error("Websoket error: close")},o.onerror=Ae=>{throw xc(k),t.onEvent({type:"error",data:{error:`${Xt}: Websoket error: ${Ae}`}}),new Error("Websoket error: "+Ae)},o.onmessage=Ae=>{let ft=JSON.parse(Ae.data),Ve=atob(ft.body).trim();if(!Ve.startsWith("data: "))return;let mn=Ve.replace("data: ",""),si;if(mn==="[DONE]"){l?.();return}try{si=JSON.parse(mn)}catch{return}C(si)},ne.isNew||q(!0)})}function D(k){o=$K(k),o.onopen=()=>{},o.onclose=()=>{throw xc(k),t.onEvent({type:"error",data:{error:`${Xt}: Websoket error: close`}}),new Error("Websoket error: close")},o.onerror=q=>{throw xc(k),t.onEvent({type:"error",data:{error:`${Xt}: Websoket error: ${q}`}}),new Error("Websoket error: "+q)},o.onmessage=q=>{let Y=JSON.parse(q.data),ne=atob(Y.body).trim();if(!ne.startsWith("data: "))return;let Ae=ne.replace("data: ",""),ft;if(Ae==="[DONE]"){l?.();return}try{ft=JSON.parse(Ae)}catch{return}C(ft)}}try{t.parentMsgId||(m==="gpt-4-gizmo:g-BlafpMvzd"?pr.report("browser_pro_new_chat"):m==="gpt-4-gizmo:g-nleealfRT"&&pr.report("shoppingGPT_new_chat"))}catch{}let w=(await In.default.storage.local.get("webAppNetwork")).webAppNetwork,y="";if(!w){let k=await WK(),q=k.accounts[k.account_ordering[0]].features.includes("shared_websocket")?"websocket":"http";q==="websocket"&&(y=await ED()),w={method:q,wss_url:y},In.default.storage.local.set({webAppNetwork:w})}w.method==="websocket"&&await R(w.wss_url);let M=null;if(chrome.offscreen&&a.arkose?.required)try{M=await hD(a.persona,a.arkose?.dx)}catch(k){throw new Error(k)}let T=()=>{let k={};return this.token&&(k.Authorization=`Bearer ${this.token}`),k};async function U(){let k="OpenAI-Sentinel-",q={};if(a.token&&(q[`${k}Chat-Requirements-Token`]=a.token),M&&(q[`${k}Arkose-Token`]=M),a.proofofwork?.required){let{seed:Y,difficulty:ne}=a.proofofwork;q[`${k}Proof-Token`]=await zK(Y,ne)}return q}let L={"Content-Type":"application/json",...T(),...await U(),...await RD()};i=Zo(Dc+"/backend-api/conversation",{method:"POST",signal:t.signal,headers:L,body:JSON.stringify({action:"next",conversation_mode:m.startsWith("gpt-4-gizmo:")?{gizmo_id:m.replace("gpt-4-gizmo:",""),kind:"gizmo_interaction"}:{kind:"primary_assistant"},force_paragen:!1,force_nulligen:this.token?void 0:!1,force_rate_limit:!1,force_paragen_model_slug:"",history_and_training_disabled:!1,messages:d,model:m.startsWith("gpt-4-gizmo:")?"gpt-4-gizmo":m,parent_message_id:t.parentMsgId||me(),plugin_ids:t.pluginIds,timezone_offset_min:new Date().getTimezoneOffset(),arkose_token:M||void 0,conversation_id:t.cid?t.cid:void 0,suggestions:[],websocket_request_id:me()}),onMessage(k){if(k==="[DONE]"){l?.();return}else if(Q(k))s=!0,D(Q(k));else if(k.startsWith("event: typing"))return;let q;try{q=JSON.parse(k)}catch{return}C(q)}},!0,!0).catch(k=>{let q=k.message;try{let Y=JSON.parse(q);q=Y.message||Y.msg||Y.error?.message||Y.detail?.message||Y.detail||q}catch{}throw t.onEvent({type:"error",data:{error:`${Xt}: ${q}`}}),new Error(`${Xt}: ${q}`)}).finally(()=>{s||l?.()})}};var pn=0,kc=!1,ei=new TD.default(1e3*30),fu="accessToken",MD="noCacheToken",r8="alwaysProxyFetch";Te.default.storage.local.get({guardChatgptTabId:0}).then(({guardChatgptTabId:e})=>{pn==0&&(pn=e),kc=e!=0});async function UD(){let e=null;try{e=await Te.default.tabs.get(pn),await Te.default.tabs.update(e.id,{active:!0})}catch{}e||(e=await Te.default.tabs.create({url:xr.openaiChat,pinned:!0,active:!0}));let t=e.id;await Te.default.storage.local.set({guardChatgptTabId:t}),pn=t,kc=!0,await new Promise(r=>{let n=(o,i)=>{switch(o.type){case"loaded":i.tab?.id==t&&Te.default.tabs.sendMessage(t,{type:"guard-session-activate"});break;case"guard-session-activated":Te.default.runtime.onMessage.removeListener(n),r();break}};Te.default.runtime.onMessage.addListener(n),setTimeout(()=>r(),1e3*40)})}async function n8(){let e=await Te.default.tabs.create({url:xr.openaiChat,pinned:!0,active:!1});return await Te.default.storage.local.set({guardChatgptTabId:e.id}),pn=e.id,kc=!0,e}async function o8(){let t=await Te.default.tabs.query({pinned:!0,url:"https://chatgpt.com/*"});if(t.length>0){let r=t[0];return pn=r.id,await Te.default.tabs.reload(r.id),r}return null}async function i8(){let e=null;try{e=await Te.default.tabs.get(pn),/chat\.openai\.com/.test(e.url||"")?await Te.default.tabs.reload(e.id):e=await Te.default.tabs.update(e.id,{url:xr.openaiChat})}catch{}e||(e=await o8()),e||(e=await n8());let t=e?.id||0;await new Promise(r=>{let n=(o,i)=>{switch(o.type){case"loaded":i.tab?.id==t&&Te.default.tabs.sendMessage(t,{type:"guard-session-activate"});break;case"guard-session-activated":Te.default.runtime.onMessage.removeListener(n),r();break;case"guard-session-logout":throw Error("")}};Te.default.runtime.onMessage.addListener(n),setTimeout(()=>r(),1e3*40)})}async function st({onRefresh:e,throwGuideError:t,isForce:r}={}){if(!r&&ei.get(MD)!==!0&&ei.get(fu))return ei.get(fu);let o=await(await $o(xr.openaiApiSession,{},{onRefresh:e,throwGuideError:t})).json().catch(()=>({}));return ei.set(fu,o.accessToken),o.accessToken}async function s8(e,t,r){let n=Te.default.tabs.connect(e,{name:"guard-proxy"}),o=null,i=null,s=new Promise((f,u)=>{o=f,i=u}),a;n.onDisconnect.addListener(()=>{i(new Error("proxy fetch aborted")),a?.close()}),r?.signal?.addEventListener("abort",()=>{a?.close(),n.disconnect()});let A={type:"guard-proxy-request",key:Date.now()+"",url:t,options:r};n.postMessage(A);let c=new ReadableStream({start(f){a=f},cancel(){n.disconnect()}}),g=setTimeout(()=>i(new Error("connect timeout")),1e3*1),d=f=>{switch(f.type){case"guard-proxy-request-received":clearTimeout(g);break;case"guard-proxy-response":o(new Response(c,f.options));break;case"guard-proxy-response-chunk":a.enqueue(new TextEncoder().encode(f.value)),f.done&&(a.close(),n.onMessage.removeListener(d),n.disconnect());break;case"guard-proxy-response-error":n.onMessage.removeListener(d),n.disconnect(),i(new Error(f.error)),a.close();break}};return n.onMessage.addListener(d),await s}async function $o(e,t,r){let n=null;try{n=await fetch(e,t)}catch{}if(!n)throw new Error(cu);if(n.status===401)throw new Error("");if(n.status==403){if(ei.set(MD,!0),ei.set(r8,!0),!kc&&r?.throwGuideError)throw Error(`${Xt}: error_chatgpt_session_timeout`);r?.onRefresh?.(),await i8(),n=await s8(pn,e,t)}return n}var ls=J(ie());function OD(){a8("NEW","#F00","#FFF")}function a8(e,t,r){ls.default.action.setBadgeBackgroundColor({color:t}),ls.default.action.setBadgeText({text:e}),r&&ls.default.action.setBadgeTextColor({color:r})}function uu(){return ls.default.action.setBadgeText({text:""})}var A8={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console&&console[e]}},pu=class e{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(t,r)}init(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=r.prefix||"i18next:",this.logger=t||A8,this.options=r,this.debug=r.debug}log(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return this.forward(r,"log","",!0)}warn(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return this.forward(r,"warn","",!0)}error(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return this.forward(r,"error","")}deprecate(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return this.forward(r,"warn","WARNING DEPRECATED: ",!0)}forward(t,r,n,o){return o&&!this.debug?null:(typeof t[0]=="string"&&(t[0]=`${n}${this.prefix} ${t[0]}`),this.logger[r](t))}create(t){return new e(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new e(this.logger,t)}},hr=new pu,ni=class{constructor(){this.observers={}}on(t,r){return t.split(" ").forEach(n=>{this.observers[n]=this.observers[n]||[],this.observers[n].push(r)}),this}off(t,r){if(this.observers[t]){if(!r){delete this.observers[t];return}this.observers[t]=this.observers[t].filter(n=>n!==r)}}emit(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];this.observers[t]&&[].concat(this.observers[t]).forEach(s=>{s(...n)}),this.observers["*"]&&[].concat(this.observers["*"]).forEach(s=>{s.apply(s,[t,...n])})}};function ds(){let e,t,r=new Promise((n,o)=>{e=n,t=o});return r.resolve=e,r.reject=t,r}function PD(e){return e==null?"":""+e}function c8(e,t,r){e.forEach(n=>{t[n]&&(r[n]=t[n])})}function Eu(e,t,r){function n(s){return s&&s.indexOf("###")>-1?s.replace(/###/g,"."):s}function o(){return!e||typeof e=="string"}let i=typeof t!="string"?[].concat(t):t.split(".");for(;i.length>1;){if(o())return{};let s=n(i.shift());!e[s]&&r&&(e[s]=new r),Object.prototype.hasOwnProperty.call(e,s)?e=e[s]:e={}}return o()?{}:{obj:e,k:n(i.shift())}}function GD(e,t,r){let{obj:n,k:o}=Eu(e,t,Object);n[o]=r}function g8(e,t,r,n){let{obj:o,k:i}=Eu(e,t,Object);o[i]=o[i]||[],n&&(o[i]=o[i].concat(r)),n||o[i].push(r)}function _c(e,t){let{obj:r,k:n}=Eu(e,t);if(r)return r[n]}function l8(e,t,r){let n=_c(e,r);return n!==void 0?n:_c(t,r)}function VD(e,t,r){for(let n in t)n!=="__proto__"&&n!=="constructor"&&(n in e?typeof e[n]=="string"||e[n]instanceof String||typeof t[n]=="string"||t[n]instanceof String?r&&(e[n]=t[n]):VD(e[n],t[n],r):e[n]=t[n]);return e}function ti(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var d8={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function f8(e){return typeof e=="string"?e.replace(/[&<>"'\/]/g,t=>d8[t]):e}var u8=[" ",",","?","!",";"];function I8(e,t,r){t=t||"",r=r||"";let n=u8.filter(s=>t.indexOf(s)<0&&r.indexOf(s)<0);if(n.length===0)return!0;let o=new RegExp(`(${n.map(s=>s==="?"?"\\?":s).join("|")})`),i=!o.test(e);if(!i){let s=e.indexOf(r);s>0&&!o.test(e.substring(0,s))&&(i=!0)}return i}function vc(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!e)return;if(e[t])return e[t];let n=t.split(r),o=e;for(let i=0;i<n.length;++i){if(!o||typeof o[n[i]]=="string"&&i+1<n.length)return;if(o[n[i]]===void 0){let s=2,a=n.slice(i,i+s).join(r),A=o[a];for(;A===void 0&&n.length>i+s;)s++,a=n.slice(i,i+s).join(r),A=o[a];if(A===void 0)return;if(A===null)return null;if(t.endsWith(a)){if(typeof A=="string")return A;if(a&&typeof A[a]=="string")return A[a]}let c=n.slice(i+s).join(r);return c?vc(A,c,r):void 0}o=o[n[i]]}return o}function Rc(e){return e&&e.indexOf("_")>0?e.replace("_","-"):e}var Nc=class extends ni{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=t||{},this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){let r=this.options.ns.indexOf(t);r>-1&&this.options.ns.splice(r,1)}getResource(t,r,n){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},i=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,s=o.ignoreJSONStructure!==void 0?o.ignoreJSONStructure:this.options.ignoreJSONStructure,a=[t,r];n&&typeof n!="string"&&(a=a.concat(n)),n&&typeof n=="string"&&(a=a.concat(i?n.split(i):n)),t.indexOf(".")>-1&&(a=t.split("."));let A=_c(this.data,a);return A||!s||typeof n!="string"?A:vc(this.data&&this.data[t]&&this.data[t][r],n,i)}addResource(t,r,n,o){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,a=[t,r];n&&(a=a.concat(s?n.split(s):n)),t.indexOf(".")>-1&&(a=t.split("."),o=r,r=a[1]),this.addNamespaces(r),GD(this.data,a,o),i.silent||this.emit("added",t,r,n,o)}addResources(t,r,n){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(let i in n)(typeof n[i]=="string"||Object.prototype.toString.apply(n[i])==="[object Array]")&&this.addResource(t,r,i,n[i],{silent:!0});o.silent||this.emit("added",t,r,n)}addResourceBundle(t,r,n,o,i){let s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},a=[t,r];t.indexOf(".")>-1&&(a=t.split("."),o=n,n=r,r=a[1]),this.addNamespaces(r);let A=_c(this.data,a)||{};o?VD(A,n,i):A={...A,...n},GD(this.data,a,A),s.silent||this.emit("added",t,r,n)}removeResourceBundle(t,r){this.hasResourceBundle(t,r)&&delete this.data[t][r],this.removeNamespaces(r),this.emit("removed",t,r)}hasResourceBundle(t,r){return this.getResource(t,r)!==void 0}getResourceBundle(t,r){return r||(r=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(t,r)}:this.getResource(t,r)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){let r=this.getDataByLanguage(t);return!!(r&&Object.keys(r)||[]).find(o=>r[o]&&Object.keys(r[o]).length>0)}toJSON(){return this.data}},zD={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,r,n,o){return e.forEach(i=>{this.processors[i]&&(t=this.processors[i].process(t,r,n,o))}),t}},HD={},Tc=class e extends ni{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),c8(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=hr.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(t==null)return!1;let n=this.resolve(t,r);return n&&n.res!==void 0}extractFromKey(t,r){let n=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");let o=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,i=r.ns||this.options.defaultNS||[],s=n&&t.indexOf(n)>-1,a=!this.options.userDefinedKeySeparator&&!r.keySeparator&&!this.options.userDefinedNsSeparator&&!r.nsSeparator&&!I8(t,n,o);if(s&&!a){let A=t.match(this.interpolator.nestingRegexp);if(A&&A.length>0)return{key:t,namespaces:i};let c=t.split(n);(n!==o||n===o&&this.options.ns.indexOf(c[0])>-1)&&(i=c.shift()),t=c.join(o)}return typeof i=="string"&&(i=[i]),{key:t,namespaces:i}}translate(t,r,n){if(typeof r!="object"&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),typeof r=="object"&&(r={...r}),r||(r={}),t==null)return"";Array.isArray(t)||(t=[String(t)]);let o=r.returnDetails!==void 0?r.returnDetails:this.options.returnDetails,i=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,{key:s,namespaces:a}=this.extractFromKey(t[t.length-1],r),A=a[a.length-1],c=r.lng||this.language,g=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(c&&c.toLowerCase()==="cimode"){if(g){let B=r.nsSeparator||this.options.nsSeparator;return o?{res:`${A}${B}${s}`,usedKey:s,exactUsedKey:s,usedLng:c,usedNS:A,usedParams:this.getUsedParamsDetails(r)}:`${A}${B}${s}`}return o?{res:s,usedKey:s,exactUsedKey:s,usedLng:c,usedNS:A,usedParams:this.getUsedParamsDetails(r)}:s}let d=this.resolve(t,r),l=d&&d.res,f=d&&d.usedKey||s,u=d&&d.exactUsedKey||s,m=Object.prototype.toString.apply(l),p=["[object Number]","[object Function]","[object RegExp]"],C=r.joinArrays!==void 0?r.joinArrays:this.options.joinArrays,Q=!this.i18nFormat||this.i18nFormat.handleAsObject;if(Q&&l&&(typeof l!="string"&&typeof l!="boolean"&&typeof l!="number")&&p.indexOf(m)<0&&!(typeof C=="string"&&m==="[object Array]")){if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");let B=this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,l,{...r,ns:a}):`key '${s} (${this.language})' returned an object instead of string.`;return o?(d.res=B,d.usedParams=this.getUsedParamsDetails(r),d):B}if(i){let B=m==="[object Array]",D=B?[]:{},E=B?u:f;for(let w in l)if(Object.prototype.hasOwnProperty.call(l,w)){let y=`${E}${i}${w}`;D[w]=this.translate(y,{...r,joinArrays:!1,ns:a}),D[w]===y&&(D[w]=l[w])}l=D}}else if(Q&&typeof C=="string"&&m==="[object Array]")l=l.join(C),l&&(l=this.extendTranslation(l,t,r,n));else{let B=!1,D=!1,E=r.count!==void 0&&typeof r.count!="string",w=e.hasDefaultValue(r),y=E?this.pluralResolver.getSuffix(c,r.count,r):"",M=r.ordinal&&E?this.pluralResolver.getSuffix(c,r.count,{ordinal:!1}):"",T=r[`defaultValue${y}`]||r[`defaultValue${M}`]||r.defaultValue;!this.isValidLookup(l)&&w&&(B=!0,l=T),this.isValidLookup(l)||(D=!0,l=s);let L=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&D?void 0:l,k=w&&T!==l&&this.options.updateMissing;if(D||B||k){if(this.logger.log(k?"updateKey":"missingKey",c,A,s,k?T:l),i){let Ae=this.resolve(s,{...r,keySeparator:!1});Ae&&Ae.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let q=[],Y=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Y&&Y[0])for(let Ae=0;Ae<Y.length;Ae++)q.push(Y[Ae]);else this.options.saveMissingTo==="all"?q=this.languageUtils.toResolveHierarchy(r.lng||this.language):q.push(r.lng||this.language);let ne=(Ae,ft,Ve)=>{let mn=w&&Ve!==l?Ve:L;this.options.missingKeyHandler?this.options.missingKeyHandler(Ae,A,ft,mn,k,r):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(Ae,A,ft,mn,k,r),this.emit("missingKey",Ae,A,ft,l)};this.options.saveMissing&&(this.options.saveMissingPlurals&&E?q.forEach(Ae=>{this.pluralResolver.getSuffixes(Ae,r).forEach(ft=>{ne([Ae],s+ft,r[`defaultValue${ft}`]||T)})}):ne(q,s,T))}l=this.extendTranslation(l,t,r,d,n),D&&l===s&&this.options.appendNamespaceToMissingKey&&(l=`${A}:${s}`),(D||B)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?l=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${A}:${s}`:s,B?l:void 0):l=this.options.parseMissingKeyHandler(l))}return o?(d.res=l,d.usedParams=this.getUsedParamsDetails(r),d):l}extendTranslation(t,r,n,o,i){var s=this;if(this.i18nFormat&&this.i18nFormat.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||o.usedLng,o.usedNS,o.usedKey,{resolved:o});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});let c=typeof t=="string"&&(n&&n.interpolation&&n.interpolation.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),g;if(c){let l=t.match(this.interpolator.nestingRegexp);g=l&&l.length}let d=n.replace&&typeof n.replace!="string"?n.replace:n;if(this.options.interpolation.defaultVariables&&(d={...this.options.interpolation.defaultVariables,...d}),t=this.interpolator.interpolate(t,d,n.lng||this.language,n),c){let l=t.match(this.interpolator.nestingRegexp),f=l&&l.length;g<f&&(n.nest=!1)}!n.lng&&this.options.compatibilityAPI!=="v1"&&o&&o.res&&(n.lng=o.usedLng),n.nest!==!1&&(t=this.interpolator.nest(t,function(){for(var l=arguments.length,f=new Array(l),u=0;u<l;u++)f[u]=arguments[u];return i&&i[0]===f[0]&&!n.context?(s.logger.warn(`It seems you are nesting recursively key: ${f[0]} in key: ${r[0]}`),null):s.translate(...f,r)},n)),n.interpolation&&this.interpolator.reset()}let a=n.postProcess||this.options.postProcess,A=typeof a=="string"?[a]:a;return t!=null&&A&&A.length&&n.applyPostProcessor!==!1&&(t=zD.handle(A,t,r,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...o,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),t}resolve(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n,o,i,s,a;return typeof t=="string"&&(t=[t]),t.forEach(A=>{if(this.isValidLookup(n))return;let c=this.extractFromKey(A,r),g=c.key;o=g;let d=c.namespaces;this.options.fallbackNS&&(d=d.concat(this.options.fallbackNS));let l=r.count!==void 0&&typeof r.count!="string",f=l&&!r.ordinal&&r.count===0&&this.pluralResolver.shouldUseIntlApi(),u=r.context!==void 0&&(typeof r.context=="string"||typeof r.context=="number")&&r.context!=="",m=r.lngs?r.lngs:this.languageUtils.toResolveHierarchy(r.lng||this.language,r.fallbackLng);d.forEach(p=>{this.isValidLookup(n)||(a=p,!HD[`${m[0]}-${p}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(a)&&(HD[`${m[0]}-${p}`]=!0,this.logger.warn(`key "${o}" for languages "${m.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),m.forEach(C=>{if(this.isValidLookup(n))return;s=C;let Q=[g];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(Q,g,C,p,r);else{let B;l&&(B=this.pluralResolver.getSuffix(C,r.count,r));let D=`${this.options.pluralSeparator}zero`,E=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(l&&(Q.push(g+B),r.ordinal&&B.indexOf(E)===0&&Q.push(g+B.replace(E,this.options.pluralSeparator)),f&&Q.push(g+D)),u){let w=`${g}${this.options.contextSeparator}${r.context}`;Q.push(w),l&&(Q.push(w+B),r.ordinal&&B.indexOf(E)===0&&Q.push(w+B.replace(E,this.options.pluralSeparator)),f&&Q.push(w+D))}}let R;for(;R=Q.pop();)this.isValidLookup(n)||(i=R,n=this.getResource(C,p,R,r))}))})}),{res:n,usedKey:o,exactUsedKey:i,usedLng:s,usedNS:a}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,r,n){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,r,n,o):this.resourceStore.getResource(t,r,n,o)}getUsedParamsDetails(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=t.replace&&typeof t.replace!="string",o=n?t.replace:t;if(n&&typeof t.count<"u"&&(o.count=t.count),this.options.interpolation.defaultVariables&&(o={...this.options.interpolation.defaultVariables,...o}),!n){o={...o};for(let i of r)delete o[i]}return o}static hasDefaultValue(t){let r="defaultValue";for(let n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&r===n.substring(0,r.length)&&t[n]!==void 0)return!0;return!1}};function Iu(e){return e.charAt(0).toUpperCase()+e.slice(1)}var Mc=class{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=hr.create("languageUtils")}getScriptPartFromCode(t){if(t=Rc(t),!t||t.indexOf("-")<0)return null;let r=t.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}getLanguagePartFromCode(t){if(t=Rc(t),!t||t.indexOf("-")<0)return t;let r=t.split("-");return this.formatLanguageCode(r[0])}formatLanguageCode(t){if(typeof t=="string"&&t.indexOf("-")>-1){let r=["hans","hant","latn","cyrl","cans","mong","arab"],n=t.split("-");return this.options.lowerCaseLng?n=n.map(o=>o.toLowerCase()):n.length===2?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),r.indexOf(n[1].toLowerCase())>-1&&(n[1]=Iu(n[1].toLowerCase()))):n.length===3&&(n[0]=n[0].toLowerCase(),n[1].length===2&&(n[1]=n[1].toUpperCase()),n[0]!=="sgn"&&n[2].length===2&&(n[2]=n[2].toUpperCase()),r.indexOf(n[1].toLowerCase())>-1&&(n[1]=Iu(n[1].toLowerCase())),r.indexOf(n[2].toLowerCase())>-1&&(n[2]=Iu(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let r;return t.forEach(n=>{if(r)return;let o=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(o))&&(r=o)}),!r&&this.options.supportedLngs&&t.forEach(n=>{if(r)return;let o=this.getLanguagePartFromCode(n);if(this.isSupportedCode(o))return r=o;r=this.options.supportedLngs.find(i=>{if(i===o)return i;if(!(i.indexOf("-")<0&&o.indexOf("-")<0)&&i.indexOf(o)===0)return i})}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}getFallbackCodes(t,r){if(!t)return[];if(typeof t=="function"&&(t=t(r)),typeof t=="string"&&(t=[t]),Object.prototype.toString.apply(t)==="[object Array]")return t;if(!r)return t.default||[];let n=t[r];return n||(n=t[this.getScriptPartFromCode(r)]),n||(n=t[this.formatLanguageCode(r)]),n||(n=t[this.getLanguagePartFromCode(r)]),n||(n=t.default),n||[]}toResolveHierarchy(t,r){let n=this.getFallbackCodes(r||this.options.fallbackLng||[],t),o=[],i=s=>{s&&(this.isSupportedCode(s)?o.push(s):this.logger.warn(`rejecting language code not found in supportedLngs: ${s}`))};return typeof t=="string"&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(t))):typeof t=="string"&&i(this.formatLanguageCode(t)),n.forEach(s=>{o.indexOf(s)<0&&i(this.formatLanguageCode(s))}),o}},p8=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],m8={1:function(e){return+(e>1)},2:function(e){return+(e!=1)},3:function(e){return 0},4:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},5:function(e){return e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},6:function(e){return e==1?0:e>=2&&e<=4?1:2},7:function(e){return e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},8:function(e){return e==1?0:e==2?1:e!=8&&e!=11?2:3},9:function(e){return+(e>=2)},10:function(e){return e==1?0:e==2?1:e<7?2:e<11?3:4},11:function(e){return e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3},12:function(e){return+(e%10!=1||e%100==11)},13:function(e){return+(e!==0)},14:function(e){return e==1?0:e==2?1:e==3?2:3},15:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2},16:function(e){return e%10==1&&e%100!=11?0:e!==0?1:2},17:function(e){return e==1||e%10==1&&e%100!=11?0:1},18:function(e){return e==0?0:e==1?1:2},19:function(e){return e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3},20:function(e){return e==1?0:e==0||e%100>0&&e%100<20?1:2},21:function(e){return e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0},22:function(e){return e==1?0:e==2?1:(e<0||e>10)&&e%10==0?2:3}},h8=["v1","v2","v3"],C8=["v4"],qD={zero:0,one:1,two:2,few:3,many:4,other:5};function B8(){let e={};return p8.forEach(t=>{t.lngs.forEach(r=>{e[r]={numbers:t.nr,plurals:m8[t.fc]}})}),e}var mu=class{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=t,this.options=r,this.logger=hr.create("pluralResolver"),(!this.options.compatibilityJSON||C8.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=B8()}addRule(t,r){this.rules[t]=r}getRule(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(Rc(t),{type:r.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}needsPlural(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=this.getRule(t,r);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}getPluralFormsOfKey(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,n).map(o=>`${r}${o}`)}getSuffixes(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=this.getRule(t,r);return n?this.shouldUseIntlApi()?n.resolvedOptions().pluralCategories.sort((o,i)=>qD[o]-qD[i]).map(o=>`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${o}`):n.numbers.map(o=>this.getSuffix(t,o,r)):[]}getSuffix(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=this.getRule(t,n);return o?this.shouldUseIntlApi()?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${o.select(r)}`:this.getSuffixRetroCompatible(o,r):(this.logger.warn(`no plural rule found for: ${t}`),"")}getSuffixRetroCompatible(t,r){let n=t.noAbs?t.plurals(r):t.plurals(Math.abs(r)),o=t.numbers[n];this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1&&(o===2?o="plural":o===1&&(o=""));let i=()=>this.options.prepend&&o.toString()?this.options.prepend+o.toString():o.toString();return this.options.compatibilityJSON==="v1"?o===1?"":typeof o=="number"?`_plural_${o.toString()}`:i():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1?i():this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString()}shouldUseIntlApi(){return!h8.includes(this.options.compatibilityJSON)}};function LD(e,t,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=l8(e,t,r);return!i&&o&&typeof r=="string"&&(i=vc(e,r,n),i===void 0&&(i=vc(t,r,n))),i}var hu=class{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=hr.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||(r=>r),this.init(t)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});let r=t.interpolation;this.escape=r.escape!==void 0?r.escape:f8,this.escapeValue=r.escapeValue!==void 0?r.escapeValue:!0,this.useRawValueToEscape=r.useRawValueToEscape!==void 0?r.useRawValueToEscape:!1,this.prefix=r.prefix?ti(r.prefix):r.prefixEscaped||"{{",this.suffix=r.suffix?ti(r.suffix):r.suffixEscaped||"}}",this.formatSeparator=r.formatSeparator?r.formatSeparator:r.formatSeparator||",",this.unescapePrefix=r.unescapeSuffix?"":r.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":r.unescapeSuffix||"",this.nestingPrefix=r.nestingPrefix?ti(r.nestingPrefix):r.nestingPrefixEscaped||ti("$t("),this.nestingSuffix=r.nestingSuffix?ti(r.nestingSuffix):r.nestingSuffixEscaped||ti(")"),this.nestingOptionsSeparator=r.nestingOptionsSeparator?r.nestingOptionsSeparator:r.nestingOptionsSeparator||",",this.maxReplaces=r.maxReplaces?r.maxReplaces:1e3,this.alwaysFormat=r.alwaysFormat!==void 0?r.alwaysFormat:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){let t=`${this.prefix}(.+?)${this.suffix}`;this.regexp=new RegExp(t,"g");let r=`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`;this.regexpUnescape=new RegExp(r,"g");let n=`${this.nestingPrefix}(.+?)${this.nestingSuffix}`;this.nestingRegexp=new RegExp(n,"g")}interpolate(t,r,n,o){let i,s,a,A=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function c(u){return u.replace(/\$/g,"$$$$")}let g=u=>{if(u.indexOf(this.formatSeparator)<0){let Q=LD(r,A,u,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(Q,void 0,n,{...o,...r,interpolationkey:u}):Q}let m=u.split(this.formatSeparator),p=m.shift().trim(),C=m.join(this.formatSeparator).trim();return this.format(LD(r,A,p,this.options.keySeparator,this.options.ignoreJSONStructure),C,n,{...o,...r,interpolationkey:p})};this.resetRegExp();let d=o&&o.missingInterpolationHandler||this.options.missingInterpolationHandler,l=o&&o.interpolation&&o.interpolation.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:u=>c(u)},{regex:this.regexp,safeValue:u=>this.escapeValue?c(this.escape(u)):c(u)}].forEach(u=>{for(a=0;i=u.regex.exec(t);){let m=i[1].trim();if(s=g(m),s===void 0)if(typeof d=="function"){let C=d(t,i,o);s=typeof C=="string"?C:""}else if(o&&Object.prototype.hasOwnProperty.call(o,m))s="";else if(l){s=i[0];continue}else this.logger.warn(`missed to pass in variable ${m} for interpolating ${t}`),s="";else typeof s!="string"&&!this.useRawValueToEscape&&(s=PD(s));let p=u.safeValue(s);if(t=t.replace(i[0],p),l?(u.regex.lastIndex+=s.length,u.regex.lastIndex-=i[0].length):u.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),t}nest(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o,i,s;function a(A,c){let g=this.nestingOptionsSeparator;if(A.indexOf(g)<0)return A;let d=A.split(new RegExp(`${g}[ ]*{`)),l=`{${d[1]}`;A=d[0],l=this.interpolate(l,s);let f=l.match(/'/g),u=l.match(/"/g);(f&&f.length%2===0&&!u||u.length%2!==0)&&(l=l.replace(/'/g,'"'));try{s=JSON.parse(l),c&&(s={...c,...s})}catch(m){return this.logger.warn(`failed parsing options string in nesting for key ${A}`,m),`${A}${g}${l}`}return delete s.defaultValue,A}for(;o=this.nestingRegexp.exec(t);){let A=[];s={...n},s=s.replace&&typeof s.replace!="string"?s.replace:s,s.applyPostProcessor=!1,delete s.defaultValue;let c=!1;if(o[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(o[1])){let g=o[1].split(this.formatSeparator).map(d=>d.trim());o[1]=g.shift(),A=g,c=!0}if(i=r(a.call(this,o[1].trim(),s),s),i&&o[0]===t&&typeof i!="string")return i;typeof i!="string"&&(i=PD(i)),i||(this.logger.warn(`missed to resolve ${o[1]} for nesting ${t}`),i=""),c&&(i=A.reduce((g,d)=>this.format(g,d,n.lng,{...n,interpolationkey:o[1].trim()}),i.trim())),t=t.replace(o[0],i),this.regexp.lastIndex=0}return t}};function E8(e){let t=e.toLowerCase().trim(),r={};if(e.indexOf("(")>-1){let n=e.split("(");t=n[0].toLowerCase().trim();let o=n[1].substring(0,n[1].length-1);t==="currency"&&o.indexOf(":")<0?r.currency||(r.currency=o.trim()):t==="relativetime"&&o.indexOf(":")<0?r.range||(r.range=o.trim()):o.split(";").forEach(s=>{if(!s)return;let[a,...A]=s.split(":"),c=A.join(":").trim().replace(/^'+|'+$/g,"");r[a.trim()]||(r[a.trim()]=c),c==="false"&&(r[a.trim()]=!1),c==="true"&&(r[a.trim()]=!0),isNaN(c)||(r[a.trim()]=parseInt(c,10))})}return{formatName:t,formatOptions:r}}function ri(e){let t={};return function(n,o,i){let s=o+JSON.stringify(i),a=t[s];return a||(a=e(Rc(o),i),t[s]=a),a(n)}}var Cu=class{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=hr.create("formatter"),this.options=t,this.formats={number:ri((r,n)=>{let o=new Intl.NumberFormat(r,{...n});return i=>o.format(i)}),currency:ri((r,n)=>{let o=new Intl.NumberFormat(r,{...n,style:"currency"});return i=>o.format(i)}),datetime:ri((r,n)=>{let o=new Intl.DateTimeFormat(r,{...n});return i=>o.format(i)}),relativetime:ri((r,n)=>{let o=new Intl.RelativeTimeFormat(r,{...n});return i=>o.format(i,n.range||"day")}),list:ri((r,n)=>{let o=new Intl.ListFormat(r,{...n});return i=>o.format(i)})},this.init(t)}init(t){let n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||","}add(t,r){this.formats[t.toLowerCase().trim()]=r}addCached(t,r){this.formats[t.toLowerCase().trim()]=ri(r)}format(t,r,n){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return r.split(this.formatSeparator).reduce((a,A)=>{let{formatName:c,formatOptions:g}=E8(A);if(this.formats[c]){let d=a;try{let l=o&&o.formatParams&&o.formatParams[o.interpolationkey]||{},f=l.locale||l.lng||o.locale||o.lng||n;d=this.formats[c](a,f,{...g,...o,...l})}catch(l){this.logger.warn(l)}return d}else this.logger.warn(`there was no format function for ${c}`);return a},t)}};function y8(e,t){e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)}var Bu=class extends ni{constructor(t,r,n){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=t,this.store=r,this.services=n,this.languageUtils=n.languageUtils,this.options=o,this.logger=hr.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=o.maxParallelReads||10,this.readingCalls=0,this.maxRetries=o.maxRetries>=0?o.maxRetries:5,this.retryTimeout=o.retryTimeout>=1?o.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(n,o.backend,o)}queueLoad(t,r,n,o){let i={},s={},a={},A={};return t.forEach(c=>{let g=!0;r.forEach(d=>{let l=`${c}|${d}`;!n.reload&&this.store.hasResourceBundle(c,d)?this.state[l]=2:this.state[l]<0||(this.state[l]===1?s[l]===void 0&&(s[l]=!0):(this.state[l]=1,g=!1,s[l]===void 0&&(s[l]=!0),i[l]===void 0&&(i[l]=!0),A[d]===void 0&&(A[d]=!0)))}),g||(a[c]=!0)}),(Object.keys(i).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:o}),{toLoad:Object.keys(i),pending:Object.keys(s),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(A)}}loaded(t,r,n){let o=t.split("|"),i=o[0],s=o[1];r&&this.emit("failedLoading",i,s,r),n&&this.store.addResourceBundle(i,s,n),this.state[t]=r?-1:2;let a={};this.queue.forEach(A=>{g8(A.loaded,[i],s),y8(A,t),r&&A.errors.push(r),A.pendingCount===0&&!A.done&&(Object.keys(A.loaded).forEach(c=>{a[c]||(a[c]={});let g=A.loaded[c];g.length&&g.forEach(d=>{a[c][d]===void 0&&(a[c][d]=!0)})}),A.done=!0,A.errors.length?A.callback(A.errors):A.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(A=>!A.done)}read(t,r,n){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,s=arguments.length>5?arguments[5]:void 0;if(!t.length)return s(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:r,fcName:n,tried:o,wait:i,callback:s});return}this.readingCalls++;let a=(c,g)=>{if(this.readingCalls--,this.waitingReads.length>0){let d=this.waitingReads.shift();this.read(d.lng,d.ns,d.fcName,d.tried,d.wait,d.callback)}if(c&&g&&o<this.maxRetries){setTimeout(()=>{this.read.call(this,t,r,n,o+1,i*2,s)},i);return}s(c,g)},A=this.backend[n].bind(this.backend);if(A.length===2){try{let c=A(t,r);c&&typeof c.then=="function"?c.then(g=>a(null,g)).catch(a):a(null,c)}catch(c){a(c)}return}return A(t,r,a)}prepareLoading(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),o&&o();typeof t=="string"&&(t=this.languageUtils.toResolveHierarchy(t)),typeof r=="string"&&(r=[r]);let i=this.queueLoad(t,r,n,o);if(!i.toLoad.length)return i.pending.length||o(),null;i.toLoad.forEach(s=>{this.loadOne(s)})}load(t,r,n){this.prepareLoading(t,r,{},n)}reload(t,r,n){this.prepareLoading(t,r,{reload:!0},n)}loadOne(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=t.split("|"),o=n[0],i=n[1];this.read(o,i,"read",void 0,void 0,(s,a)=>{s&&this.logger.warn(`${r}loading namespace ${i} for language ${o} failed`,s),!s&&a&&this.logger.log(`${r}loaded namespace ${i} for language ${o}`,a),this.loaded(t,s,a)})}saveMissing(t,r,n,o,i){let s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(r)){this.logger.warn(`did not save key "${n}" as the namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if(this.backend&&this.backend.create){let A={...s,isUpdate:i},c=this.backend.create.bind(this.backend);if(c.length<6)try{let g;c.length===5?g=c(t,r,n,o,A):g=c(t,r,n,o),g&&typeof g.then=="function"?g.then(d=>a(null,d)).catch(a):a(null,g)}catch(g){a(g)}else c(t,r,n,o,a,A)}!t||!t[0]||this.store.addResource(t[0],r,n,o)}}};function KD(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){let r={};if(typeof t[1]=="object"&&(r=t[1]),typeof t[1]=="string"&&(r.defaultValue=t[1]),typeof t[2]=="string"&&(r.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){let n=t[3]||t[2];Object.keys(n).forEach(o=>{r[o]=n[o]})}return r},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function JD(e){return typeof e.ns=="string"&&(e.ns=[e.ns]),typeof e.fallbackLng=="string"&&(e.fallbackLng=[e.fallbackLng]),typeof e.fallbackNS=="string"&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function Fc(){}function Q8(e){Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(r=>{typeof e[r]=="function"&&(e[r]=e[r].bind(e))})}var Uc=class e extends ni{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(super(),this.options=JD(t),this.services={},this.logger=hr,this.modules={external:[]},Q8(this),r&&!this.isInitialized&&!t.isClone){if(!this.options.initImmediate)return this.init(t,r),this;setTimeout(()=>{this.init(t,r)},0)}}init(){var t=this;let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;typeof r=="function"&&(n=r,r={}),!r.defaultNS&&r.defaultNS!==!1&&r.ns&&(typeof r.ns=="string"?r.defaultNS=r.ns:r.ns.indexOf("translation")<0&&(r.defaultNS=r.ns[0]));let o=KD();this.options={...o,...this.options,...JD(r)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...o.interpolation,...this.options.interpolation}),r.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=r.keySeparator),r.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=r.nsSeparator);function i(g){return g?typeof g=="function"?new g:g:null}if(!this.options.isClone){this.modules.logger?hr.init(i(this.modules.logger),this.options):hr.init(null,this.options);let g;this.modules.formatter?g=this.modules.formatter:typeof Intl<"u"&&(g=Cu);let d=new Mc(this.options);this.store=new Nc(this.options.resources,this.options);let l=this.services;l.logger=hr,l.resourceStore=this.store,l.languageUtils=d,l.pluralResolver=new mu(d,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),g&&(!this.options.interpolation.format||this.options.interpolation.format===o.interpolation.format)&&(l.formatter=i(g),l.formatter.init(l,this.options),this.options.interpolation.format=l.formatter.format.bind(l.formatter)),l.interpolator=new hu(this.options),l.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},l.backendConnector=new Bu(i(this.modules.backend),l.resourceStore,l,this.options),l.backendConnector.on("*",function(f){for(var u=arguments.length,m=new Array(u>1?u-1:0),p=1;p<u;p++)m[p-1]=arguments[p];t.emit(f,...m)}),this.modules.languageDetector&&(l.languageDetector=i(this.modules.languageDetector),l.languageDetector.init&&l.languageDetector.init(l,this.options.detection,this.options)),this.modules.i18nFormat&&(l.i18nFormat=i(this.modules.i18nFormat),l.i18nFormat.init&&l.i18nFormat.init(this)),this.translator=new Tc(this.services,this.options),this.translator.on("*",function(f){for(var u=arguments.length,m=new Array(u>1?u-1:0),p=1;p<u;p++)m[p-1]=arguments[p];t.emit(f,...m)}),this.modules.external.forEach(f=>{f.init&&f.init(this)})}if(this.format=this.options.interpolation.format,n||(n=Fc),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){let g=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);g.length>0&&g[0]!=="dev"&&(this.options.lng=g[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(g=>{this[g]=function(){return t.store[g](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(g=>{this[g]=function(){return t.store[g](...arguments),t}});let A=ds(),c=()=>{let g=(d,l)=>{this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),A.resolve(l),n(d,l)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return g(null,this.t.bind(this));this.changeLanguage(this.options.lng,g)};return this.options.resources||!this.options.initImmediate?c():setTimeout(c,0),A}loadResources(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Fc,o=typeof t=="string"?t:this.language;if(typeof t=="function"&&(n=t),!this.options.resources||this.options.partialBundledLanguages){if(o&&o.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();let i=[],s=a=>{if(!a||a==="cimode")return;this.services.languageUtils.toResolveHierarchy(a).forEach(c=>{c!=="cimode"&&i.indexOf(c)<0&&i.push(c)})};o?s(o):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(A=>s(A)),this.options.preload&&this.options.preload.forEach(a=>s(a)),this.services.backendConnector.load(i,this.options.ns,a=>{!a&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(a)})}else n(null)}reloadResources(t,r,n){let o=ds();return t||(t=this.languages),r||(r=this.options.ns),n||(n=Fc),this.services.backendConnector.reload(t,r,i=>{o.resolve(),n(i)}),o}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&zD.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1))for(let r=0;r<this.languages.length;r++){let n=this.languages[r];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}}changeLanguage(t,r){var n=this;this.isLanguageChangingTo=t;let o=ds();this.emit("languageChanging",t);let i=A=>{this.language=A,this.languages=this.services.languageUtils.toResolveHierarchy(A),this.resolvedLanguage=void 0,this.setResolvedLanguage(A)},s=(A,c)=>{c?(i(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,o.resolve(function(){return n.t(...arguments)}),r&&r(A,function(){return n.t(...arguments)})},a=A=>{!t&&!A&&this.services.languageDetector&&(A=[]);let c=typeof A=="string"?A:this.services.languageUtils.getBestMatchFromCodes(A);c&&(this.language||i(c),this.translator.language||this.translator.changeLanguage(c),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(c)),this.loadResources(c,g=>{s(g,c)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(t),o}getFixedT(t,r,n){var o=this;let i=function(s,a){let A;if(typeof a!="object"){for(var c=arguments.length,g=new Array(c>2?c-2:0),d=2;d<c;d++)g[d-2]=arguments[d];A=o.options.overloadTranslationOptionHandler([s,a].concat(g))}else A={...a};A.lng=A.lng||i.lng,A.lngs=A.lngs||i.lngs,A.ns=A.ns||i.ns,A.keyPrefix=A.keyPrefix||n||i.keyPrefix;let l=o.options.keySeparator||".",f;return A.keyPrefix&&Array.isArray(s)?f=s.map(u=>`${A.keyPrefix}${l}${u}`):f=A.keyPrefix?`${A.keyPrefix}${l}${s}`:s,o.t(f,A)};return typeof t=="string"?i.lng=t:i.lngs=t,i.ns=r,i.keyPrefix=n,i}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;let n=r.lng||this.resolvedLanguage||this.languages[0],o=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;let s=(a,A)=>{let c=this.services.backendConnector.state[`${a}|${A}`];return c===-1||c===2};if(r.precheck){let a=r.precheck(this,s);if(a!==void 0)return a}return!!(this.hasResourceBundle(n,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||s(n,t)&&(!o||s(i,t)))}loadNamespaces(t,r){let n=ds();return this.options.ns?(typeof t=="string"&&(t=[t]),t.forEach(o=>{this.options.ns.indexOf(o)<0&&this.options.ns.push(o)}),this.loadResources(o=>{n.resolve(),r&&r(o)}),n):(r&&r(),Promise.resolve())}loadLanguages(t,r){let n=ds();typeof t=="string"&&(t=[t]);let o=this.options.preload||[],i=t.filter(s=>o.indexOf(s)<0);return i.length?(this.options.preload=o.concat(i),this.loadResources(s=>{n.resolve(),r&&r(s)}),n):(r&&r(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!t)return"rtl";let r=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=this.services&&this.services.languageUtils||new Mc(KD());return r.indexOf(n.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return new e(t,r)}cloneInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Fc,n=t.forkResourceStore;n&&delete t.forkResourceStore;let o={...this.options,...t,isClone:!0},i=new e(o);return(t.debug!==void 0||t.prefix!==void 0)&&(i.logger=i.logger.clone(t)),["store","services","language"].forEach(a=>{i[a]=this[a]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},n&&(i.store=new Nc(this.store.data,o),i.services.resourceStore=i.store),i.translator=new Tc(i.services,o),i.translator.on("*",function(a){for(var A=arguments.length,c=new Array(A>1?A-1:0),g=1;g<A;g++)c[g-1]=arguments[g];i.emit(a,...c)}),i.init(o,r),i.translator.options=o,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}},Me=Uc.createInstance();Me.createInstance=Uc.createInstance;var Exe=Me.createInstance,yxe=Me.dir,Qxe=Me.init,wxe=Me.loadResources,Sxe=Me.reloadResources,xxe=Me.use,bxe=Me.changeLanguage,Dxe=Me.getFixedT,kxe=Me.t,Fxe=Me.exists,_xe=Me.setDefaultNamespace,vxe=Me.hasLoadedNamespace,Rxe=Me.loadNamespaces,Nxe=Me.loadLanguages;var Zt=J(ie());async function yu({image:e,type:t,quality:r=1}){if(e instanceof Blob||e instanceof ImageBitmap)return w8({image:e,type:t,quality:r});if(typeof e=="string"){let i=e;e=new Image,e.src=i}e.complete||await e.decode();let n=new OffscreenCanvas(e.naturalWidth,e.naturalHeight);return n.getContext("2d").drawImage(e,0,0),n.convertToBlob({type:t,quality:r})}async function w8({image:e,type:t,quality:r=1}){if(e instanceof Blob&&e.type===t)return e;let n=e instanceof Blob?await createImageBitmap(e):e,o=new OffscreenCanvas(n.width,n.height);return o.getContext("2d").drawImage(n,0,0),o.convertToBlob({type:t,quality:r})}async function YD(e){let r=br(`/i18n/${e}.json`);return await(await fetch(r)).json()}function Qu(e){return!Zt.default.sidePanel||!Zt.default.sidePanel.open||e?.windowId===void 0?!1:Zt.default.sidePanel.open({windowId:e?.windowId}).then(async()=>Zt.default.runtime.getContexts?await Zt.default.runtime.getContexts({contextTypes:["SIDE_PANEL"]}).then(r=>r.length>0):!1).catch(t=>!1)}function XD(e,t,r=new Map,n){for(let{children:o,i18nKey:i,...s}of e)t&&Zt.default.contextMenus.create({...n?{parentId:n.id,contexts:n.contexts,documentUrlPatterns:n.documentUrlPatterns}:null,...s}),i&&r.set(s.id,i),o&&XD(o,t,r,s);return r}function WD(e,t){let r=XD(e,t);return function(){let o=Lt.English;Me.init({resources:{},lng:"en",fallbackLng:"en",interpolation:{escapeValue:!1,defaultVariables:{APP_NAME:LB,AI:"AI"}}}).then(()=>W("language",Lt.English)).then(i=>{i!==o&&(o=i,jD(i,r))}).finally(()=>{cl.subscribe(i=>{if(!Cl(i,"language"))return;let s=i.language.newValue;s&&s!==o&&(o=s,jD(s,r))})})}}async function jD(e,t){if(!Me.hasResourceBundle(e,"translation")){let n=await YD(e);Me.addResourceBundle(e,"translation",n)}let r=Me.getFixedT(e,"translation");for(let[n,o]of t.entries())Zt.default.contextMenus.update(n,{title:r(o)})}function ZD(){let e=[{contexts:["action"],id:"open-full-page-chat",title:"Open Full Page Chat",i18nKey:"contextMenu.openFullPageChat"},{id:"ai-page-tools",contexts:["page","link"],documentUrlPatterns:["http://*/*","https://*/*"],title:"Sider",children:[{id:"open-full-page-chat",title:"Open Full Page Chat",i18nKey:"contextMenu.openFullPageChat"},{id:"summarize-page",title:"Summarize the page",i18nKey:"contextMenu.summarizePage"},{id:"translate-page",title:"Translate to English",i18nKey:"contextMenu.translatePage"},{id:"save-page",title:"Save the page to wisebase",i18nKey:"contextMenu.savePage"}]},{contexts:["selection"],id:"ai-selection-tools",title:"Sider",children:[{id:"chat-selection",title:"Chat with selected text",i18nKey:"contextMenu.chatSelection"},{id:"highlight-selection",title:"Highlight selected text",i18nKey:"contextMenu.highlightSelection"}]},{contexts:["image"],id:"ai-image-tools",title:"AI Image Tools",i18nKey:"contextMenu.imageTools",children:[{id:"chat-with-image",title:"Chat with Image",i18nKey:"imageToolbar.chatWithImage"},{id:"extract-text-from-image",title:"Extract Text",i18nKey:"imageToolbar.extractText"},{id:"remove-background",title:"Remove Background",i18nKey:"imageToolbar.removeBackground"},{id:"remove-text",title:"Remove Text",i18nKey:"imageToolbar.removeText"},{id:"reomve-brushed-area",title:"Remove Brushed Area",i18nKey:"imageToolbar.inpaint"},{id:"replace-background",title:"Replace Background",i18nKey:"imageToolbar.replaceBackground"},{id:"upscale-image",title:"Upscale",i18nKey:"imageToolbar.upscale"},{id:"variation",title:"Create Variations",i18nKey:"imageToolbar.variation"}]}];Zt.default.runtime.onInstalled.addListener(()=>{WD(e,!0)}),Zt.default.contextMenus.onClicked.addListener((r,n)=>{switch(r.menuItemId){case"open-full-page-chat":{Bo();break}case"summarize-page":{let o=n?.id;if(o===void 0)return;let i=Qu(n);i&&i.then(()=>{Ft("summarize-page-from-contextmenu",null,{tabId:o})});break}case"translate-page":{let o=n?.id;if(o===void 0)return;Ft("translate-page-from-contextmenu",null,{tabId:o});break}case"save-page":{let o=n?.id;if(o===void 0)return;Ft("save-page-from-contextmenu",null,{tabId:o});break}case"chat-selection":{return Qu(n),Zt.default.storage.local.set({initialSelectionText:r.selectionText,lastTab:"chat"}).then(()=>{});break}case"highlight-selection":{let o=n?.id;if(o===void 0)return;Ft("highlight-page-from-contextmenu",null,{tabId:o});break}case"chat-with-image":case"extract-text-from-image":{(async function(){let o=r.srcUrl;if(!o)return;let i=r.menuItemId==="chat-with-image",s=["image/png","image/jpeg"];await Qu(n),en("lastTab",i?"chat":"ocr");let A=await(await fetch(o)).blob(),c=await createImageBitmap(A);s.includes(A.type)||(A=await yu({image:c,type:"image/png"}));let g=await Dr(A),d=!1;for await(let l of b0())if(l){d=!0;break}Ft(i?"send-image-to-chat":"send-image-to-ocr",{base64:g,imageUrl:o,width:c.width,height:c.height,type:A.type},d?{view:"sidebar"}:{tabId:n?.id})})();break}case"upscale-image":case"remove-background":case"remove-text":case"replace-background":case"reomve-brushed-area":case"variation":{let o=r.menuItemId,i=r.srcUrl;if(!i)return;(async function(){let s=["image/png","image/jpeg"],A=await(await fetch(i)).blob(),c=await createImageBitmap(A);s.includes(A.type)||(A=await yu({image:c,type:"image/png"}));let g=await Dr(A),d=await new Promise(async(l,f)=>{let u=new AbortController,m=setTimeout(()=>{u.abort(),l(p)},1e4);Xe("website-painter-ready",({sender:C})=>{C.tab?.id===p.id&&(u.abort(),clearTimeout(m),l(p))},{signal:u.signal});let p=await Jf({subRoute:Bl(o,{variation:"painter",_:o}),hasDataToSend:!0})});Ft("send-image-to-image-tools",{toolName:o,base64:g,imageUrl:i,width:c.width,height:c.height,type:A.type},{tabId:d.id})})()}}}),WD(e,!1)()}var Oc=J(ie());var wu="do_ocr";async function Su(e){Oc.default.runtime.sendMessage({type:"is-sidepanel-open"}).then(r=>{r?Oc.default.runtime.sendMessage({type:wu,data:{img:e,isForSidepanel:!0}}):t()}).catch(t);async function t(){oE({url:br("standalone.html")}),await xn(500),Oc.default.runtime.sendMessage({type:wu,data:{img:e,isForSidepanel:!1}})}}async function xu(){if(await W("language"))return;let t=navigator.languages;for(let r of t){r=r.replace("-","_");let n=r.split("_");n[0]=n[0].toLowerCase(),n[1]&&(n[1]=n[1].toUpperCase()),r=n.join("_");let o="";if(r in dl?o=r:o=Object.keys(dl).find(i=>n[0]===i.split("_")[0])||"",o){await N({__DONT_SYNC__:`language${Date.now()}`,language:o});return}}await N({__DONT_SYNC__:`language${Date.now()}`,language:Lt.English})}var $D=J(ie());function ek(){$D.default.storage.local.onChanged.addListener(e=>{if(e.__DONT_SYNC__?.newValue)return;let t=Object.keys(e).filter(r=>r in Ia);t.length&&S8(t)})}var tk=async e=>{if(!await it())return;await rk();let r=await z(e);r["provider:gpt3"]&&(r["provider:gpt3"].apiKey=""),oi(r,"translatorHostConfig"),oi(r,"quickActionInputIconDisabledHost"),oi(r,"sidebarFabDisabledHost"),oi(r,"webAssistantImageDisabledHost"),oi(r,"pageTranslationNeverHost"),oi(r,"inputTranslationDisabledHost"),Z.setUserSettings(r)},bu=new Map,S8=e=>{let t=e.sort().toString();bu.has(t)||bu.set(t,Bt(tk,1e3)),bu.get(t)?.(e)},rk=async()=>{let{allPromptList:e}=await W(["allPromptList"]),t=!1;t=!1,e&&(await Promise.all(e.map(async r=>{if(!r.id){t=!0;let n=await Z.createPrompt({key:r.key,name:r.name,content:r.content,use:r.usedIn,icon:r.icon});r.id=String(n.id)}})),t&&await N({__DONT_SYNC__:`unsavedSidebarTpl${Date.now()}`,allPromptList:e}))},nk=async()=>{if(!await it())throw new Error("login required");await rk(),await x8()};async function x8(){let e=Object.keys(Ia),t={...await Z.getUserSettings()||{}};if(!t||!Object.keys(t).length){await tk(e);return}for(let o of Object.keys(t))(!(o in Ia)||t[o]===null)&&delete t[o];let r=await z(e),n;r["provider:gpt3"]&&(n=r["provider:gpt3"].apiKey),ii(t,"translatorHostConfig"),ii(t,"quickActionInputIconDisabledHost"),ii(t,"sidebarFabDisabledHost"),ii(t,"webAssistantImageDisabledHost"),ii(t,"pageTranslationNeverHost"),ii(t,"inputTranslationDisabledHost"),["chatVisiblePromptKeys","readVisiblePromptKeys","writeVisiblePromptKeys"].forEach(o=>{delete t[o]}),mi(r,t,{"provider:gpt3":{apiKey:n}},(o,i)=>{if(Array.isArray(o))return i}),await N({__DONT_SYNC__:`pullFromCloud${Date.now()}`,...r})}function oi(e,t){let r=[];if(e[t]&&typeof e[t]=="object"&&!Array.isArray(e[t])){for(let[n,o]of Object.entries(e[t]))n!=="undefined"&&r.push({__key__:n,...o||{}});e[t]=r}}function ii(e,t){let r={};if(Array.isArray(e[t])){for(let n of e[t])n.__key__&&n.__key__!=="undefined"&&(r[n.__key__]=n,delete n.__key__);e[t]=r}}function ok(){fl("logged",e=>{b8(!!e.logged?.newValue)}),fl(["language"],async e=>{if(typeof e.language?.oldValue>"u")return;await it()&&Z.getAllPromptList(),Ge("systemVoiceDemoText")})}var b8=e=>{e?D8():k8()},D8=Bt(()=>{fs()},3e3,{leading:!0}),k8=()=>{Ge("userInfo")},ik=gr(async()=>{let{__invited_reward_finish__:e}=await z({__invited_reward_finish__:!1});if(e)return;if(await it()){let r=await Z.inviteFinish();r.is_invited&&r.is_rewarded&&(N({userIsInvited:!0,inviteRewardConfig:{"gpt3.5":r.reward.GPT3Dot5Count,gpt4:r.reward.GPT4Count}}),r.already_rewarded||N({__show_invited_reward__:!0})),N({__invited_reward_finish__:!0})}},1e4);function Gr(e,t=0){return gE(e,async()=>{switch(e){case"getVipPeriodInfo":await Z.getVipPeriodInfo();break;case"getVipInfo":await Z.getVipInfo();break;case"getUserInfo":await Z.getUserInfo();break;case"getUserStatus":await Z.getUserStatus();break;case"pullSettingsFromCloud":await nk();break;case"inviteFinishCallback":await ik();break;case"getPricingPlan":await Z.getPricingPlan();break;case"getAllPromptList":await Z.getAllPromptList();break;case"getClientConfig":await Z.getClientConfig();break;case"getVoiceRoleList":await Z.getVoiceRoleList();break;case"getDomainPool":await NE();break;case"getWisebaseAllSavedUrls":await f0();break;case"syncWisebaseAllSavedUrls":await pc();break;case"getWisebases":await jo();break;default:break}},t)()}async function fs(e){await Ge("__manual_logout__"),await xu();let t=await it();N({logged:t}),sk([],e)}async function sk(e,t){let r=await it(),o=[{name:"getAllPromptList",cacheDuration:1/0},{name:"getPricingPlan",cacheDuration:864e5},{name:"getClientConfig",cacheDuration:1/0},{name:"getDomainPool",cacheDuration:1/0},...r?[{name:"getVipPeriodInfo",cacheDuration:864e5},{name:"getUserInfo",cacheDuration:864e5},{name:"getUserStatus",cacheDuration:864e5},{name:"getVipInfo",cacheDuration:1/0},{name:"pullSettingsFromCloud",cacheDuration:1/0},{name:"getVoiceRoleList",cacheDuration:6048e5},{name:"inviteFinishCallback",cacheDuration:1/0},{name:"getWisebaseAllSavedUrls",cacheDuration:1/0},{name:"getWisebases",cacheDuration:1/0}]:[]],i=e&&e.length>0?o.filter(s=>e.includes(s.name)):o;await _8(i.map(s=>Gr(s.name,s.cacheDuration)))}async function _8(e){let t=[];(await Promise.allSettled(e)).forEach(n=>{if(n.status==="rejected"){let o=n.reason?.message;o&&t.push(o)}}),t.length>0?await N({__requestDataFailedJobNames__:t}):await Ge("__requestDataFailedJobNames__")}async function ak(){return(await Ak()).length>0}async function Ak(){let{__requestDataFailedJobNames__:e}=await z({__requestDataFailedJobNames__:[]});return e}async function ck(){let e=await Ak();e.length>0&&await sk(e)}var gk=J(ie());async function lk(){let e={},t=["p","p1","p2"],r=ze?`https://*.microsoft.com/*${Ei}*`:`https://*.google.com/*${Ei}*`,n=await gk.default.tabs.query({url:r,currentWindow:!0});if(n.length){n.reverse();for(let o of n){let i=o.url||le.origin,{searchParams:s}=new URL(i),a=!1;for(let[A,c]of s.entries())t.includes(A)&&c&&(a=!0,e[A]=c);if(a)break}}if(Object.keys(e).length>0)for(let[o,i]of Object.entries(e))await pl(o==="p"?"source":o,i,7);else for(let o of t){let i=await pa(o==="p"?"source":o);i&&(e[o]=i)}if(Object.keys(e).length){Z.adStat({action:"install-sider-successfully",source:e.p||"",p1:e.p1||"",p2:e.p2||""});let o=v8(e.p1||""),i={installByAD:!0,onBoardFrom:o};(o==="grammar"||o==="translate"||o==="write"||o==="ocr")&&(i.lastTab=o==="write"?"compose":o),await N(i)}}function v8(e){return e.includes("ytb")?"ytb":e.includes("translate")?"translate":e.includes("ocr")?"ocr":e.includes("write")?"write":e.includes("bgremover")?"bgremover":e.includes("chatpdf")?"pdf":e.includes("summarizer")?"summary":e.includes("grammar")?"grammar":e.includes("image")?"painter":e.includes("email")?"email":""}var Du=J(ie());var dk="OpenAI";async function R8(e,t){let r=await Du.default.storage.local.get("provider:gpt3"),{apiKey:n,enableCustomURL:o,customURL:i}=r["provider:gpt3"];if(n){let s=o&&i?ha(i):N8;return fetch(s+t,{method:e,headers:{"Content-Type":"application/json",Authorization:`Bearer ${r["provider:gpt3"].apiKey}`}}).then(a=>a.json())}else return!1}async function fk(){return R8("GET","/v1/models")}var N8="https://api.openai.com",Gc=class{constructor(t,r,n){this.token=t;this.model=r;this.url=n;this.token=t,this.model=r,this.url=n}async generateAnswer(t){let r="",n=tn(this.url?this.url:"https://api.openai.com","/v1","/chat/completions"),o=await Du.default.storage.local.get({enableCustomModelName:!1,customModelName:""}),i={model:o.enableCustomModelName&&o.customModelName?o.customModelName:t.model||this.model,stream:!0};Array.isArray(t.prompt)?i.messages=t.prompt:i.messages=[{role:"user",content:t.prompt}],await Zo(n,{method:"POST",signal:t.signal,headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`},body:JSON.stringify(i),onMessage(s){if(s==="[DONE]"){t.onEvent({type:"done"});return}let a;try{a=JSON.parse(s);let A=a.choices[0].delta.content;if(A==="<|im_end|>"||A==="<|im_sep|>"||!A)return;r+=A,t.onEvent({type:"answer",data:{text:r,messageId:a.id,conversationId:""}})}catch{return}}}).catch(s=>{let a=s.message;try{let A=JSON.parse(a);if(a=A.message||A.msg||A.error?.message||A.detail?.message||a,[502,503].includes(A.responseStatus))throw new Error(`${dk}: error_service_unavailable`)}catch{}throw new Error(`${dk}: ${a}`)})}};var pk=J(ie());var Hc=class{constructor(){this.results=[];this.lastText="";this.lastTextIndex=-1}parse(t){return t.type==="text"?this.handleTextMsg(t):t.type==="tool_call"?this.handleToolCallMsg(t):t.type==="llm_status"?this.handleLLMStatusMsg(t):t.type==="image"?this.handleImageMsg(t):t.type==="data_analysis_image"?this.handleDataAnalysisImage(t):t.type==="key_moments"?this.handleKeyMomentsMsg(t):t.type==="file_highlight"?this.handleFileHighlightMsg(t):t.type==="notification"&&this.handleNotificationMsg(t),t.type!=="text"&&(this.lastText="",this.lastTextIndex=-1),this.results}getLastResult(){return this.results[this.results.length-1]}handleLLMStatusMsg(t){let r=t.llm_status.id,n=this.results.findIndex(o=>o.id===r);this.results[n]?this.results[n]={...t.llm_status}:this.results.push({type:"llmStatus",id:r,status:t.llm_status.status,data:t.llm_status.data})}handleNotificationMsg(t){this.results.push({type:"notification",id:me(),notification:t.notification})}handleKeyMomentsMsg(t){t.key_moments&&this.results.push({type:"videoKeyMoments",keyMoments:t.key_moments,id:me()})}handleTextMsg(t){if(t.text)if(this.lastText){let r=this.lastText+t.text,n=uk(r),o=this.results.splice(this.lastTextIndex),i=M8(o,n.map(s=>({type:s.type==="markdown"?"text":s.type==="artifact"?"artifact":"thinking",text:s.type==="artifact"?s.content.replace(/^\n```(.*)\n/,`
`).replace(/```\n$/,`
`).replace(/^```(.*)\n/,`
`).replace(/```$/,`
`):s.content,attrs:s.type==="artifact"?s.attributes:{},status:s.type==="artifact"||s.type==="thinking"?s.isFinished?"finish":"start":void 0,id:me()})));this.results=this.results.concat(i),this.lastText=r}else{if(t.text.trim()===""){this.lastText=t.text,this.results.push({type:"text",text:t.text,id:me()}),this.lastTextIndex=this.results.length-1;return}let r=uk(t.text);/<Thinking/.test(t.text)&&r.length===0&&r.push({type:"thinking",content:"",isFinished:!1}),/<Artifact/.test(t.text)&&r.length===0&&r.push({type:"artifact",content:"",attributes:{},isFinished:!1}),this.results=this.results.concat(r.map(n=>({type:n.type==="markdown"?"text":n.type==="artifact"?"artifact":"thinking",text:n.type==="artifact"?n.content.replace(/^\n```(.*)\n/,`
`).replace(/```\n$/,`
`).replace(/^```(.*)\n/,`
`).replace(/```$/,`
`):n.content,attrs:n.type==="artifact"?n.attributes:{},status:n.type==="artifact"||n.type==="thinking"?n.isFinished?"finish":"start":void 0,id:me(),createAt:Date.now()}))),this.lastTextIndex=this.results.length-1,this.lastText=t.text}}handleToolCallMsg(t){let r=t.tool_call.id+(t.tool_call.data&&typeof t.tool_call.data.tool_call_id<"u"?t.tool_call.data.tool_call_id:"");if(t.tool_call.status==="start")this.results.push({type:"toolCall",id:r,status:t.tool_call.status,name:t.tool_call.name,data:t.tool_call.data});else if(t.tool_call.status==="processing"){let n=this.results.findIndex(i=>i.id===r),o=this.results[n];o&&(o.data={...o.data,...t.tool_call.data})}else if(t.tool_call.status==="finish"||t.tool_call.status==="fail"){let n=this.results.findIndex(i=>i.id===r),o=this.results[n];o&&(o.data={...o.data,...t.tool_call.data},o.status=t.tool_call.status)}}handleImageMsg(t){this.results.push({type:"siderImage",id:me(),images:t.images.images})}handleDataAnalysisImage(t){this.results.push({type:"siderImage",id:me(),images:[t.data_analysis_image]})}handleFileHighlightMsg(t){this.results.push({type:"fileHighlights",id:me(),highlights:t.highlights})}};function uk(e,t){let r=e.split(/(<Artifact[^>]*>?|<\/Artifact>|<Thinking>|<\/Thinking>)/),n=!1,o=!1,i={},s=[],a="",A=null,c=null,g=null,d="";for(let l=0;l<r.length;l++){let f=r[l];f.startsWith("<Artifact")?(a&&(s.push({type:"markdown",content:a.trim()}),a=""),f.endsWith(">")?(n=!0,i=T8(f),c={type:"artifact",content:"",attributes:i,isFinished:!1},t&&i.id===t&&(A=c)):d=f):f==="</Artifact>"?n&&c?(n=!1,c.isFinished=!0,c.content=c.content.trim(),A!==c&&s.push(c),c=null):d+=f:f==="<Thinking>"?(a&&(s.push({type:"markdown",content:a.trim()}),a=""),o=!0,g={type:"thinking",content:"",isFinished:!1}):f==="</Thinking>"?o&&g&&(o=!1,g.isFinished=!0,g.content=g.content.trim(),s.push(g),g=null):n?c&&(c.content+=f):o?g&&(g.content+=f):d?(d+=f,d.includes("<Artifact")||(a+=d,d="")):a+=f}return a&&s.push({type:"markdown",content:a.trim()}),c&&s.push(c),g&&s.push(g),A||(t?null:(s=s.filter(l=>!(l.type==="markdown"&&l.content.trim()==="")),s))}function T8(e){let t={},r=/(\w+)\s*=\s*(?:"([^"]*)"|'([^']*)'|([^>\s]+))/g,n;for(;(n=r.exec(e))!==null;){let[,o,i,s,a]=n;t[o]=i||s||a}return t}function M8(e,t){if(e.length>t.length)return e;let r=[...e],n=t.length,o=Math.max(0,e.length-n);for(let i=0;i<n;i++){let s=o+i;if(s<r.length)for(let a in t[i])a!=="id"&&(r[s][a]=t[i][a]);else r.push({...t[i]})}return r}function Ik(e){return/\${\s*(lang)\s*}/gi.test(e)}var qc=class{constructor(t){this.token="";this.refreshToken="";this.anonymous=!0;this.checkFileStatusTimer=null;this.cid=t}async getToken(){let t=await nn();this.token=t.token,this.refreshToken=t.refreshToken,this.anonymous=t.anonymous}async generateAnswer(t){let r={},n=null,o={};try{await this.getToken()}catch(y){throw new Error(y.errMsg)}if(!this.cid&&t.historyMsg)try{let{cid:y,lastMsgId:M}=await Z.uploadHistoryMsg(t.historyMsg);this.cid=y,this.tempLastMsgId=M}catch(y){throw new Error(y.errMsg)}let{[yi]:{model:i}}=await z({[yi]:{model:"sider"}}),s=t.model||i,a="",A="",c=!1;function g(){!c&&a&&A&&Z.statUserStop(a,A),n&&clearInterval(n)}t.getCleanupMethod?.(g);async function d(y){let M=y.join(","),{text_ready:T}=await Z.getFileStauts(M);return T}async function l(y){let{handle_msg:M,is_embedding:T}=await Z.getFileStauts(y),U=null;if(T)try{U=JSON.parse(M)}catch{if(M)throw new Error(M)}else U={accept_model:{"gpt-3.5":!0,"gpt-4":!0,"gpt-4o":!0,"gpt3.5-16k":!0,"claude-instant":!0,claude2:!0,"claude-3-haiku":!0,"claude-3-sonnet":!0,"claude-3.5-sonnet":!0,"claude-3-opus":!0,bard:!0,"gemini-pro":!0,"gemini-1.5-pro":!0,"gemini-1.5-flash":!0,gpts:!0,"llama-3":!0}};return U}async function f(y,M){let{fileTextStatus:T}=await pk.default.storage.local.get({fileTextStatus:{}});if(y.filter(L=>T[L]).length===y.length)return null;let U=await d(y);return U?(Qi(y,!0),null):new Promise((L,k)=>{n=setInterval(async()=>{try{U=await d(y),U&&(Qi(y,!0),n&&(clearInterval(n),L(null)))}catch(q){throw n&&clearInterval(n),new Error(q)}},1e3)})}t.eids&&t.sPromptTmpl&&!t.sPromptTmpl.key.includes("audio")&&await f(t.eids,s).catch(y=>{throw new Error("Getting file status error: "+y.toString())});let u=async(y,M,T)=>{try{return await Zo(y,{method:"POST",signal:t.signal,headers:{"Content-Type":"application/json",Authorization:this.token},body:JSON.stringify(M),onMessage(U){if(U=="[DONE]"){c=!0,t.onEvent({type:"done"});return}let L=JSON.parse(U);if(L.code!==0)throw new Error(JSON.stringify({code:L.code,msg:L.msg||L.message}));a=L.data.cid,A=L.data.message_id,N({lastMessageId:A}),T(L.data)}})}catch(U){let L=U.message,k=null;try{k=JSON.parse(L)}catch{}Di(k?.code,k?.msg||k?.message||L)}};function m(){let y={},M=t.autoTools||[];(t.freeTrailTool==="artifacts"||t.freeTrailTool==="thinking_mode")&&!M.includes(t.freeTrailTool)&&M.push(t.freeTrailTool);let T=t.sPromptTmpl?[t.sPromptTmpl]:[];if(!T.length){let U=[];(M.includes("artifacts")||M.includes("thinking_mode"))&&(M.includes("artifacts")&&U.push({key:"artifacts",attributes:{lang:"original"}}),M.includes("thinking_mode")&&U.push({key:"thinking_mode",attributes:{}}),T=U)}return y.auto=M.filter(U=>U!=="artifacts"&&U!=="thinking_mode"),t.forceSearch?y.force="search":T&&(Array.isArray(T)?T.length>0&&!T.some(U=>U?.key==="artifacts"||U?.key==="thinking_mode"):T&&T.key!=="artifacts"&&T.key!=="thinking_mode")&&(y.force="reader"),t.forceTool&&(y.force=t.forceTool),t.freeTrailTool&&(y.free_trial_tool=t.freeTrailTool,!y.force&&t.freeTrailTool!=="artifacts"&&t.freeTrailTool!=="thinking_mode"&&(y.force=t.freeTrailTool)),{tools:y,sPromptTmpl:T}}let p=new mc,C=await Kt(),Q=await wo(),{outputLanguage:R}=await z({outputLanguage:""}),B=Date.now(),D=0,{tools:E,sPromptTmpl:w}=m();await u(`${Q}/v3/completion/text`,{system:t.system,prompt:t.prompt,stream:!0,app_name:re,app_version:je,tz_name:Se,cid:this.cid,model:s,search:t.forceSearch,auto_search:t.autoSearch,filter_search_history:t.filterSearchHistory,from:t.from,re_answer_by_mid:t.sReqId,group_id:t.from==="chat"?"default":void 0,prompt_key:t.promptKey||void 0,chat_models:t.chatModels,image_id:t.imageId,eid:t.eid,files:t.eids,force_ocr:t.forceOcr,ocr_option:t.ocrOption,prompt_template:w.length===1&&w[0]&&!w[0].key.includes("video-summarize")&&!w[0].key.includes("audio-summarize")?w[0]:void 0,prompt_templates:w.length>1?w:void 0,deep_search:t.deepSearch,tools:E,extra_info:{origin_url:C?.url,origin_title:C?.title},video_summarize:t.sPromptTmpl?.key.includes("video-summarize")?{enable:!0,language:R&&R!=="auto"?ua[R].toLocaleUpperCase():t.sPromptTmpl?.attributes.lang}:void 0,audio_summarize:t.sPromptTmpl?.key.includes("audio-summarize")?{enable:!0,language:R&&R!=="auto"?ua[R].toLocaleUpperCase():t.sPromptTmpl?.attributes.lang}:void 0,search_option:t.searchOption,output_language:R&&await U8(t.from,t.promptKey)?R.replace("_","-"):void 0,parent_message_id:this.tempLastMsgId?this.tempLastMsgId:t.parentMessageId?t.parentMessageId:void 0,branch:!0},y=>{if(!y)return;if(typeof y.total<"u"){let L=y.chat_model?y.chat_model:s;y.quota_type==="fast_text"?L="gpt-3.5":y.quota_type==="advanced_text"&&(L="gpt-4");let k={[L]:{total:y.total,remain:y.remain,extraTotal:y.extra_total,extraRemain:y.extra_quota,period:y.remain_period,used:y.used}};zf().then(q=>{let Y=q[L];(Y.remain!==k[L].remain||Y.extraRemain!==k[L].extraRemain||Y.period!==k[L].period||Y.extraTotal!==k[L].extraTotal||Y.total!==k[L].total||Y.used!==k[L].used||Y.period!==k[L].period)&&(Y.remain+Y.extraRemain>k[L].remain+k[L].extraRemain||Y.used!==k[L].used||y.type==="quota")&&p.run(()=>Ur(k))})}y.type==="feature_used"&&y.feature_info&&Mr(y.quota_type==="fast_text"?"gpt-3.5":"gpt-4",y,y.feature_info);let M=y.text,T=y.chat_model||s;(M||y.type!=="pulse")&&(D===0&&(D=Date.now()-B),r[T]||(r[T]=""),o[T]||(o[T]={parser:null,contents:[]},o[T].parser=new Hc),M&&(r[y.chat_model]+=M),o[T].contents=o[T].parser.parse(y),t.onEvent({type:"answer",data:{text:r[T],contents:o[T].contents,messageId:y.message_id,serverRequestId:y.req_message_id,conversationId:y.cid,chatModel:y.chat_model}})),y.code&&y.code!==0&&t.onEvent({type:"error",data:{error:Ml(y.code,y.msg),chatModel:y.chat_model||s}}),y.done&&t.onEvent({type:"done",data:{chatModel:y.chat_model||s,done:!0}}),y.type==="tool_call"&&y.tool_call.name==="search"&&t.onEvent({type:"searchKeywords",data:{searchKeywords:y.tool_call.data.keywords,searchSnippets:y.tool_call.data.snippets,chatModel:y.chat_model}}),y.type==="deep_search"&&t.onEvent({type:"deepSearch",data:{deep_search:y.deep_search,cid:y.cid,message_id:y.message_id}})});try{T0.report("send_message",{conversation_id:this.cid,model:t.chatModels&&t.chatModels?.length>0?t.chatModels.join(","):s,prompt_id:t.promptKey||t.sPromptTmpl?.key,uploaded_files:t.eids?.join(","),tool_enabled:E.auto.join(",")})}catch{}}};async function U8(e,t){if(e==="translate"||e==="writing"||e==="ocr")return!1;if(!t)return!0;if(t.startsWith("translate"))return!1;let r=await W("allPromptList");if(r){let n=r.find(o=>{let i=o.key||o.id;return t===i});if(n)return Ik(n.content)?!0:n.isCustom}return!0}var hk=Bt(gr(async()=>{await it()&&(await ak()&&await ck(),await Promise.allSettled([Gr("getVipInfo",30*6e4),Gr("pullSettingsFromCloud",6*36e5),Gr("getAllPromptList",6*36e5),Gr("getClientConfig",36e5),Gr("getDomainPool",30*6e4),Gr("syncWisebaseAllSavedUrls",6*36e5)]))}),5e3,{leading:!0});var ku=J(ie());function Ck(e){ku.default.storage.local.get({userClickedWidgets:[]}).then(t=>{let r=e.filter(n=>!t.userClickedWidgets.includes(n));ku.default.storage.local.set({needShowTipWidgets:r})})}ok();ek();b.default.runtime.onStartup.addListener(()=>{b.default.storage.local.remove("searchAgentSuggestionsCache"),fs()});async function O8(e,{system:t,question:r,type:n,cid:o,historyMsg:i,model:s,chatModels:a,pluginIds:A,forceSearch:c,autoSearch:g,filterSearchHistory:d,from:l,promptKey:f,imageId:u,eids:m,forceOcr:p,ocrOption:C,forceProvider:Q,sPromptTmpl:R,parentMsgId:B,chatgptFiles:D,actionData:E,autoTools:w,forceTool:y,deepSearch:M,sReqId:T,searchOption:U,parentMessageId:L,freeTrailTool:k}){let q=await jB(),Y,ne=Q||q.provider;if(ne==="chatgpt"){let Ve=await st({onRefresh:()=>e.postMessage({event:"GUARD_TAB_REFRESHING"}),throwGuideError:!0});Y=new bc(Ve)}else if(ne==="gpt3"){let{apiKey:Ve,enableCustomURL:mn,customURL:si,model:_u}=q.configs.gpt3,Ek=mn&&si?ha(si):"";Y=new Gc(Ve,_u||ll,Ek)}else if(ne==="siderApi")Y=new qc(o);else throw new Error(`Unknown provider ${ne}`);let Ae=()=>{},ft=new AbortController;e.onDisconnect.addListener(()=>{ft.abort(),Ae?.()}),await Y.generateAnswer({system:t,prompt:r,type:n,signal:ft.signal,historyMsg:i,pluginIds:A,onEvent(Ve){if(Ve.type==="done"){Ve.data?.chatModel?e.postMessage(Ve.data):e.postMessage({event:"DONE"});return}e.postMessage(Ve.data)},getCleanupMethod(Ve){Ae=Ve},forceSearch:c,autoSearch:g,filterSearchHistory:d,from:l,promptKey:f,model:s,chatModels:a,imageId:u,eids:m,forceOcr:p,ocrOption:C,sPromptTmpl:R,cid:o,parentMsgId:B,chatgptFiles:D,actionData:E,autoTools:w,forceTool:y,deepSearch:M,sReqId:T,searchOption:U,parentMessageId:L,freeTrailTool:k})}var P8=async e=>{let t=await W("webAppModelsLastUpdateTime"),r=await W("webAppModels");if(e||!r||!t||t-Date.now()>1e3*60*60*24)return Promise.all([SD(),xD()]).then(([n,o])=>{let i=o.gizmos.reduce((a,A)=>(a[A.resource.gizmo.id]=A,a),{}),s=o.gizmos.map(a=>a.resource.gizmo.id);return b.default.storage.local.get(["webAppGPTs","selectWebAppModel"]).then(a=>{let c={...a.webAppGPTs||{},...i};$B.forEach(d=>{c[d]||(c[d]=eE[d])});let g={webAppGPTsList:s,webAppGPTs:c,webAppModels:n.models,webAppModelsLastUpdateTime:Date.now()};return a.selectWebAppModel||(n.models.some(d=>d.slug==="gpt-4")?g.selectWebAppModel="gpt-4":g.selectWebAppModel="text-davinci-002-render-sha"),b.default.storage.local.set(g)})})},G8=()=>fk().then(async e=>{if(e.data){let t=e.data.map(o=>({name:o.id})),r=await W("provider:gpt3"),n={apiModels:t};return r&&r.model&&(t.find(o=>o.name===r.model)||(n["provider:gpt3"]={...r,model:ll})),b.default.storage.local.set(n)}else return e.error?.message||"error"}),Fu=null;b.default.runtime.onConnect.addListener(e=>{if(e.name==="artifacts-page"){Fu&&clearTimeout(Fu),e.onDisconnect.addListener(()=>{Fu=setTimeout(()=>{b.default.storage.local.remove("artifactsData")},500)});return}if(e.name==="sidepanel"){e.onDisconnect.addListener(()=>{b.default.storage.local.set({sidebarLastCloseTime:Date.now(),webAppNetwork:null}),b.default.storage.local.remove("chatRequirements")}),e.onMessage.addListener(r=>{});return}Dl(e)||e.onMessage.addListener(async r=>{try{await O8(e,{system:r.system,question:r.question,type:r.type,cid:r.cid,historyMsg:r.historyMsg,chatModels:r.chatModels,model:r.model,pluginIds:r.pluginIds,autoSearch:r.autoSearch,forceSearch:r.forceSearch,filterSearchHistory:r.filterSearchHistory,from:r.from,promptKey:r.promptKey,imageId:r.imageId,eids:r.eids,forceOcr:r.forceOcr,ocrOption:r.ocrOption,forceProvider:r.forceProvider,sPromptTmpl:r.sPromptTmpl,parentMsgId:r.parentMsgId,chatgptFiles:r.chatgptFiles,actionData:r.actionData,autoTools:r.autoTools,forceTool:r.forceTool,deepSearch:r.deepSearch,sReqId:r.sReqId,searchOption:r.searchOption,parentMessageId:r.parentMessageId,freeTrailTool:r.freeTrailTool})}catch(n){e.postMessage({error:n.message})}})});ya("email-enhance-reply",e=>{e.onMessage(t=>{q0(t,{signal:e.signal,onStream(r){r.done?(e.send({done:!0}),e.close()):e.send({data:r.data})}}).catch(r=>{r.name!=="AbortError"&&(e.send({error:bn(r)}),e.close())})})});ya("email-enhance-summary",e=>{e.onMessage(t=>{H0(t,e.signal).then(r=>e.send({data:r})).catch(r=>{r.name!=="AbortError"&&e.send({error:bn(r)})}).finally(()=>e.close())})});b.default.runtime.onMessage.addListener(async(e,t)=>{let r=bl(e,t);if(r)return r;switch(e.type){case"FETCH_IN_BACKGROUND":return x0(e.data);case"FEEDBACK":{let n=await lu();await wD(n,e.data);break}case"OPEN_OPTIONS_PAGE":{ml(e.section,e.hash,e.otherParams);break}case"GET_ACCESS_TOKEN":return lu();case"SEND_CHATGPT":return gD({prompt:e.promt});case"IS_CHAT_LOGIN":return lE().then(n=>{t.tab?.id&&b.default.tabs.sendMessage(t.tab.id,{type:"CHAT_LOGIN_STATE",value:n}),b.default.runtime.sendMessage({type:"CHAT_LOGIN_STATE",value:n})});case"POPUP_OPEN":return us(e.isShow);case"OPEN_URL_IN_NEW_TAB":return b.default.tabs.create(e.details);case"OPEN_URL":{b.default.tabs.create({url:e.url});break}case"UPDATE_TAB":return nE(e.queryInfo,e.updateDetails);case"RELOAD_TAB":return ma(e.queryInfo,!0);case"SWITCH_TAB":return ma(e.queryInfo);case"GET_TAB_ZOOM":return b.default.tabs.getZoom();case"UPDATE_CONTEXT_MENU":return iE(e.data?.id,e.data?.opts);case"IS_ALLOWED_FILE_SCHEME_ACCESS":return sE();case"GET_CHATGPT_MODELS":return P8(e.isForce);case"GET_API_MODELS":return G8();case"GET_COOKIE":try{let n=await b.default.cookies.get(e.data);return n?.value?decodeURIComponent(n.value):""}catch(n){return Promise.reject(n)}case"SET_COOKIE":try{return await b.default.cookies.set(e.data)}catch(n){return Promise.reject(n)}case"CHECK_SCHEDULE_JOB":{hk();break}case"REFRESH_VIP_INFO":{rn(async()=>{if((await Z.getVipInfo()).isVIP){N({lastUpgradeTime:Date.now()});let{autoTools:o,isDoneAutoToolsAction:i}=await b.default.storage.local.get(["autoTools","isDoneAutoToolsAction"]);(o===void 0||o&&o.length===0)&&!i&&N({autoTools:tE,isDoneAutoToolsAction:!0})}else throw new Error("")},2e3);break}case"UPDATE_USERINFO":{await Z.getUserInfo();break}case"USER_LOGIN":{await N(Object.keys(Vf).reduce((n,o)=>{let i=e?.data[o];return i&&(n[o]=i),n},{})),await Ge(["__manual_logout__","__force_logout_reason__"]),await N({logged:!0});break}case"USER_LOGOUT":{await ki();break}case"FORWARD_TO_CHAT":{b.default.runtime.sendMessage({type:"is-sidepanel-open"}).then(n=>{if(n)return b.default.runtime.sendMessage({...e,type:"SEND_TO_CHAT",isForSidepanel:!0});b.default.tabs.sendMessage(t.tab?.id,{...e,type:"SEND_TO_CHAT"})}).catch(()=>{b.default.tabs.sendMessage(t.tab?.id,{...e,type:"SEND_TO_CHAT"})});return}case"CONTINUE_IN_CHAT":{b.default.runtime.sendMessage({type:"is-sidepanel-open"}).then(n=>{if(n)return b.default.runtime.sendMessage({...e,type:"DO_CONTINUE_IN_CHAT",isForSidepanel:!0});b.default.tabs.sendMessage(t.tab?.id,{...e,type:"DO_CONTINUE_IN_CHAT"})}).catch(()=>{b.default.tabs.sendMessage(t.tab?.id,{...e,type:"DO_CONTINUE_IN_CHAT"})});return}case"SEND_MSG_IN_CHAT":{b.default.runtime.sendMessage({type:"is-sidepanel-open"}).then(n=>{if(n)return b.default.runtime.sendMessage({...e,type:"DO_SEND_MSG_IN_CHAT",isForSidepanel:!0});b.default.tabs.sendMessage(t.tab?.id,{...e,type:"DO_SEND_MSG_IN_CHAT"})}).catch(()=>{b.default.tabs.sendMessage(t.tab?.id,{...e,type:"DO_SEND_MSG_IN_CHAT"})});return}case"CHECK_PINNED":return!!(await b.default.action.getUserSettings())?.isOnToolbar;case"OPEN_CHAT_PAGE":return dE("",()=>{b.default.runtime.sendMessage({type:"switchChat",data:{contact:e.contact||"chat",conversation:e.currentCid}})},()=>N({activeConversation:{contact:e.contact||"chat",conversation:e.currentCid}}));case"QUERY_SELECTION":return b.default.tabs.sendMessage(e.tabId||t.tab?.id,{type:"query-selection",selectionText:e.selectionText});case"TOGGLE_HOST_TRANSLATOR_FAB":return cD(e,t);case"TOGGLE_SIDEBAR":{us(e.isShow);break}case"GUARD_CHATGPT_TAB":{UD();break}case"TOGGLE_TRANSLATOR":b.default.tabs.sendMessage(e.tabId||t.tab?.id,{type:"toggle-translator",show:e.show});break;case"GO_LOGIN":{O0();break}case"GO_INVITE":{P0();break}case"GET_INVITE_LINK":return Z.createInviteLink();case"GET_CHATGPT_PLUGINS":return H8();case"REMOVE_SELECTION":{let n=await Kt();n?.id&&b.default.tabs.sendMessage(n.id,{type:"remove-selection"});break}case"SEND_TO_CURRENT_TAB":{let n=await Kt();n?.id&&b.default.tabs.sendMessage(n.id,e.data);break}case"CAPTURE_VISIBLE_TAB":return b.default.tabs.captureVisibleTab(void 0,{format:"jpeg"});case"RUNTIME_FORWARD_MSG":return b.default.runtime.sendMessage(e.msg);case"FORWARD_MSG":{let n=await Kt();if(n?.id)return b.default.tabs.sendMessage(n.id,e);break}case"FORWARD_TO_CONTENT":{let n=await Kt();if(n?.id){let o=e.subtype;return delete e.type,delete e.subtype,b.default.tabs.sendMessage(n.id,{type:o,...e})}break}case"FORWARD_MSG_TO_SELF":return b.default.runtime.sendMessage({...e,type:e.originalType});case"GET_SRC_SUFFIX":{let n="",o=await Bk();o.length||await Z.signImageCookie(),o=await Bk();let i=o.join("&");return n=i?"?"+i:"",n;break}case"CLEAR_BADGE":return uu();case"GA_API":return Z.googleAnalytics(...Array.from(e.args));case"SIDER_STAT_API":return Lf(...Array.from(e.args));case"DETECT_PAGE_LANGUAGE":return(await b.default.tabs.detectLanguage()).replace("-","_");case"TRANSLATION_CACHE":{let n=jf();if(e.action==="get")return await Promise.all(e.keys.map(o=>n.getData(o)));if(e.action==="set")return await Promise.all(e.values.map(o=>n.setData(o)));if(e.action==="clear")return await n.clearData();break}case"DEMO_TTS_CACHE":{let n=z0();if(e.action==="get")return await n.getData(e.key);if(e.action==="set")return await n.setData(e.value);if(e.action==="clear")return await n.clearData();break}case"GET_PROMOTE_DATA":{AD().then(n=>{let o={type:"PROMOTE_DATA",data:n};return t.tab?.id?b.default.tabs.sendMessage(t.tab.id,o):b.default.runtime.sendMessage(o)});break}case"GET_IMAGE":return gu(e.id).then(n=>n);case"GET_CHATGPT_UPLOAD_URL":return DD(e.data,e.isMyFile);case"REPORT_CHATGPT_FILE_UPLOADED":return kD(e.fileId);case"GET_CHATGPT_FILE_STATUS":return ND(e.fileId);case"GET_INTERPRETER_DOWNLOAD_URL":return FD(e.data);case"GET_IS_SIDEPANEL_OPEN":return b.default.runtime.getContexts?b.default.runtime.getContexts({contextTypes:["SIDE_PANEL"]}).then(n=>n.length>0):!1;case"OPEN_SIDEPANEL":return q8(t.tab);case"CLOSE_SIDEPANEL":return!b.default.sidePanel||!b.default.sidePanel.setOptions?!1:b.default.sidePanel.setOptions({enabled:!1}).then(()=>b.default.sidePanel.setOptions({enabled:!0}));case"KEEP_GPT_IN_SIDEBAR":return vD(e.id);case"GET_FAVICON":return t.tab?.favIconUrl;case"GET_TABS":return b.default.tabs.query({currentWindow:!0});case"GET_CURRENT_TAB":return Kt();case"GET_READABILITY_TEXT_FROM_TAB":return b.default.tabs.sendMessage(e.tabId,{type:"get-readability-text",dryRun:e.dryRun});case"ENSURE_CONTENT":return is(e.tabId);case"GET_SIDEPANEL_OPEN":return b.default.runtime.getContexts?.({contextTypes:["SIDE_PANEL"]}).then(n=>n.length>0);case"OPEN_ARTIFACT_PAGE":return b.default.runtime.getContexts?.({documentUrls:[br("artifacts.html")]}).then(n=>{n.length===0?cr({url:"/artifacts.html"}):b.default.windows.getCurrent().then(o=>{n[0].windowId!==o.id?b.default.tabs.move(n[0].tabId,{windowId:o.id,index:-1}).then(()=>{b.default.tabs.update(n[0].tabId,{active:!0})}):b.default.tabs.update(n[0].tabId,{active:!0})})});case"OPEN_ANSWER_COMPARE_PAGE":return b.default.runtime.getContexts?.({documentUrls:[br("answer-compare.html")]}).then(n=>{n.length===0?cr({url:"/answer-compare.html"}):b.default.windows.getCurrent().then(o=>{n[0].windowId!==o.id?b.default.tabs.move(n[0].tabId,{windowId:o.id,index:-1}).then(()=>{b.default.tabs.update(n[0].tabId,{active:!0})}):b.default.tabs.update(n[0].tabId,{active:!0})})});case"OPEN_BLOCK_PREVIEW_PAGE":return b.default.runtime.getContexts?.({documentUrls:[br("block-preview.html")]}).then(n=>{n.length===0?cr({url:"/block-preview.html"}):b.default.windows.getCurrent().then(o=>{n[0].windowId!==o.id?b.default.tabs.move(n[0].tabId,{windowId:o.id,index:-1}).then(()=>{b.default.tabs.update(n[0].tabId,{active:!0})}):b.default.tabs.update(n[0].tabId,{active:!0})})});case"OPEN_AUDIO_PREVIEW_PAGE":return b.default.runtime.getContexts?.({documentUrls:[br("audio-preview.html")]}).then(n=>{n.length===0?cr({url:"/audio-preview.html"}):b.default.windows.getCurrent().then(o=>{n[0].windowId!==o.id?b.default.tabs.move(n[0].tabId,{windowId:o.id,index:-1}).then(()=>{b.default.tabs.update(n[0].tabId,{active:!0})}):b.default.tabs.update(n[0].tabId,{active:!0})})});case"CLEAR_ARTIFACTS_DATA":return b.default.storage.local.remove("artifactsData");case"UPLOAD_ROAST":{let{obj:n,siteType:o}=e,i=`https://roast-vs-boast.${le.domain}/api/combined_agent_direct`;return o==="facebook"?i=`https://roast-vs-boast.${le.domain}/api/facebook/roast`:o==="instagram"&&(i=`https://roast-vs-boast.${le.domain}/api/instagram_agent_direct`),fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:e.obj})}).then(s=>s.json())}default:break}return new Promise(n=>{setTimeout(()=>{n()},32)})});async function Bk(){return(await b.default.cookies.getAll({domain:le.domain})).filter(t=>t.name.startsWith("CloudFront-")&&t.domain==="."+le.domain).map(t=>t.name.split("CloudFront-")[1]+"="+t.value)}chrome&&chrome.sidePanel&&chrome.sidePanel.setPanelBehavior({openPanelOnActionClick:!0}).catch(e=>{});b.default.runtime.onInstalled.addListener(async e=>{if(e.reason==="install"&&(b.default.storage.local.set({installedAt:Date.now(),installedFirstVersion:b.default.runtime.getManifest().version,__autoShowSwitchbar__:!0}),await lk(),setTimeout(async()=>{b.default.tabs.create({url:le.origin+"/setup"})},200)),(e.reason==="install"||e.reason==="update")&&(fs(e.reason==="update"),b.default.storage.local.get("provider:siderApi").then(t=>{t&&t["provider:siderApi"]?.model==="gpt-4"&&b.default.storage.local.set({"provider:siderApi":{model:"gpt-4o"}}),t&&t["provider:siderApi"]?.model==="gemini-pro"&&b.default.storage.local.set({"provider:siderApi":{model:"gemini-1.5-flash"}}),t&&(t["provider:siderApi"]?.model==="claude-3-sonnet"||t["provider:siderApi"]?.model==="claude-3-opus")&&b.default.storage.local.set({"provider:siderApi":{model:"claude-3.5-sonnet"}})}),b.default.storage.local.get(["autoTools","forceOpenArtifacts"]).then(t=>{if(t&&!t.forceOpenArtifacts&&(!t.autoTools||!t.autoTools.includes("artifacts"))){let r=t.autoTools||[];b.default.storage.local.set({autoTools:["artifacts",...r],forceOpenArtifacts:!0})}}),b.default.storage.local.get(["toolsShowNew","isSetThinkingModeShowNew"]).then(t=>{(!t||!t.toolsShowNew||!t.toolsShowNew.includes("thinking_mode"))&&(t.isSetThinkingModeShowNew||b.default.storage.local.set({toolsShowNew:["thinking_mode",...t.toolsShowNew||[]],isSetThinkingModeShowNew:!0}))}),b.default.storage.local.get("quickAction:provider:siderApi").then(t=>{t&&(t["quickAction:provider:siderApi"]?.model==="claude-3-sonnet"||t["quickAction:provider:siderApi"]?.model==="claude-3-opus")&&b.default.storage.local.set({"quickAction:provider:siderApi":{model:"claude-3.5-sonnet"}}),t&&t["quickAction:provider:siderApi"]?.model==="gpt-3.5"&&b.default.storage.local.set({"quickAction:provider:siderApi":{model:"sider"}}),t&&t["quickAction:provider:siderApi"]?.model==="gpt-4"&&b.default.storage.local.set({"quickAction:provider:siderApi":{model:"gpt-4o"}})}),b.default.storage.local.get(["finishSwitchSider","provider:siderApi"]).then(t=>{t&&!t.finishSwitchSider&&t["provider:siderApi"]?.model==="gpt-3.5"?b.default.storage.local.set({"provider:siderApi":{model:"sider"},finishSwitchSider:!0}):b.default.storage.local.set({finishSwitchSider:!0})}),b.default.storage.local.get("siderGrammarKey").then(t=>{t&&t.siderGrammarKey?.model==="gpt-4"&&b.default.storage.local.set({siderGrammarKey:{model:"gpt-4o"}})}),b.default.tabs.query({active:!0,currentWindow:!0}).then(t=>{let r=t[0];!r||r.id===void 0||!r.url||r.url.startsWith("chrome://")||is(r.id)})),e.reason==="update"){let t=L0[0];if(b.default.storage.local.get({shownChangelogVersion:"",installedFirstVersion:"1.0.0"}).then(({shownChangelogVersion:r,installedFirstVersion:n})=>{r!==t.version&&t.notifyType==="modal"&&Ql(n)!==Ql(t.version)&&(OD(),Ck(JB))}),b.default.storage.local.get("webAccessEnabled").then(r=>{r.webAccessEnabled&&(b.default.storage.local.set({autoTools:["search"]}),b.default.storage.local.remove("webAccessEnabled"))}),b.default.storage.local.remove(["webAppNetwork","chatRequirements"]),Ge(["__GET_TMP_GPT5_INFO_AT__","__InviteQueryArrivalQueryAt__","__INVITE_QUERY_ARRIVAL_AT__","__LAST_REFRESH_DISPLAY_DATA__","__REFRESH_DISPLAY_DATA_AT__","__LOAD_TTS_INIT_DATA_AT__","__SCHEDULE_GET_CONFIG_RUN_AT__","__SCHEDULE_GET_PRICING_RUN_AT__","__SCHEDULE_GET_PROMPTS_RUN_AT__","__SCHEDULE_PULL_SETTINGS_RUN_AT__","__SCHEDULE_RUN_AT__","__SCHEDULE_VIPINFO_RUN_AT__","sidebarPromptTemplate","selectedSearchTemplate","promptTemplates","ratingTipShowTimes","__can_enjoy_trial__","lastTranslateWidgetLang","__FlagAutoPinTTSReading__","__FlagAutoPinTTSWriting__","__halloween_stopat_241016__"]),e.previousVersion){let[r,n]=e.previousVersion.split(".");~~r<=4&&~~n<=28&&W("sidebarShortcut").then(o=>{(!o||o.useDefault)&&en("sidebarShortcut",{key:"p",keyCode:80,metaKey:!0,ctrlKey:!0,altKey:!1,shiftKey:!1,disabled:!1})})}e.previousVersion&&(Ca(e.previousVersion,"<","4.31.0")&&W({quickActionPinnedReading:[],quickActionPinnedWriting:[]}).then(({quickActionPinnedReading:r,quickActionPinnedWriting:n})=>{let o=r||[],i=n||[];o?.length>0?o=["copy",...o]:o=["copy","tts","explain_this"],i?.length>0?i=["copy",...i]:i=["copy","improve_writing","fix_spelling_grammar","change_tone"],N({quickActionPinnedReading:o,quickActionPinnedWriting:i})}),Ca(e.previousVersion,"<","4.36.0")&&W({quickActionPinnedReading:[]}).then(({quickActionPinnedReading:r})=>{let n=r||[];n?.length>0?n=[...n,"highlight"]:n=["copy","highlight","explain_this"],N({quickActionPinnedReading:n})}),Ca(e.previousVersion,"<","4.37.0")&&jf().clearData())}b.default.alarms.create("refresh-image-cookie",{periodInMinutes:5*24*60})});b.default.alarms.onAlarm.addListener(e=>{e.name==="refresh-image-cookie"&&Z.signImageCookie()});b.default.tabs.onActivated.addListener(e=>{let t=e.tabId;is(t),J0(t)});b.default.tabs.onUpdated.addListener((e,t,r)=>{b.default.tabs.sendMessage(e,{type:"current-tab-on-updated",data:{tabId:e,changeInfo:t,tab:r}})});ZD();b.default.runtime.onMessageExternal.addListener((e,t,r)=>{if(KB.includes(t.id||""))switch(e.type){case"SIDER_OCR":r(!0),e.data?.img&&Su(e.data.img);break;default:r(!0),us();break}});b.default.action.onClicked.addListener(e=>{e.status==="loading"?b.default.runtime.onMessage.addListener(function t(r,n){n.tab&&n.tab.id===e.id&&r.type==="sidebar-ready"&&(b.default.runtime.onMessage.removeListener(t),us())}):us(),uu()});async function us(e){let t=await b.default.tabs.query({active:!0,currentWindow:!0});try{return await b.default.tabs.sendMessage(t[0].id,{type:"toggle-sidebar",isShow:e}),{action:"close"}}catch{return Bo(),!1}}var H8=Bt(async function(){let r=(await _D()).items;if(Array.isArray(r)){let n=r.map(o=>({id:o.id,logo:o.manifest.logo_url,name:o.manifest.name_for_human,description:o.manifest.description_for_human}));return b.default.storage.local.set({chatgptPlugins:n})}},1e3);b.default.runtime.setUninstallURL("https://sider.ai/uninstall?app_version="+b.default.runtime.getManifest().version);function q8(e){return!b.default.sidePanel||!b.default.sidePanel.open||e?.windowId===void 0?!1:b.default.sidePanel.open({windowId:e?.windowId}).then(async()=>b.default.runtime.getContexts?await b.default.runtime.getContexts({contextTypes:["SIDE_PANEL"]}).then(r=>r.length>0):!1).catch(t=>!1)}b.default.storage.local.onChanged.addListener(e=>{e.language&&e.language.newValue&&(D0(e.language.newValue,!0),k0(e.language.newValue,!0))});})();
